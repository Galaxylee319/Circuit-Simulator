!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){(function(t){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function r(t){if(!k.totalMarks)return!1;switch(!0){case k.newMark:case k.pasteParts:case k.moveParts:T.partsNow.moveParts(t);break;case k.moveMap:var e=k.current.mouseBias(t).mul(k.current.zoom);if(e.isEqual([0,0]))return!1;O.attr("class","mouse-movemap");var n=k.SVG();k.SVG(n[0]+e[0],n[1]+e[1]),n=k.SVG(),k.bias(n[0]%k.size(),n[1]%k.size()),O.css("background-position",k.bias().join("px ")+"px"),(0,f.$)("#area-of-parts").attr("transform","translate("+n.join(",")+") scale("+k.zoom()+")");break;case k.selectBox:var r=k.mouse(t),i=k.current.selectionBoxStart,a=Math.max(Math.abs(r[0]-i[0]),Math.abs(r[1]-i[1]));(0,f.$)("#select-box").attr("points",i.join(",")+" "+r[0]+","+i[1]+" "+r.join(",")+" "+i[0]+","+r[1]),a>3&&O.attr("class","mouse-selectBox");break;case k.deformLine:T.partsNow[0].setPath(t,"deformation");break;case k.moveText:T.partsNow[0].move(t,"text");break;case k.drawLine:T.partsNow.get(-1).setPath(t,"draw");break;case k.graphSelecte:k.current.graph.drawSelect(t,k.current)}return!1}function i(){a();for(var t=0;t<T.partsNow.length;t++)T.partsNow[t].toNormal();T.partsNow.deleteAll(),T.partsNow.current={}}function a(t,e){var n=(0,f.$)("#right-button-menu"),r=["#clockwise-direction","#anticlockwise-direction","#X-Mirror","#Y-Mirror"];if("close"===e||e===_)return n.attr("class",""),(0,f.$)(".right-button-option",n).each(function(t){return(0,f.$)(t).removeClass("disable")}),!1;n.attr("class","right-"+e),n.css({left:0,top:0,opacity:0});var i=(0,f.$)(window),a=i.height(),o=S.hasClass("open-add-parts")?i.width()-S.width():i.width(),s=n.width(),u=n.height(),c=o-t.pageX<s?t.pageX-s:t.pageX,l=a-t.pageY<u?t.pageY-u:t.pageY;if(n.css({left:c+"px",top:l+"px",opacity:1}),e.indexOf("part")!==-1)for(var p=T.partsNow.isRotate(),h=0;h<4;h++){var d=(0,f.$)(r[h]);p[h]?d.removeClass("disable"):d.addClass("disable")}else if("map"===e){var v=(0,f.$)("#right-undo");k.isRevocate()?v.removeClass("disable"):v.addClass("disable"),v=(0,f.$)("#parts-paste"),k.isPaste()?v.removeClass("disable"):v.addClass("disable")}}function o(t){for(var e=1.6,n=61,r=(0,f.$)(window).height(),i=(0,f.$)(window).width(),a=!!t.voltage.length+!!t.current.length,o=r-n,s=o/a,u=(0,f.$)("#graph-main"),c=r*e<i?r*e:i,l=u.childSelect("div.graph-individual",a),p=0;p<l.length;p++){var h=l.get(p);h.childrens().remove(),h.css("height",s+"px")}A.attr("style","width: "+c+"px");for(var d=0;d<2;d++){var v=["voltage","current"][d];if(t[v].length){var y=2===l.length?d:0;l.get(y).attr("id","graphForm-"+d),l.get(y).prop("_data",new w.Graph(t[v],l[y],v))}}var g=A.height(),m=A.width(),x=66,T=63.6,M=Math.sqrt((x-m)*(x-m)+(T-g)*(T-g)),_=[[M-m+x,M-g],[M-m+x,M+T+10],[M+x+10,M+T+10],[M+x+10,M-g]].map(function(t){return t.join("px ")}).join("px,")+"px";A.attr("class","run");var k=A.append((0,f.$)("<div>",{id:"background-circle",style:"position: absolute; background-color: #66CCCC; border-radius: 50%;-webkit-clip-path: polygon("+_+");margin : 0; right: "+x+"px; bottom: "+T+"px; width: "+2*M+"px; height: "+2*M+"px; transform: translate(50%,50%)"})),S=new b.styleRule("graph-vision");S.setRule("0%",{width:"0px",height:"0px","-webkit-clip-path":"circle(0)"}),S.setRule("100%",{width:2*M+"px",height:2*M+"px","-webkit-clip-path":"circle(200vh)"}),setTimeout(function(){A.attr("class","visionAll"),k.remove()},600)}var s=n(2),u=e(s),c=n(59),l=e(c),p=n(62),h=e(p),f=n(67),d=n(87),v=n(107),y=n(108),g=n(109),m=n(124),w=n(129),b=n(130),x=n(133),T=n(123),M=document,_=void 0,k=function(){function t(t){return(0,y.Point)([(t.pageX-m)/p,(t.pageY-w)/p])}function e(t){var e=(0,y.Point)([(t.pageX-b)/p,(t.pageY-M)/p]);return b=t.pageX,M=t.pageY,e}function n(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].toSimpleData());return e}for(var r={},i=0,a=["newMark","moveParts","pasteParts","moveMap","selectBox","deformLine","moveText","drawLine","graphSelecte"],o=function(t){(0,l.default)(r,a[t],{enumerable:!0,configurable:!0,get:function(){return!!(i&1<<t)}});var e="set"+a[t].substring(0,1).toUpperCase()+a[t].substring(1);r[e]=function(e){e=Number(!!e),e?i|=1<<t:i&=65535^1<<t}},s=0;s<a.length;s++)o(s);Object.defineProperty(r,"totalMarks",{enumerable:!0,configurable:!0,get:function(){return!!i}});var u=20,c=1,p=1,d=0,v=0,m=0,w=0,b=0,M=0,S=[],P=[],O=(0,f.$)("<div>",{id:"error-tip",class:"disappear"});return(0,f.$)("#editor-container").append(O),r.size=function(t){return t===_?u:void(u=t)},r.rate=function(t){return t===_?c:void(c=t)},r.zoom=function(t){return t===_?p:void(p=t)},r.bias=function(t,e){return t===_&&e===_?[d,v]:void(t!==_&&e!==_?(d=t,v=e):t instanceof Array&&_===_&&(d=t[0],v=t[1]))},r.SVG=function(t,e){return t===_&&e===_?[m,w]:void(t!==_&&e!==_?(m=t,w=e):t instanceof Array&&_===_&&(m=t[0],w=t[1]))},r.mouse=function(e){return t(e)},r.createData=function(n){e(n);var i={zoom:r.zoom(),SVG:r.SVG(),mouse:t,mouseBias:e,gridL:[]};return n.pageX&&n.pageY&&(i.pageL=t(n),i.gridS=(0,y.Point)([n.pageX,n.pageY]).floor()),i},r.copy=function(t){for(var e=t?t:T.partsNow,r=[],i=0;i<e.length;i++)"move"===e[i].current.status&&r.push(e[i]);r=n(r),S.length=0;for(var a=0;a<r.length;a++)S.push(r[a])},r.cut=function(){for(var t=[],e=[],i=0;i<T.partsNow.length;i++)"move"===T.partsNow[i].current.status?e.push(T.partsNow[i]):t.push(T.partsNow[i]);r.copy(T.partsNow),t=n(t),e.forEach(function(t){return t.deleteSelf()}),r.paste(t),T.partsNow.forEach(function(t){t.elementDOM.removeAttr("opacity"),t.nodeToConnect(0),t.nodeToConnect(1),t.markSign()})},r.paste=function(t){var e=t?t:S,n=[];T.partsNow.deleteAll();for(var r=0;r<e.length;r++){var i=e[r];if("config"!==i.partType){"line"!==i.partType?T.partsNow.push(new x.PartClass(i)):T.partsNow.push(new g.LineClass(i));var a=T.partsNow.get(-1),o={};i.id&&i.id!==a.id&&(o.old=i.id,o.new=T.partsNow.get(-1).id,n.push(o)),a.current={},a.current.status="move",a.elementDOM.attr("opacity",.4)}else for(var s in i)i.hasOwnProperty(s)&&(0,f.$)("#"+s).prop("value",i[s])}for(var u=0;u<n.length;u++)for(var c=0;c<T.partsNow.length;c++)for(var l=0;l<T.partsNow[c].connect.length;l++){var p=T.partsNow[c],h=p.connect[l],d=n[u].old,v=n[u].new;p.connect[l]=h.replace(d,v)}for(var y=0;y<T.partsNow.length;y++)for(var m=T.partsNow[y],w=m.connect,b=0;b<w.length;b++)w[b]=w[b].split(" ").filter(function(t){return T.partsNow.has(t)}).join(" ");for(var M=0;M<T.partsNow.length;M++){var _=T.partsNow[M],k=_.connect;if(_.isExist()&&"line"===_.partType)for(var P=0;P<2;P++)"line"===_.connectStatus(P)&&1===k[P].split(" ").length&&_.mergeLine(k[P])}T.partsNow.deleteParts(function(t){return t.isExist()})},r.now=function(){for(var t=[],e=0;e<T.partsAll.length;e++)t.push(T.partsAll[e].toSimpleData());t.isEqual(P.get(-1))||P.push(t),P.length>10&&P.splice(0,1)},r.revocate=function(t){var e=t?t:P.pop();if(!e)return!1;T.partsNow.deleteAll(),T.partsAll.forEach(function(t){return T.partsNow.push(t)}),T.partsNow.forEach(function(t){return t.deleteSelf()}),T.partsNow.deleteAll(),T.partsAll.deleteAll(),k.paste(e),T.partsNow.deleteAll();for(var n=0;n<T.partsAll.length;n++)T.partsAll[n].elementDOM.removeAttr("opacity"),T.partsAll[n].render&&T.partsAll[n].render(),T.partsAll[n].markSign();for(var r=0;r<T.partsAll.length;r++)"line"===T.partsAll[r].partType&&(T.partsAll[r].nodeToConnect(0),T.partsAll[r].nodeToConnect(1))},r.isPaste=function(){return!!S.length},r.isRevocate=function(){return!!P.length},r.error=function(t){O.text(t),O.attr("style",""),O.removeClass("disappear"),setTimeout(function(){return O.addClass("disappear")},5e3),setTimeout(function(){return O.css("z-index","-10")},6e3)},r.current=[],(0,h.default)(r),r}(),S=(0,f.$)("#sidebar-menu"),P=(0,f.$)("#action-container"),O=(0,f.$)("#container-grid"),C=(0,f.$)("#parameter-menu"),A=(0,f.$)("#graph-page"),N=(0,f.$)("#right-button-menu");S.on({mousemove:function(t){(0,f.$)("#float-tool-tip").css({bottom:window.innerHeight-t.pageY+"px",right:window.innerWidth-t.pageX+"px"})},mouseenter:function(t){var e=(0,f.$)(t.currentTarget).prop("introduction");(0,f.$)("#float-tool-tip").css({display:"block",width:16*e.length+"px"}).text(e)},mouseleave:function(){(0,f.$)("#float-tool-tip").css({display:"none"},!0)},click:function(t){1!==t.which||k.totalMarks||(i(),k.now(),k.setNewMark(!0),new x.PartClass(t.currentTarget.id).toFocus(),T.partsNow.checkLine(),T.partsNow.current=k.createData(t),T.partsNow.current.pageL=T.partsNow.center(),T.partsNow.moveParts({pageX:-5e4,pageY:-5e4}),O.on("mousemove",r))}},".parts-list"),S.on("click","#menu-add-parts-close",function(t){1===t.which&&((0,f.$)("#menu-add-parts-close").addClass("disappear"),(0,f.$)(document.body).removeClass("open-sidebar open-gray"),S.removeClass("open-menu-config open-add-parts"))}),P.on("click","#fab-config",function(t){1===t.which&&((0,f.$)(document.body).addClass("open-sidebar open-gray"),S.addClass("open-menu-config"))}),P.on("click","#fab-adds",function(t){1===t.which&&((0,f.$)(document.body).addClass("open-sidebar"),S.addClass("open-add-parts"),(0,f.$)("#menu-add-parts-close").removeClass("disappear"))}),P.on("click","#fab-run",function(t){if(1!==t.which)return!1;i();var e=10,n=P.childrens(),r=(0,f.$)("#fab-run"),a=(0,f.$)("#fab-text"),s=a.childrens(0),u={voltage:[],current:[]},c=T.partsAll.connectGraph().map(function(t){var e={solver:new m.Solver(t)};return e.iteration=e.solver.solve(),e}),l="";if(!c.length)return k.error("电路图不能为空"),!1;if(c.some(function(t){return l=t.solver.error}))return k.error(l),!1;for(var p=1;p<n.length;p++)n.get(p).css("display","none");r.css("display","none"),a.css("display",""),s.text("0%"),setTimeout(function t(){for(var i=(new Date).getTime(),l=500,p=0,h=!1;p<l&&!h;){for(var f=0;f<c.length;f++)c[f].now=c[f].iteration.next(),h|=c[f].now.done;p=(new Date).getTime()-i}if(h){s.text("100%");for(var d=0;d<c.length;d++)u.voltage=u.voltage.concat(c[d].solver.observeVoltage),u.current=u.current.concat(c[d].solver.observeCurrent);u.voltage.time=c[0].solver.observeVoltage.time,u.voltage.stepTime=c[0].solver.observeVoltage.stepTime,u.current.time=c[0].solver.observeCurrent.time,u.current.stepTime=c[0].solver.observeCurrent.stepTime,setTimeout(function(){o(u)},e),setTimeout(function(){s.text(""),r.css("display",""),a.css("display","none");for(var t=1;t<n.length;t++)n.get(t).css("display","")},1e3)}else s.text(c[0].now.value+"%"),setTimeout(t,e)},e)}),C.on("click","#parameter-bottom-cancel",function(){(0,f.$)(M.body).removeClass("open-gray"),C.css("z-index","20"),C.attr("class","parameter-close"),setTimeout(function(){C.css("z-index","")},350)}),C.on("click","#parameter-bottom-accept",function(){k.now(),T.partsNow[0].inputVision()&&((0,f.$)(M.body).removeClass("open-gray"),C.css("z-index","20"),C.attr("class","parameter-close"),setTimeout(function(){C.css("z-index","")},350))}),O.on("mousewheel",function(t){if(!(0,f.$)(M.body).hasClass("open-gray")){var e=[t.pageX,t.pageY],n=k.size();if(t.deltaY>0?k.size(n-5):t.deltaY<0&&k.size(n+5),k.size()<20)return k.size(20),!0;if(k.size()>80)return k.size(80),!0;var r=k.size();k.rate(r/n),k.zoom(r/20);var i=k.SVG();k.SVG(Math.round(e[0]-k.rate()*(e[0]-i[0])),Math.round(e[1]-k.rate()*(e[1]-i[1]))),i=k.SVG(),k.bias(i[0]%r,i[1]%r),O.css({"background-size":r+"px","background-position":k.bias().join("px ")+"px"}),(0,f.$)("#area-of-parts").attr("transform","translate("+i.join(",")+") scale("+k.zoom()+")")}}),(0,f.$)("#shade-gray").on("click",function(){var t=(0,f.$)(M.body);t.hasClass("open-sidebar")&&(t.removeClass("open-gray open-sidebar"),S.removeClass("open-menu-config open-add-parts"))}),O.on("mousedown","g.editor-parts .focus-part, g.editor-parts path, g.editor-parts .features-text",function(t){if(k.totalMarks)return!1;var e=T.partsAll.findPart(t.currentTarget.parentNode.id);if(1===t.which){if("text"===t.currentTarget.tagName){i();var n=(0,f.$)(this);e.toFocus(),e.current=k.createData(t).extend({text:n,position:(0,y.Point)([parseInt(n.attr("x")),parseInt(n.attr("y"))])}),k.setMoveText(!0)}else T.partsNow.has(e.id)?a():(i(),e.toFocus()),T.partsNow.checkLine(),T.partsNow.moveStart(),T.partsNow.current=k.createData(t),k.now(),k.setMoveParts(!0);O.on("mousemove",r)}else if(3===t.which){var o=T.partsNow.filter(function(t){return"line"!==t.partType});o.has(e.id)&&o.length>1?(T.partsNow.checkLine(),a(t,"parts")):(i(),e.toFocus(),T.partsNow.checkLine(),"reference_ground"===e.partType?a(t,"parts"):a(t,"part"))}return!1}),O.on("dblclick","g.editor-parts .focus-part, g.editor-parts path, g.editor-parts .features-text",function(t){var e=T.partsAll.findPart(t.currentTarget.parentNode.id);1!==t.which||k.totalMarks||"reference_ground"===e.partType||e.viewParameter(k.zoom(),k.SVG())}),O.on({mouseenter:function(t){var e=t.currentTarget.tagName.toLowerCase(),n=(0,f.$)(t.currentTarget);if(k.totalMarks){if(k.drawLine&&"text"!==e&&!n.hasClass("line-rect")){var r=T.partsNow.get(-1);r.current.enforceAlign.extend({flag:!0,onPart:!0,part:T.partsAll.findPart(t.currentTarget.parentNode.id)})}}else"rect"===e||"text"===e?O.attr("class","mouse-movepart"):"g"===e&&n.hasClass("point-close")?O.attr("class","mouse-closepoint"):"g"===e&&n.hasClass("point-open")&&O.attr("class","mouse-line")},mouseleave:function(){if(k.totalMarks){if(k.drawLine){var t=T.partsNow.get(-1);t.current.enforceAlign.label&&t.current.enforceAlign.extend({flag:!0,part:!1,onPart:!1})}}else O.attr("class","")}},"g.editor-parts rect.focus-part, g.editor-parts g.part-point, g.editor-parts text, g.line rect.line-rect"),O.on("mousedown","g.line rect.line-rect",function(t){if(k.totalMarks)return!1;i(),k.now();var e=T.partsAll.findPart(this.parentNode.id);return e.toFocus(),1===t.which?(e.current=k.createData(t),e.startPath(t,"deformation"),k.setDeformLine(!0),O.on("mousemove",r)):3===t.which&&a(t,"line"),!1}),O.on("mousedown","g.editor-parts g.part-point",function(t){if(1===t.which&&!k.totalMarks){i(),k.now(),k.setDrawLine(!0);var e=T.partsAll.findPart(t.currentTarget.parentNode.id),n=parseInt(t.currentTarget.id.split("-")[1]),a=e.position.add(e.pointRotate()[n].position),o=e.connect[n],s=o?T.partsAll.findPart(o):new g.LineClass([a]);s.toFocus(),s.current=k.createData(t),o?s.startPath(t,"draw"):(e.toFocus(),e.setConnect(n,s.id),s.setConnect(0,e.id+"-"+n),s.startPath(t,"draw","new")),O.attr("class","mouse-line"),O.on("mousemove",r)}return!1}),O.on("mousedown","g.line g.draw-open",function(t){if(1===t.which&&!k.totalMarks){var e=T.partsAll.findPart(t.currentTarget.parentNode.id);i(),k.now(),k.setDrawLine(!0),e.toFocus(),e.current=k.createData(t),e.startPath(t,"draw","new"),O.attr("class","mouse-line"),O.on("mousemove",r)}return!1}),O.on({mousemove:function(t){return k.totalMarks||!function(){var e=k.mouse(t),n=e.roundToSmall(),r=e.add(-1,n.mul(20)),i="",a=[];Math.abs(r[0])>Math.abs(r[1])?r[0]>0?(i="right",a=n.add([1,0])):(i="left",a=n.add([-1,0])):r[1]>0?(i="down",a=n.add([0,1])):(i="up",a=n.add([0,-1]));var o=v.schMap.getValueBySmalle(n).connect;o.some(function(t,e){return a.isEqual(o[e])})?O.attr("class","mouse-cross"+i):O.attr("class","")}(),!1},mouseleave:function(){return k.totalMarks||O.attr("class",""),!1},mousedown:function(t){if(1===t.which&&!k.totalMarks){k.now(),k.setDrawLine(!0);var e=k.mouse(t).roundToSmall(),n=(O.attr("class")||"").match(/right|left|up|down/),i={right:[1,0],left:[-1,0],up:[0,-1],down:[0,1]}[n],a=e.add(i),o=v.schMap.getValueBySmalle(a).id,s=T.partsAll.findPart(o),u=v.schMap.getValueBySmalle(e).id.split(" "),c=4!==u.length&&"new";if(!n)return!1;T.partsNow.deleteAll(),s.toFocus(),s.current=k.createData(t),s.startPath(t,"draw",c),O.attr("class","mouse-line"),O.on("mousemove",r)}}},"g.line g.cross-point"),O.on("mousedown",function(t){return!k.totalMarks&&(i(),1===t.which?((0,f.$)("#area-of-parts").append((0,f.$)("<polygon>",d.SVG_NS,{id:"select-box"})),k.current.selectionBoxStart=k.mouse(t),k.setSelectBox(!0)):3===t.which&&(k.current=k.createData(t),k.setMoveMap(!0)),void O.on("mousemove",r))}),O.on("mouseup",function(t){var e=!0;if(1===t.which)switch(!0){case k.newMark:k.setNewMark(!1),T.partsNow.putDownParts("new");break;case k.pasteParts:T.partsNow.putDownParts("paste")?k.setPasteParts(!1):e=!1;break;case k.moveParts:k.setMoveParts(!1),T.partsNow.putDownParts();break;case k.selectBox:var n=k.mouse(t),o=Math.min(k.current.selectionBoxStart[1],n[1]),s=Math.max(k.current.selectionBoxStart[1],n[1]),u=Math.min(k.current.selectionBoxStart[0],n[0]),c=Math.max(k.current.selectionBoxStart[0],n[0]);i();for(var l=0;l<T.partsAll.length;l++){var p=T.partsAll[l].position;"line"!==T.partsAll[l].partType&&p[0]>=u&&p[0]<=c&&p[1]>=o&&p[1]<=s&&T.partsAll[l].toFocus()}(0,f.$)("#select-box").remove(),T.partsNow.checkLine(),k.setSelectBox(!1);break;case k.deformLine:k.setDeformLine(!1),T.partsNow[0].putDown(t,"deformation");break;case k.moveText:k.setMoveText(!1),T.partsNow[0].textVisition(T.partsNow[0].current.text.attr(["x","y"]));break;case k.drawLine:k.setDrawLine(!1),T.partsNow.get(-1).putDown(t,"draw");break;default:i()}else 3===t.which&&k.moveMap&&(k.setMoveMap(!1),k.current=[],O.hasClass("mouse-movemap")||(i(),a(t,"map")));e&&O.off("mousemove",r),e&&O.attr("class","")}),A.on("click","#waveRecover",function(){(0,f.$)("#graph-main .graph-individual").each(function(t){var e=t._data,n=[0,e.time],r=[Math.minOfArray(e.output.map(function(t){return Math.minOfArray(t.data)})),Math.maxOfArray(e.output.map(function(t){return Math.maxOfArray(t.data)}))];e.clearActionCanvas(),e.drawBackground(n,r,!0),e.drawCurve()})}),A.on("click","#waveToImage",function(){var t=(0,f.$)(window.open("about:blank").document.body);t.css({margin:"0px",padding:"0px"}),t.append((0,f.$)("<img>",{src:w.Graph.toImage()}))}),A.on("click","#waveToData",function(){for(var t=[],e=window.open("about:blank"),n=(0,f.$)("#graph-main .graph-individual").map(function(t){return t._data}),r=n[0].stepTime,i="<p>time,",a=0;a<n.length;a++)for(var o=0;o<n[a].output.length;o++)t.push(n[a].output[o]);for(var s=0;s<t.length;s++)i+=t[s].name+", ";i+="</p>";for(var u=0;u<t[0].data.length;u++){i+="<p>"+(u*r).toSFixed()+", ";for(var c=0;c<t.length;c++)i+=t[c].data[u]+", ";i+="</p>"}e.document.body.innerHTML=i}),A.on("click","#waveClose",function(){A.attr("class","disappear"),setTimeout(function(){A.attr({class:"silence",style:"display:none;"})},500)}),A.on("click","tr.graph-table-row",function(t){var e=t.currentTarget.id.split("-").pop(),n=(0,f.$)("#graph-"+e),r=[/display *: *none/,/display *: *block/],i=n.attr("style");i.search(r[0])!==-1?n.attr("style",i.replace(r[0],"display:block")):i.search(r[1])!==-1&&n.attr("style",i.replace(r[1],"display:none"));var a=t.currentTarget.querySelector(".graph-table-legend-label");a.innerHTML.search("strike")!==-1?a.innerHTML=a.innerHTML.replace(/<\/?strike>/g,""):a.innerHTML=a.innerHTML.strike();for(var o=t.currentTarget.parentNode.parentNode.parentNode._data,s=0;s<o.output.length;s++)o.output[s].name===e&&(o.output[s].status=!o.output[s].status)}),A.on("mousemove",".graph-action",function(t){if(!k.totalMarks){for(var e=t.currentTarget.parentNode._data,n=(0,f.$)("#graph-main .graph-individual").map(function(t){return t._data}),r=e.drawMove(t.offsetX,t.offsetY),i=0;i<n.length;i++)n[i]!==e&&n[i].drawMove(t.offsetX,r);return!1}}),A.on("mouseleave",".graph-action",function(){if(!k.totalMarks)return(0,f.$)("#graph-main .graph-individual").each(function(t){return t._data.clearActionCanvas()}),!1}),A.on("mousedown",".graph-action",function(t){return 1===t.which&&void(k.totalMarks||((0,f.$)("#graph-main .graph-individual").each(function(t){return t._data.clearActionCanvas()}),k.current={graph:t.currentTarget.parentNode._data,start:[t.offsetX,t.offsetY],canvas:t.currentTarget.querySelector(".graph-action-canvas")},k.setGraphSelecte(!0),A.on("mousemove",r),A.addClass("mouse-select")))}),A.on("mouseup",function(){k.totalMarks&&k.graphSelecte&&!function(){A.off("mousemove",r),A.removeClass("mouse-select"),k.setGraphSelecte(!1);var t=k.current.graph,e=t.pixel2Value(k.current.select),n=(0,u.default)(e,2),i=n[0],a=n[1];t.clearActionCanvas(),t.drawBackground(i,a),t.drawCurve(),(0,f.$)("#graph-main .graph-individual").each(function(e){if(e._data!==t){var n=e._data.backgroundStartToEnd();e._data.clearActionCanvas(),e._data.drawBackground(i,[n[2],n[3]]),e._data.drawCurve()}}),k.current=[]}()}),N.on("click","#edit-parameters",function(t){var e=T.partsNow.get(0);return 1!==t.which||k.totalMarks||(0,f.$)(this).hasClass("disable")||(a(),e.viewParameter(k.zoom(),k.SVG())),!1}),N.on("click","#clockwise-direction",function(t){return 1!==t.which||k.totalMarks||(0,f.$)(this).hasClass("disable")||(a(),T.partsNow.isRotate(0)&&T.partsNow.rotate(0)),!1}),N.on("click","#anticlockwise-direction",function(t){return 1!==t.which||k.totalMarks||(0,f.$)(this).hasClass("disable")||(a(),T.partsNow.isRotate(1)&&T.partsNow.rotate(1)),!1}),N.on("click","#X-Mirror",function(t){return 1!==t.which||k.totalMarks||(0,f.$)(this).hasClass("disable")||(a(),T.partsNow.isRotate(2)&&T.partsNow.rotate(2)),!1}),N.on("click","#Y-Mirror",function(t){return 1!==t.which||k.totalMarks||(0,f.$)(this).hasClass("disable")||(a(),T.partsNow.isRotate(3)&&T.partsNow.rotate(3)),!1}),N.on("click","#parts-copy",function(t){return 1!==t.which||k.totalMarks||(0,f.$)(this).hasClass("disable")||(a(),k.copy(T.partsNow)),!1}),N.on("click","#parts-cut",function(t){return 1!==t.which||k.totalMarks||(0,f.$)(this).hasClass("disable")||(a(),k.cut()),!1}),N.on("click","#parts-paste",function(t){return 1===t.which&&!k.totalMarks&&k.isPaste()&&(a(),k.paste(),k.setPasteParts(!0),T.partsNow.checkLine(),T.partsNow.current=k.createData(t),T.partsNow.current.pageL=T.partsNow.center(),T.partsNow.moveParts({pageX:-5e4,pageY:-5e4}),O.on("mousemove",r)),!1}),N.on("click","#parts-all",function(t){return 1!==t.which||k.totalMarks||(0,f.$)(this).hasClass("disable")||(a(),T.partsAll.forEach(function(t){return t.toFocus()}),T.partsNow.checkLine()),!1}),N.on("click","#parts-delete",function(t){return 1!==t.which||k.totalMarks||(0,f.$)(this).hasClass("disable")||(a(),T.partsNow.forEach(function(t){return t.deleteSelf()}),T.partsNow.deleteAll()),!1}),N.on("click","#right-undo",function(t){return 1!==t.which||k.totalMarks||(0,f.$)(this).hasClass("disable")||(a(),k.isRevocate()&&k.revocate()),!1}),(0,f.$)("body").on("keydown",function(t){function e(t){(0,f.$)(t).trigger({type:"click",which:1,currentTarget:(0,f.$)(t)[0]})}if(k.totalMarks)return!1;switch(!0){case t.ctrlKey&&68===t.keyCode:e("#clockwise-direction");break;case t.ctrlKey&&t.altKey&&68===t.keyCode:e("#anticlockwise-direction");break;case t.altKey&&88===t.keyCode:e("#X-Mirror");break;case t.altKey&&67===t.keyCode:e("#Y-Mirror");break;case t.ctrlKey&&65===t.keyCode:e("#parts-all");break;case t.ctrlKey&&86===t.keyCode:e("#parts-paste");break;case t.ctrlKey&&67===t.keyCode:e("#parts-copy");break;case t.ctrlKey&&88===t.keyCode:e("#parts-cut");break;case t.ctrlKey&&90===t.keyCode:e("#right-undo");break;case 46===t.keyCode:e("#parts-delete");break;case 27===t.keyCode:(0,f.$)("#parameter-menu").hasClass("parameter-open")&&e("#parameter-bottom-cancel");break;case 13===t.keyCode:(0,f.$)("#parameter-menu").hasClass("parameter-open")?e("#parameter-bottom-accept"):S.hasClass("open-menu-config")&&e("#shade-gray")}}),M.body.onload=function(){var t=window.location.href.split("?")[1],e={};if(t&&t.length)for(var n=t.split("&"),r=0;r<n.length;r++){var i=n[r].replace(/#/g,"").split("=");e[i[0]]=i[1]}e.init&&k.revocate(d.iniData[e.init]),(0,f.$)("#load-cover").css("opacity",0),setTimeout(function(){(0,f.$)("#load-cover").css("display","none")},300),setTimeout(function(){(0,f.$)("#load-cover").css("display","none")},600)}}).call(e,n(1))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function a(t){if(p===clearTimeout)return clearTimeout(t);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function o(){v&&f&&(v=!1,f.length?d=f.concat(d):y=-1,d.length&&s())}function s(){if(!v){var t=i(o);v=!0;for(var e=d.length;e;){for(f=d,d=[];++y<e;)f&&f[y].run();y=-1,e=d.length}f=null,v=!1,a(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,p,h=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(t){p=r}}();var f,d=[],v=!1,y=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(3),a=r(i),o=n(55),s=r(o);e.default=function(){function t(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=(0,s.default)(t);!(r=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,a.default)(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,n){t.exports={default:n(4),__esModule:!0}},function(t,e,n){n(5),n(51),t.exports=n(53)},function(t,e,n){n(6);for(var r=n(17),i=n(21),a=n(9),o=n(48)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=s[u],l=r[c],p=l&&l.prototype;p&&!p[o]&&i(p,o,c),a[c]=a.Array}},function(t,e,n){"use strict";var r=n(7),i=n(8),a=n(9),o=n(10);t.exports=n(14)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports={}},function(t,e,n){var r=n(11),i=n(13);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(12);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";var r=n(15),i=n(16),a=n(31),o=n(21),s=n(32),u=n(9),c=n(33),l=n(47),p=n(49),h=n(48)("iterator"),f=!([].keys&&"next"in[].keys()),d="@@iterator",v="keys",y="values",g=function(){return this};t.exports=function(t,e,n,m,w,b,x){c(n,e,m);var T,M,_,k=function(t){if(!f&&t in C)return C[t];switch(t){case v:return function(){return new n(this,t)};case y:return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",P=w==y,O=!1,C=t.prototype,A=C[h]||C[d]||w&&C[w],N=A||k(w),V=w?P?k("entries"):N:void 0,E="Array"==e?C.entries||A:A;if(E&&(_=p(E.call(new t)),_!==Object.prototype&&(l(_,S,!0),r||s(_,h)||o(_,h,g))),P&&A&&A.name!==y&&(O=!0,N=function(){return A.call(this)}),r&&!x||!f&&!O&&C[h]||o(C,h,N),u[e]=N,u[S]=g,w)if(T={values:P?N:k(y),keys:b?N:k(v),entries:V},x)for(M in T)M in C||a(C,M,T[M]);else i(i.P+i.F*(f||O),e,T);return T}},function(t,e){t.exports=!0},function(t,e,n){var r=n(17),i=n(18),a=n(19),o=n(21),s="prototype",u=function(t,e,n){var c,l,p,h=t&u.F,f=t&u.G,d=t&u.S,v=t&u.P,y=t&u.B,g=t&u.W,m=f?i:i[e]||(i[e]={}),w=m[s],b=f?r:d?r[e]:(r[e]||{})[s];f&&(n=e);for(c in n)l=!h&&b&&void 0!==b[c],l&&c in m||(p=l?b[c]:n[c],m[c]=f&&"function"!=typeof b[c]?n[c]:y&&l?a(p,r):g&&b[c]==p?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[s]=t[s],e}(p):v&&"function"==typeof p?a(Function.call,p):p,v&&((m.virtual||(m.virtual={}))[c]=p,t&u.R&&w&&!w[c]&&o(w,c,p)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(20);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(22),i=n(30);t.exports=n(26)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(23),i=n(25),a=n(29),o=Object.defineProperty;e.f=n(26)?Object.defineProperty:function(t,e,n){if(r(t),e=a(e,!0),r(n),i)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(24);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(26)&&!n(27)(function(){return 7!=Object.defineProperty(n(28)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=!n(27)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(24),i=n(17).document,a=r(i)&&r(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,n){var r=n(24);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){t.exports=n(21)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){"use strict";var r=n(34),i=n(30),a=n(47),o={};n(21)(o,n(48)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(o,{next:i(1,n)}),a(t,e+" Iterator")}},function(t,e,n){var r=n(23),i=n(35),a=n(45),o=n(42)("IE_PROTO"),s=function(){},u="prototype",c=function(){var t,e=n(28)("iframe"),r=a.length,i="<",o=">";for(e.style.display="none",n(46).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(i+"script"+o+"document.F=Object"+i+"/script"+o),t.close(),c=t.F;r--;)delete c[u][a[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(s[u]=r(t),n=new s,s[u]=null,n[o]=t):n=c(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(22),i=n(23),a=n(36);t.exports=n(26)?Object.defineProperties:function(t,e){i(t);for(var n,o=a(e),s=o.length,u=0;s>u;)r.f(t,n=o[u++],e[n]);return t}},function(t,e,n){var r=n(37),i=n(45);t.exports=Object.keys||function(t){return r(t,i);
}},function(t,e,n){var r=n(32),i=n(10),a=n(38)(!1),o=n(42)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=o&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~a(c,n)||c.push(n));return c}},function(t,e,n){var r=n(10),i=n(39),a=n(41);t.exports=function(t){return function(e,n,o){var s,u=r(e),c=i(u.length),l=a(o,c);if(t&&n!=n){for(;c>l;)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(40),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(40),i=Math.max,a=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):a(t,e)}},function(t,e,n){var r=n(43)("keys"),i=n(44);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(17),i="__core-js_shared__",a=r[i]||(r[i]={});t.exports=function(t){return a[t]||(a[t]={})}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){t.exports=n(17).document&&document.documentElement},function(t,e,n){var r=n(22).f,i=n(32),a=n(48)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,a)&&r(t,a,{configurable:!0,value:e})}},function(t,e,n){var r=n(43)("wks"),i=n(44),a=n(17).Symbol,o="function"==typeof a,s=t.exports=function(t){return r[t]||(r[t]=o&&a[t]||(o?a:i)("Symbol."+t))};s.store=r},function(t,e,n){var r=n(32),i=n(50),a=n(42)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,n){var r=n(13);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";var r=n(52)(!0);n(14)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(40),i=n(13);t.exports=function(t){return function(e,n){var a,o,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(a=s.charCodeAt(u),a<55296||a>56319||u+1===c||(o=s.charCodeAt(u+1))<56320||o>57343?t?s.charAt(u):a:t?s.slice(u,u+2):(a-55296<<10)+(o-56320)+65536)}}},function(t,e,n){var r=n(54),i=n(48)("iterator"),a=n(9);t.exports=n(18).isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||a.hasOwnProperty(r(e))}},function(t,e,n){var r=n(12),i=n(48)("toStringTag"),a="Arguments"==r(function(){return arguments}()),o=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=o(e=Object(t),i))?n:a?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){t.exports={default:n(56),__esModule:!0}},function(t,e,n){n(5),n(51),t.exports=n(57)},function(t,e,n){var r=n(23),i=n(58);t.exports=n(18).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){var r=n(54),i=n(48)("iterator"),a=n(9);t.exports=n(18).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||a[r(t)]}},function(t,e,n){t.exports={default:n(60),__esModule:!0}},function(t,e,n){n(61);var r=n(18).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(16);r(r.S+r.F*!n(26),"Object",{defineProperty:n(22).f})},function(t,e,n){t.exports={default:n(63),__esModule:!0}},function(t,e,n){n(64),t.exports=n(18).Object.seal},function(t,e,n){var r=n(24),i=n(65).onFreeze;n(66)("seal",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(44)("meta"),i=n(24),a=n(32),o=n(22).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(27)(function(){return u(Object.preventExtensions({}))}),l=function(t){o(t,r,{value:{i:"O"+ ++s,w:{}}})},p=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},h=function(t,e){if(!a(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},f=function(t){return c&&d.NEED&&u(t)&&!a(t,r)&&l(t),t},d=t.exports={KEY:r,NEED:!1,fastKey:p,getWeak:h,onFreeze:f}},function(t,e,n){var r=n(16),i=n(18),a=n(27);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],o={};o[t]=e(n),r(r.S+r.F*a(function(){n(1)}),"Object",o)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(){return!0}function a(){return!1}function o(t){return 1===t.nodeType||9===t.nodeType}function s(t){var e=!!t&&"length"in t&&t.length,n="undefined"==typeof t?"undefined":(0,w.default)(t);return"function"!==n&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function u(t){return"function"==typeof t}function c(t,e){var n=void 0;if(s(t)){n=t.length;for(var r=0;r<n&&e.call(t[r],r,t[r])!==!1;r++);}else for(var i in t)if(t.hasOwnProperty(i)&&e.call(t[i],i,t[i])===!1)break;return t}function l(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function p(t){return t.setAttribute&&t.classList&&t.hasAttribute}function h(t,e){var n=v();if(e=e.replace(" ",""),!e){for(var r=0;r<t.length;r++)n.push(t[r]);return n}for(var i=e.split(",").map(function(t){for(var e={tag:"",id:"",class:[]},n=(t||"").match(C)||[""],r=0;r<n.length;r++){var i=t.indexOf(n[r]);i?"#"===t[i-1]?e.id=n[r]:"."===t[i-1]&&e.class.push(n[r]):e.tag=n[r].toLowerCase()}return e}),a=function(e){for(var r=[],a=i[e].id,o=i[e].tag,s=i[e].class,u=0;u<t.length;u++)(!a&&!o||!a&&o&&t[u].tagName.toLowerCase()===o||!o&&a&&t[u].getAttribute("id")===a||a&&o&&t[u].getAttribute("id")===a&&t[u].tagName.toLowerCase()===o)&&r.push(t[u]);s.length&&(r=r.filter(function(t){return s.every(function(e){return v(t).hasClass(e)})}));for(var c=0;c<r.length;c++)n.push(r[c])},o=0;o<i.length;o++)a(o);return n}function f(t,e){t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===x&&t.returnValue===!1?i:a,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&this.extend(e),this.timeStamp=t&&t.timeStamp||Date.now()}function d(){this.expando=N}function v(t,e,n){return new v.fn.init(t,e,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.$=void 0;var y=n(59),g=r(y),m=n(68),w=r(m),b=window,x=void 0,T="object",M="string",_="function",k="number",S=b.document,P=/\S+/g,O=/^key/,C=/[^.# ]+/g,A=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,N="event"+(1+Math.random()).toFixed(10).toString().replace(/\D/g,"");f.prototype={constructor:f,isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=i,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=i,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=i,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},c({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,deltaY:!0,which:function(t){var e=t.button;return null==t.which&&O.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&A.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},function(t,e){(0,g.default)(f.prototype,t,{enumerable:!0,configurable:!0,get:u(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){(0,g.default)(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})}),d.prototype={cache:function(t){var e=t[this.expando];return e||(e={},o(t)&&(t[this.expando]=e)),e},get:function(t,e){return e===x?this.cache(t):t[this.expando]&&t[this.expando][e]},remove:function(t,e){var n=t[this.expando];if(n!==x){e=(e||"").match(P)||[""];for(var r=0;r<e.length;r++)delete n[e[r]];(e===x||l(n))&&(t.nodeType?t[this.expando]=x:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return e!==x&&!l(e)}};var V={global:new d,add:function(t,e,n,r,i){var a=void 0,o=void 0,s=void 0,u=void 0,c=void 0,l=void 0,p=V.global.get(t);if(p){(o=p.events)||(o=p.events={}),(a=p.handle)||(a=p.handle=function(e){return V.dispatch.apply(t,arguments)}),e=(e||"").match(P)||[""];for(var h=0;h<e.length;h++)c=e[h],c&&(l=V.special[c]&&V.special[c].bindType||c,s={type:l,origType:c,data:r,handler:n,selector:i,matches:v(i,v(t))},(u=o[l])||(u=o[l]=[],t.addEventListener&&t.addEventListener(l,a)),o[l].some(function(t,e,n){return i===t.selector&&(n[e]=s)})||u.push(s))}},dispatch:function(t){var e=V.fix(t),n=void 0,r=new Array(arguments.length),i=(V.global.get(this,"events")||{})[t.type]||[];r[0]=e;for(var a=1;a<arguments.length;a++)r[a]=arguments[a];e.delegateTarget=this,n=V.handlers.call(this,e,i);for(var o=0;o<n.length;o++)if(!e.isPropagationStopped()){var s=n[o],u=void 0,c=s.handlers.handler;if(e.currentTarget=s.elem,e.handleObj=s,e.data=s.handlers.data,e.type=s.handlers.origType,V.special[e.type]&&V.special[e.type].noBubble){var l=e.relatedTarget;l&&(l===s.elem||s.elem.contains(l))||(e.type=s.origType,u=c.apply(s.elem,r))}else u=c.apply(s.elem,r);e.type=s.type,void 0!==u&&(e.result=u)===!1&&(e.preventDefault(),e.stopPropagation())}return e.result},handlers:function(t,e){var n=void 0,r=[],i=e.length,a=t.target;if(i&&t.target.nodeType&&a!==this)for(;a!==this;a=a.parentNode||this)if(1===a.nodeType)for(n=0;n<i;n++){var o=e[n],s=o.selector,u=o.matches;if(s&&s.length){if(u.hasElem(a)){r.push({elem:a,handlers:o});break}if(u=v(s,v(this)),u.hasElem(a)){r.push({elem:a,handlers:o});break}}}for(n=0;n<i;n++){var c=e[n];if(!c.selector){r.push({elem:a,handlers:c});break}}return r},fix:function(t){return t instanceof f?t:t instanceof Event?new f(t):new f(t.type,t)},remove:function(t,e,n,r){var i=V.global.hasData(t)&&V.global.get(t),a=i.events;if(i&&a){if(e=(e||"").match(P)||[""],!e[0]){e.length=0;for(var o in a)a.hasOwnProperty(o)&&e.push(o)}for(var s=0;s<e.length;s++){var u=e[s],c=a[u]||[],p=[];if("**"===r||r===x&&n===x)p.push(u);else{for(var h=0;h<c.length;h++){var f=c[h];if(r!==x&&n===x&&r===f.selector||r===x&&n!==x&&n===f.handler||r===f.selector&&n===f.handler){c.splice(h,1);break}}c.length||p.push(u)}for(var d=0;d<p.length;d++)t.removeEventListener(u,i.handle),delete a[u]}l(a)&&V.global.remove(t,"handle events")}},trigger:function(t,e,n){if(3!==t.nodeType&&8!==t.nodeType){var r=e.type,i=r.indexOf(":")<0&&"on"+r,a=[t||document],s=V.special[r]||{},u=s&&s.delegateType||r;if(e=V.fix(e),e.result=x,e.type=u,e.target=e.target||t,!s.noBubble){for(var c=void 0,l=t.parentNode;l;l=l.parentNode)a.push(l),c=l;c===(t.ownerDocument||document)&&a.push(c.defaultView||c.parentWindow||window)}for(var p=0;p<a.length&&!e.isPropagationStopped();p++){var h=a[p],f=(V.global.get(h,"events")||{})[u]&&V.global.get(h,"handle"),d=i&&h[i];f&&f.apply(h,[e],n),d&&d.apply&&o(h)&&(e.result=d.apply(h,[e],n),e.result===!1&&e.preventDefault())}return e.result}},special:{mouseenter:{delegateType:"mouseover",bindType:"mouseover",noBubble:!0},mouseleave:{delegateType:"mouseout",bindType:"mouseout",noBubble:!0}}};v.fn=v.prototype={constructor:v,length:0,push:function(t){this[this.length]=t,this.length++},pop:function(){var t=this[this.length-1];return delete this[this.length-1],this.length--,v(t)},each:function(t){for(var e=0;e<this.length;e++)t(this[e],e)},map:function(t){for(var e=[],n=0;n<this.length;n++)e.push(t(this[n],n));return e},init:function(t,e,n){var r=this;if(t instanceof v.fn.init)return t;if(("undefined"==typeof t?"undefined":(0,w.default)(t))===M&&"<"===t[0]&&">"===t[t.length-1]){if(("undefined"==typeof e?"undefined":(0,w.default)(e))===M&&n===x)n=e,e={};else if(("undefined"==typeof e?"undefined":(0,w.default)(e))===M&&("undefined"==typeof n?"undefined":(0,w.default)(n))===T){var i=n;n=e,e=i}return t=t.substring(1,t.length-1),n?this.push(S.createElementNS(n,t)):this.push(S.createElement(t)),this.attr(e),this}var a=e?v(e):E;if(!t)return this;if(("undefined"==typeof t?"undefined":(0,w.default)(t))===M)a.each(function(e){for(var n=e.querySelectorAll(t),i=0;i<n.length;i++)r.push(n[i])});else if(t.nodeType||t===b)return this[0]=t,this.length=1,this},css:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return this;if(("undefined"==typeof t?"undefined":(0,w.default)(t))===T)if(r)!function(){var e="";for(var r in t)t.hasOwnProperty(r)&&(e+=r+"="+t[r]+";");n.each(function(t){return t.style=e})}();else{var i=function(e){t.hasOwnProperty(e)&&n.each(function(n){return n.style[e]=t[e]})};for(var a in t)i(a)}else(("undefined"==typeof t?"undefined":(0,w.default)(t))===M&&("undefined"==typeof e?"undefined":(0,w.default)(e))===M||("undefined"==typeof e?"undefined":(0,w.default)(e))===k)&&(r?this.each(function(n){return n.style=t+"="+e+";"}):this.each(function(n){return n.style[t]=e}));return this},attr:function(t,e){var n=this;if(t instanceof Array){for(var r=[],i=0;i<t.length;i++)r.push(this.attr(t[i]));return r}if(("undefined"==typeof t?"undefined":(0,w.default)(t))===T){var a=function(e){t.hasOwnProperty(e)&&n.each(function(n){return n.setAttribute(e,t[e])})};for(var o in t)a(o)}else if(("undefined"==typeof t?"undefined":(0,w.default)(t))===M&&e!==x)this.each(function(n){return n.setAttribute(t,e.toString())});else if(("undefined"==typeof t?"undefined":(0,w.default)(t))===M&&e===x)return this[0].getAttribute(t);return this},prop:function(t,e){var n=this;if(("undefined"==typeof t?"undefined":(0,w.default)(t))===T){var r=function(e){t.hasOwnProperty(e)&&n.each(function(n){return n[e]=t[e]})};for(var i in t)r(i);return this}if(("undefined"==typeof t?"undefined":(0,w.default)(t))===M&&e!==x)this.each(function(n){return n[t]=e});else if(("undefined"==typeof t?"undefined":(0,w.default)(t))===M&&e===x)return this[0][t];return this},removeAttr:function(t){("undefined"==typeof t?"undefined":(0,w.default)(t))===M&&this.each(function(e){return e.removeAttribute(t)})},removeProp:function(t){("undefined"==typeof t?"undefined":(0,w.default)(t))===M&&this.each(function(e){return delete e[t]})},addClass:function(t){t=(t||"").match(P)||[""],this.each(function(e){for(var n=0;n<t.length;n++)e.classList.add(t[n])})},removeClass:function(t){t=(t||"").match(P)||[""],this.each(function(e){for(var n=0;n<t.length;n++)e.classList.remove(t[n])})},hasClass:function(t){return this[0].classList.contains(t)},hasElem:function(t){for(var e=!1,n=0;n<this.length;n++)if(e|=this[n]===t)return e;return!1},on:function(t,e,n,r){var i={};return"object"===("undefined"==typeof t?"undefined":(0,w.default)(t))?i=t:null==n&&null==r?(i[t]=e,n=e=x):null==r&&(("undefined"==typeof e?"undefined":(0,w.default)(e))===M?(i[t]=n,n=x):(i[t]=n,n=e,e=x)),this.each(function(t){for(var r in i)i.hasOwnProperty(r)&&V.add(t,r,i[r],n,e)})},off:function(t,e,n){var r={};if(("undefined"==typeof t?"undefined":(0,w.default)(t))===T)r=t;else if(("undefined"==typeof e?"undefined":(0,w.default)(e))===_)r[t]=e,e=void 0;else if(("undefined"==typeof e?"undefined":(0,w.default)(e))===M&&n===x)r[t]=x;else if(("undefined"==typeof e?"undefined":(0,w.default)(e))===M&&("undefined"==typeof n?"undefined":(0,w.default)(n))===_)r[t]=n;else if(("undefined"==typeof t?"undefined":(0,w.default)(t))===M&&e===x&&n===x)r[t]=x;else if(t===x)return this.each(function(t){return V.remove(t,"",x,e)});return this.each(function(t){for(var n in r)r.hasOwnProperty(n)&&V.remove(t,n,r[n],e)})},append:function(t){var e=this;return p(t)?this[0].appendChild(t):t instanceof v.fn.init&&t.each(function(t){return e[0].appendChild(t)}),v(t)},preappend:function(t,e){var n=this,r=e?e:this[0].childNodes[0],i=r instanceof v.fn.init?r[0]:r;p(t)?this[0].insertBefore(t,i):t instanceof v.fn.init&&t.each(function(t){return n[0].insertBefore(t,i)})},appendTo:function(t){p(t)?this.each(function(e){return t.appendChild(e)}):t instanceof v.fn.init&&this.each(function(e){return t[0].appendChild(e)})},preappendTo:function(t){var e=this;p(t)?!function(){var n=t.childNodes[0];e.each(function(e){return t.insertBefore(e,n)})}():t instanceof v.fn.init&&!function(){var n=t[0].childNodes[0];e.each(function(e){return t[0].insertBefore(e,n)})}()},text:function(t){return t===x?this[0].textContent:("undefined"==typeof t?"undefined":(0,w.default)(t))===M?(this.each(function(e){return e.textContent=t}),this):void 0},width:function(){var t=void 0;if(this[0].getClientRects){var e=this[0].getClientRects()[0];t=e?e.width:0}return Math.max(t||0,this[0].clientWidth||0,this[0].offsetWidth||0,this[0].innerWidth||0)},height:function(){var t=void 0;if(this[0].getClientRects){var e=this[0].getClientRects()[0];t=e?e.height:0}return Math.max(t||0,this[0].clientHeight||0,this[0].offsetHeight||0,this[0].innerHeight||0)},innerWidth:function(){return this[0].clientWidth},innerHeight:function(){return this[0].clientHeight},remove:function(t){if(t===x)this.each(function(t){return t.parentNode&&t.parentNode.removeChild(t)});else{var e=t>=0?t:this.length+t;if(t>=0||t<this.length){this[e].parentNode.removeChild(this[e]),delete this[e];for(var n=e;n<this.length-1;n++)this[n+1]=this[n];delete this[this.length-1],this.length--}}},childrens:function(t){var e=this;if(("undefined"==typeof t?"undefined":(0,w.default)(t))===M){var n=function(){var n=[];return e.each(function(t){return n=n.concat(Array.prototype.slice.call(t.childNodes))}),{v:h(n,t)}}();if("object"===("undefined"==typeof n?"undefined":(0,w.default)(n)))return n.v}else if(("undefined"==typeof t?"undefined":(0,w.default)(t))===k){var r=function(){var n=v();return e.each(function(e){return n.push(e.childNodes[t])}),{v:n}}();if("object"===("undefined"==typeof r?"undefined":(0,w.default)(r)))return r.v}else if(t===x){var i=function(){var t=v();return e.each(function(e){for(var n=0;n<e.childNodes.length;n++)t.push(e.childNodes[n])}),{v:t}}();if("object"===("undefined"==typeof i?"undefined":(0,w.default)(i)))return i.v}},childSelect:function(t,e,n){var r=v(t,this),i="<"+t.split(/[.#]/)[0]+">";for(n=n||{},n.class=t.split(".").splice(1).join(" ");r.length>e;)r.pop().remove();for(;r.length<e;)r.push(this.append(v(i,n))[0]);return r},get:function(t){var e=t>=0?t:this.length+t;return(t>=0||t<this.length)&&v(this[e])},offset:function(t){if(!t[0].contains(this[0]))throw"current必须是this的祖先元素";for(var e=this[0],n=0,r=0;e!==t[0];)if(n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent,e!==t[0]&&e.contains(t[0]))throw"current不是定位元素";return[n,r]},trigger:function(t,e){return t=("undefined"==typeof t?"undefined":(0,w.default)(t))===M?{type:t}:t,this.each(function(n){V.trigger(n,t,e)}),this},contains:function(t){var e=t instanceof v?t[0]:t;return this[0].contains(e)}},v.prototype.init.prototype=v.prototype;var E=v(S);e.$=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(69),a=r(i),o=n(72),s=r(o),u="function"==typeof s.default&&"symbol"==typeof a.default?function(t){return typeof t}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default?"symbol":typeof t};e.default="function"==typeof s.default&&"symbol"===u(a.default)?function(t){return"undefined"==typeof t?"undefined":u(t)}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default?"symbol":"undefined"==typeof t?"undefined":u(t)}},function(t,e,n){t.exports={default:n(70),__esModule:!0}},function(t,e,n){n(51),n(5),t.exports=n(71).f("iterator")},function(t,e,n){e.f=n(48)},function(t,e,n){t.exports={default:n(73),__esModule:!0}},function(t,e,n){n(74),n(84),n(85),n(86),t.exports=n(18).Symbol},function(t,e,n){"use strict";var r=n(17),i=n(32),a=n(26),o=n(16),s=n(31),u=n(65).KEY,c=n(27),l=n(43),p=n(47),h=n(44),f=n(48),d=n(71),v=n(75),y=n(76),g=n(77),m=n(80),w=n(23),b=n(10),x=n(29),T=n(30),M=n(34),_=n(81),k=n(83),S=n(22),P=n(36),O=k.f,C=S.f,A=_.f,N=r.Symbol,V=r.JSON,E=V&&V.stringify,$="prototype",L=f("_hidden"),D=f("toPrimitive"),q={}.propertyIsEnumerable,j=l("symbol-registry"),R=l("symbols"),B=l("op-symbols"),I=Object[$],G="function"==typeof N,F=r.QObject,W=!F||!F[$]||!F[$].findChild,z=a&&c(function(){return 7!=M(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=O(I,e);r&&delete I[e],C(t,e,n),r&&t!==I&&C(I,e,r)}:C,H=function(t){var e=R[t]=M(N[$]);return e._k=t,e},U=G&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,e,n){return t===I&&Y(B,e,n),w(t),e=x(e,!0),w(n),i(R,e)?(n.enumerable?(i(t,L)&&t[L][e]&&(t[L][e]=!1),n=M(n,{enumerable:T(0,!1)})):(i(t,L)||C(t,L,T(1,{})),t[L][e]=!0),z(t,e,n)):C(t,e,n)},X=function(t,e){w(t);for(var n,r=g(e=b(e)),i=0,a=r.length;a>i;)Y(t,n=r[i++],e[n]);return t},K=function(t,e){return void 0===e?M(t):X(M(t),e)},Q=function(t){var e=q.call(this,t=x(t,!0));return!(this===I&&i(R,t)&&!i(B,t))&&(!(e||!i(this,t)||!i(R,t)||i(this,L)&&this[L][t])||e)},J=function(t,e){if(t=b(t),e=x(e,!0),t!==I||!i(R,e)||i(B,e)){var n=O(t,e);return!n||!i(R,e)||i(t,L)&&t[L][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=A(b(t)),r=[],a=0;n.length>a;)i(R,e=n[a++])||e==L||e==u||r.push(e);return r},tt=function(t){for(var e,n=t===I,r=A(n?B:b(t)),a=[],o=0;r.length>o;)!i(R,e=r[o++])||n&&!i(I,e)||a.push(R[e]);return a};G||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===I&&e.call(B,n),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),z(this,t,T(1,n))};return a&&W&&z(I,t,{configurable:!0,set:e}),H(t)},s(N[$],"toString",function(){return this._k}),k.f=J,S.f=Y,n(82).f=_.f=Z,n(79).f=Q,n(78).f=tt,a&&!n(15)&&s(I,"propertyIsEnumerable",Q,!0),d.f=function(t){return H(f(t))}),o(o.G+o.W+o.F*!G,{Symbol:N});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)f(et[nt++]);for(var et=P(f.store),nt=0;et.length>nt;)v(et[nt++]);o(o.S+o.F*!G,"Symbol",{for:function(t){return i(j,t+="")?j[t]:j[t]=N(t)},keyFor:function(t){if(U(t))return y(j,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),o(o.S+o.F*!G,"Object",{create:K,defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),V&&o(o.S+o.F*(!G||c(function(){var t=N();return"[null]"!=E([t])||"{}"!=E({a:t})||"{}"!=E(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!U(t)){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return e=r[1],"function"==typeof e&&(n=e),!n&&m(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!U(e))return e}),r[1]=e,E.apply(V,r)}}}),N[$][D]||n(21)(N[$],D,N[$].valueOf),p(N,"Symbol"),p(Math,"Math",!0),p(r.JSON,"JSON",!0)},function(t,e,n){var r=n(17),i=n(18),a=n(15),o=n(71),s=n(22).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=a?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},function(t,e,n){var r=n(36),i=n(10);t.exports=function(t,e){for(var n,a=i(t),o=r(a),s=o.length,u=0;s>u;)if(a[n=o[u++]]===e)return n}},function(t,e,n){var r=n(36),i=n(78),a=n(79);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var o,s=n(t),u=a.f,c=0;s.length>c;)u.call(t,o=s[c++])&&e.push(o);return e}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(12);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(10),i=n(82).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(t){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?s(t):i(r(t))}},function(t,e,n){var r=n(37),i=n(45).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(79),i=n(30),a=n(10),o=n(29),s=n(32),u=n(25),c=Object.getOwnPropertyDescriptor;e.f=n(26)?c:function(t,e){if(t=a(t),e=o(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e){},function(t,e,n){n(75)("asyncIterator")},function(t,e,n){n(75)("observable")},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.SVG_NS=e.iniData=void 0;var i=n(88),a=r(i),o=n(91),s=r(o),u=n(62),c=r(u),l=n(59),p=r(l),h=n(94),f=r(h),d=n(68),v=r(d),y=n(97),g=r(y),m=n(100),w=r(m),b=n(104),x=r(b),T=n(67),M={Series:[{partType:"resistance",id:"R_1",position:[700,160],rotate:[[0,1],[-1,0]],text:[16,-2],input:["1k"]},{partType:"resistance",id:"R_2",position:[700,320],rotate:[[0,1],[-1,0]],text:[16,-2],input:["1k"]},{partType:"reference_ground",id:"GND_1",position:[500,420],rotate:[[1,0],[0,1]]},{partType:"voltage_meter",id:"V_R1",position:[780,160],rotate:[[1,0],[0,1]],text:[24,6]},{partType:"dc_current_source",id:"V_1",position:[500,180],rotate:[[1,0],[0,1]],text:[20,-2],input:["10m"]},{partType:"dc_voltage_source",id:"V_2",position:[500,300],rotate:[[1,0],[0,1]],text:[20,-2],input:["12"]},{partType:"current_meter",id:"I_in",position:[600,100],rotate:[[1,0],[0,1]],text:[-9.5,-11]},{partType:"line",way:[[700,120],[700,100]]},{partType:"line",way:[[780,200],[780,220],[700,220]]},{partType:"line",way:[[700,200],[700,220]]},{partType:"line",way:[[700,220],[700,280]]},{partType:"line",way:[[500,400],[500,380]]},{partType:"line",way:[[500,140],[500,100],[580,100]]},{partType:"line",way:[[620,100],[700,100]]},{partType:"line",way:[[700,100],[780,100],[780,120]]},{partType:"line",way:[[500,340],[500,380]]},{partType:"line",way:[[500,380],[700,380],[700,360]]},{partType:"line",way:[[500,260],[500,220]]}],Bridge:[{partType:"resistance",id:"R_1",input:["10k"],position:[460,180],rotate:[[0,1],[-1,0]]},{partType:"resistance",id:"R_2",input:["5k"],position:[460,380],rotate:[[0,1],[-1,0]]},{partType:"resistance",id:"R_3",input:["1k"],position:[560,280],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_4",input:["5k"],position:[660,180],rotate:[[0,1],[-1,0]]},{partType:"resistance",id:"R_5",input:["10k"],position:[660,380],rotate:[[0,1],[-1,0]]},{partType:"ac_voltage_source",id:"V_1",input:["50","50","0","0"],position:[340,280],rotate:[[1,0],[0,1]]},{partType:"voltage_meter",id:"V_R4",position:[760,180],rotate:[[1,0],[0,1]]},{partType:"current_meter",id:"I_R4",position:[560,100],rotate:[[1,0],[0,1]]},{partType:"reference_ground",id:"GND_1",position:[340,500],rotate:[[1,0],[0,1]]},{partType:"line",way:[[340,240],[340,100],[460,100]]},{partType:"line",way:[[660,140],[660,100]]},{partType:"line",way:[[460,100],[460,140]]},{partType:"line",way:[[340,320],[340,460]]},{partType:"line",way:[[660,420],[660,460],[460,460]]},{partType:"line",way:[[460,460],[460,420]]},{partType:"line",way:[[460,220],[460,280]]},{partType:"line",way:[[660,220],[660,280]]},{partType:"line",way:[[520,280],[460,280]]},{partType:"line",way:[[460,280],[460,340]]},{partType:"line",way:[[600,280],[660,280]]},{partType:"line",way:[[660,280],[660,340]]},{partType:"line",way:[[460,100],[540,100]]},{partType:"line",way:[[760,220],[760,280],[660,280]]},{partType:"line",way:[[340,480],[340,460]]},{partType:"line",way:[[340,460],[460,460]]},{partType:"line",way:[[580,100],[660,100]]},{partType:"line",way:[[660,100],[760,100],[760,140]]}],FirstOrderCircuitDC:[{partType:"dc_voltage_source",id:"V_1",position:[180,280],rotate:[[1,0],[0,1]],input:["10"]},{partType:"resistance",id:"R_1",position:[340,200],rotate:[[1,0],[0,1]],input:["1k"]},{partType:"capacitor",id:"C_1",position:[420,280],rotate:[[0,1],[-1,0]],input:["1u"]},{partType:"reference_ground",id:"GND_1",position:[340,400],rotate:[[1,0],[0,1]]},{partType:"line",way:[[380,200],[420,200]]},{partType:"line",way:[[180,240],[180,200],[260,200]]},{partType:"line",way:[[180,320],[180,360],[260,360]]},{partType:"line",way:[[340,380],[340,360]]},{partType:"line",way:[[340,360],[420,360]]},{partType:"line",way:[[520,240],[520,200],[420,200]]},{partType:"line",way:[[420,240],[420,200]]},{partType:"line",way:[[520,320],[520,360],[420,360]]},{partType:"line",way:[[420,320],[420,360]]},{partType:"line",way:[[260,240],[260,200]]},{partType:"line",way:[[260,200],[300,200]]},{partType:"line",way:[[260,320],[260,360]]},{partType:"line",way:[[260,360],[340,360]]},{partType:"voltage_meter",id:"V_in",position:[260,280],rotate:[[1,0],[0,1]]},{partType:"voltage_meter",id:"V_C1",position:[520,280],rotate:[[1,0],[0,1]]}],FirstOrderCircuitAC:[{partType:"resistance",id:"R_1",position:[340,200],rotate:[[1,0],[0,1]],input:["200"]},{partType:"capacitor",id:"C_1",position:[420,280],rotate:[[0,1],[-1,0]],input:["10u"]},{partType:"reference_ground",id:"GND_1",position:[340,400],rotate:[[1,0],[0,1]]},{partType:"voltage_meter",id:"V_in",position:[260,280],rotate:[[1,0],[0,1]]},{partType:"voltage_meter",id:"V_C1",position:[520,280],rotate:[[1,0],[0,1]]},{partType:"line",way:[[380,200],[420,200]]},{partType:"line",way:[[340,380],[340,360]]},{partType:"line",way:[[340,360],[420,360]]},{partType:"line",way:[[520,240],[520,200],[420,200]]},{partType:"line",way:[[420,240],[420,200]]},{partType:"line",way:[[520,320],[520,360],[420,360]]},{partType:"line",way:[[420,320],[420,360]]},{partType:"line",way:[[260,240],[260,200]]},{partType:"line",way:[[260,320],[260,360]]},{partType:"ac_voltage_source",id:"V_1",position:[160,280],rotate:[[1,0],[0,1]],input:["20","100","0","0"]},{partType:"line",way:[[160,240],[160,200],[260,200]]},{partType:"line",way:[[260,200],[300,200]]},{partType:"line",way:[[160,320],[160,360],[260,360]]},{partType:"line",way:[[260,360],[340,360]]}],BridgeRectifier:[{partType:"diode",id:"VD_1",position:[300,200],rotate:[[1,0],[0,1]],text:[18,6],input:["1","0.5","0.2G"]},{partType:"diode",id:"VD_2",position:[380,200],rotate:[[1,0],[0,1]],text:[18,6],input:["1","0.5","0.2G"]},{partType:"diode",id:"VD_3",position:[300,440],rotate:[[1,0],[0,1]],text:[18,6],input:["1","0.5","0.2G"]},{partType:"diode",id:"VD_4",position:[380,440],rotate:[[1,0],[0,1]],text:[18,6],input:["1","0.5","0.2G"]},{partType:"ac_voltage_source",id:"V_1",position:[180,320],rotate:[[1,0],[0,1]],text:[-38,-10],input:["220","200","0","0"]},{partType:"capacitor",id:"C_1",position:[500,320],rotate:[[0,1],[-1,0]],text:[-36,-2],input:["100u"]},{partType:"resistance",id:"R_1",position:[560,320],rotate:[[0,1],[-1,0]],text:[16,-2],input:["2k"]},{partType:"current_meter",id:"I_out",position:[440,140],rotate:[[1,0],[0,1]],text:[-12,-11]},{partType:"voltage_meter",id:"V_out",position:[640,320],rotate:[[1,0],[0,1]],text:[24,6]},{partType:"voltage_meter",id:"V_in",position:[240,320],rotate:[[1,0],[0,1]],text:[24,6]},{partType:"reference_ground",id:"GND_1",position:[300,540],rotate:[[1,0],[0,1]]},{partType:"line",way:[[180,280],[180,260],[240,260]]},{partType:"line",way:[[180,360],[180,380],[240,380]]},{partType:"line",way:[[300,160],[300,140],[380,140]]},{partType:"line",way:[[640,280],[640,140],[560,140]]},{partType:"line",way:[[640,360],[640,500],[560,500]]},{partType:"line",way:[[380,240],[380,380]]},{partType:"line",way:[[380,380],[380,400]]},{partType:"line",way:[[300,400],[300,260]]},{partType:"line",way:[[300,260],[300,240]]},{partType:"line",way:[[560,280],[560,140]]},{partType:"line",way:[[380,480],[380,500]]},{partType:"line",way:[[300,480],[300,500]]},{partType:"line",way:[[380,500],[500,500]]},{partType:"line",way:[[560,360],[560,500]]},{partType:"line",way:[[500,360],[500,500]]},{partType:"line",way:[[460,140],[500,140]]},{partType:"line",way:[[500,280],[500,140]]},{partType:"line",
way:[[420,140],[380,140]]},{partType:"line",way:[[380,140],[380,160]]},{partType:"line",way:[[560,140],[500,140]]},{partType:"line",way:[[560,500],[500,500]]},{partType:"line",way:[[240,280],[240,260]]},{partType:"line",way:[[240,260],[300,260]]},{partType:"line",way:[[240,360],[240,380]]},{partType:"line",way:[[240,380],[380,380]]},{partType:"line",way:[[300,520],[300,500]]},{partType:"line",way:[[300,500],[380,500]]}],halfWaveRectifier:[{partType:"ac_voltage_source",id:"V_1",position:[180,220],rotate:[[1,0],[0,1]],text:[-38,-10],input:["20","200","0","0"]},{partType:"diode",id:"VD_1",position:[280,140],rotate:[[0,1],[-1,0]],text:[-11.5,-18],input:["1","0.5","0.2G"]},{partType:"resistance",id:"R_1",position:[460,220],rotate:[[0,1],[-1,0]],text:[-30,-2],input:["100"]},{partType:"line",way:[[180,180],[180,140],[240,140]]},{partType:"line",way:[[320,140],[380,140]]},{partType:"line",way:[[420,140],[460,140]]},{partType:"line",way:[[520,180],[520,140],[460,140]]},{partType:"line",way:[[460,140],[460,180]]},{partType:"line",way:[[180,260],[180,300],[320,300]]},{partType:"reference_ground",id:"GND_1",position:[320,340],rotate:[[1,0],[0,1]]},{partType:"line",way:[[320,320],[320,300]]},{partType:"line",way:[[320,300],[460,300]]},{partType:"line",way:[[520,260],[520,300],[460,300]]},{partType:"line",way:[[460,300],[460,260]]},{partType:"current_meter",id:"I_out",position:[400,140],rotate:[[1,0],[0,1]],text:[-12,-11]},{partType:"voltage_meter",id:"V_out",position:[520,220],rotate:[[1,0],[0,1]],text:[24,6]}],PhaseAmplifier:[{partType:"ac_voltage_source",id:"V_1",position:[260,240],rotate:[[0,1],[-1,0]],text:[-7,34],input:["10","200","0","0"]},{partType:"operational_amplifier",id:"OP_1",position:[500,220],rotate:[[1,0],[0,1]],text:[-11.5,0],input:["120","80M","40"]},{partType:"resistance",id:"R_1",position:[380,240],rotate:[[1,0],[0,1]],text:[-7,26],input:["10k"]},{partType:"reference_ground",id:"GND_1",position:[160,240],rotate:[[0,1],[-1,0]]},{partType:"voltage_meter",id:"V_in",position:[320,320],rotate:[[1,0],[0,1]],text:[24,6]},{partType:"reference_ground",id:"GND_2",position:[320,420],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_2",position:[500,140],rotate:[[1,0],[0,1]],text:[-7,-32],input:["10k"]},{partType:"resistance",id:"R_3",position:[380,200],rotate:[[1,0],[0,1]],text:[-7,-32],input:["10k"]},{partType:"reference_ground",id:"GND_3",position:[300,200],rotate:[[0,1],[-1,0]]},{partType:"resistance",id:"R_4",position:[560,320],rotate:[[0,1],[-1,0]],text:[-30,-2],input:["10k"]},{partType:"voltage_meter",id:"V_out",position:[620,320],rotate:[[1,0],[0,1]],text:[24,6]},{partType:"line",way:[[180,240],[220,240]]},{partType:"line",way:[[340,240],[320,240]]},{partType:"line",way:[[460,240],[420,240]]},{partType:"line",way:[[320,280],[320,240]]},{partType:"line",way:[[320,240],[300,240]]},{partType:"line",way:[[320,400],[320,380]]},{partType:"line",way:[[340,200],[320,200]]},{partType:"line",way:[[460,200],[440,200]]},{partType:"line",way:[[460,140],[440,140],[440,200]]},{partType:"line",way:[[440,200],[420,200]]},{partType:"line",way:[[540,140],[560,140],[560,220]]},{partType:"line",way:[[560,280],[560,220]]},{partType:"line",way:[[560,220],[540,220]]},{partType:"line",way:[[560,360],[560,380]]},{partType:"line",way:[[320,380],[320,360]]},{partType:"line",way:[[620,280],[620,220],[560,220]]},{partType:"line",way:[[620,360],[620,380],[560,380]]},{partType:"line",way:[[560,380],[320,380]]}],currentAmplifier:[{partType:"dc_voltage_source",id:"V_1",position:[180,280],rotate:[[0,1],[-1,0]],text:[-7,-36],input:["10"]},{partType:"resistance",id:"R_1",position:[300,280],rotate:[[1,0],[0,1]],text:[-7,-32],input:["10k"]},{partType:"transistor_npn",id:"Q_1",position:[480,280],rotate:[[1,0],[0,1]],text:[25,6],input:["40","26","0.6","1"]},{partType:"reference_ground",id:"GND_1",position:[100,280],rotate:[[0,1],[-1,0]]},{partType:"resistance",id:"R_2",position:[500,400],rotate:[[0,1],[-1,0]],text:[16,-2],input:["100"]},{partType:"line",way:[[120,280],[140,280]]},{partType:"line",way:[[220,280],[240,280]]},{partType:"line",way:[[500,360],[500,320]]},{partType:"line",way:[[420,280],[460,280]]},{partType:"line",way:[[380,280],[340,280]]},{partType:"current_meter",id:"I_in",position:[400,280],rotate:[[1,0],[0,1]],text:[-9.5,-11]},{partType:"current_meter",id:"I_ap",position:[340,200],rotate:[[1,0],[0,1]],text:[-9.5,-11]},{partType:"line",way:[[360,200],[500,200],[500,240]]},{partType:"line",way:[[320,200],[240,200],[240,280]]},{partType:"line",way:[[240,280],[260,280]]},{partType:"reference_ground",id:"GND_2",position:[500,480],rotate:[[1,0],[0,1]]},{partType:"line",way:[[500,440],[500,460]]}],CommonEmitterAmplifier:[{partType:"config",endtime:"50m",stepsize:"10u"},{partType:"dc_voltage_source",id:"V_1",position:[220,100],rotate:[[0,1],[-1,0]],text:[-7,-36],input:["20"]},{partType:"reference_ground",id:"GND_1",position:[140,100],rotate:[[0,1],[-1,0]]},{partType:"resistance",id:"R_1",position:[300,180],rotate:[[0,1],[-1,0]],text:[16,-2],input:["100k"]},{partType:"resistance",id:"R_2",position:[300,380],rotate:[[0,1],[-1,0]],text:[16,-2],input:["100k"]},{partType:"resistance",id:"R_3",position:[400,160],rotate:[[0,1],[-1,0]],text:[16,-2],input:["10k"]},{partType:"resistance",id:"R_4",position:[400,400],rotate:[[0,1],[-1,0]],text:[16,-2],input:["2k"]},{partType:"transistor_npn",id:"Q_1",position:[380,280],rotate:[[1,0],[0,1]],text:[25,6],input:["40","26","0.6","1"]},{partType:"resistance",id:"R_5",position:[600,340],rotate:[[0,1],[-1,0]],text:[-30,-2],input:["1M"]},{partType:"capacitor",id:"C_1",position:[500,220],rotate:[[1,0],[0,1]],text:[-7,32],input:["10n"]},{partType:"capacitor",id:"C_2",position:[240,280],rotate:[[1,0],[0,1]],text:[-7,-38],input:["10μ"]},{partType:"ac_voltage_source",id:"V_2",position:[120,360],rotate:[[1,0],[0,1]],text:[-38,-10],input:["3","300","0","0"]},{partType:"voltage_meter",id:"V_in",position:[180,360],rotate:[[1,0],[0,1]],text:[24,6]},{partType:"voltage_meter",id:"V_out",position:[660,340],rotate:[[1,0],[0,1]],text:[24,6]},{partType:"reference_ground",id:"GND_2",position:[120,500],rotate:[[1,0],[0,1]]},{partType:"line",way:[[160,100],[180,100]]},{partType:"line",way:[[260,100],[300,100]]},{partType:"line",way:[[400,120],[400,100],[300,100]]},{partType:"line",way:[[300,140],[300,100]]},{partType:"line",way:[[400,240],[400,220]]},{partType:"line",way:[[400,320],[400,360]]},{partType:"line",way:[[300,220],[300,280]]},{partType:"line",way:[[300,340],[300,280]]},{partType:"line",way:[[300,280],[360,280]]},{partType:"line",way:[[540,220],[600,220]]},{partType:"line",way:[[660,300],[660,220],[600,220]]},{partType:"line",way:[[600,220],[600,300]]},{partType:"line",way:[[460,220],[400,220]]},{partType:"line",way:[[400,220],[400,200]]},{partType:"line",way:[[280,280],[300,280]]},{partType:"line",way:[[180,320],[180,280]]},{partType:"line",way:[[120,320],[120,280],[180,280]]},{partType:"line",way:[[180,280],[200,280]]},{partType:"line",way:[[120,480],[120,460]]},{partType:"line",way:[[180,400],[180,460]]},{partType:"line",way:[[120,400],[120,460]]},{partType:"line",way:[[300,420],[300,460]]},{partType:"line",way:[[180,460],[120,460]]},{partType:"line",way:[[400,440],[400,460]]},{partType:"line",way:[[300,460],[180,460]]},{partType:"line",way:[[600,380],[600,460]]},{partType:"line",way:[[400,460],[300,460]]},{partType:"line",way:[[660,380],[660,460],[600,460]]},{partType:"line",way:[[600,460],[400,460]]}],EmitterFollower:[{partType:"config",endtime:"20m",stepsize:"2u"},{partType:"dc_voltage_source",id:"V_1",position:[220,100],rotate:[[0,1],[-1,0]],text:[-7,-36],input:["20"]},{partType:"reference_ground",id:"GND_1",position:[140,100],rotate:[[0,1],[-1,0]]},{partType:"resistance",id:"R_1",position:[300,180],rotate:[[0,1],[-1,0]],text:[16,-2],input:["10k"]},{partType:"resistance",id:"R_2",position:[300,380],rotate:[[0,1],[-1,0]],text:[16,-2],input:["10k"]},{partType:"resistance",id:"R_4",position:[400,400],rotate:[[0,1],[-1,0]],text:[16,-2],input:["680"]},{partType:"transistor_npn",id:"Q_1",position:[380,280],rotate:[[1,0],[0,1]],text:[25,6],input:["40","26","0.6","1"]},{partType:"resistance",id:"R_5",position:[600,400],rotate:[[0,1],[-1,0]],text:[-30,-2],input:["100k"]},{partType:"capacitor",id:"C_1",position:[500,340],rotate:[[1,0],[0,1]],text:[-7,-38],input:["10n"]},{partType:"capacitor",id:"C_2",position:[240,280],rotate:[[1,0],[0,1]],text:[-7,-38],input:["10μ"]},{partType:"ac_voltage_source",id:"V_2",position:[120,360],rotate:[[1,0],[0,1]],text:[-38,-10],input:["3","1k","0","0"]},{partType:"voltage_meter",id:"V_in",position:[180,360],rotate:[[1,0],[0,1]],text:[24,6]},{partType:"voltage_meter",id:"V_out",position:[660,400],rotate:[[1,0],[0,1]],text:[24,6]},{partType:"reference_ground",id:"GND_2",position:[120,500],rotate:[[1,0],[0,1]]},{partType:"line",way:[[160,100],[180,100]]},{partType:"line",way:[[260,100],[300,100]]},{partType:"line",way:[[400,320],[400,340]]},{partType:"line",way:[[300,220],[300,280]]},{partType:"line",way:[[300,340],[300,280]]},{partType:"line",way:[[300,280],[360,280]]},{partType:"line",way:[[280,280],[300,280]]},{partType:"line",way:[[180,320],[180,280]]},{partType:"line",way:[[120,320],[120,280],[180,280]]},{partType:"line",way:[[180,280],[200,280]]},{partType:"line",way:[[120,480],[120,460]]},{partType:"line",way:[[180,400],[180,460]]},{partType:"line",way:[[120,400],[120,460]]},{partType:"line",way:[[300,420],[300,460]]},{partType:"line",way:[[180,460],[120,460]]},{partType:"line",way:[[400,440],[400,460]]},{partType:"line",way:[[300,460],[180,460]]},{partType:"line",way:[[600,440],[600,460]]},{partType:"line",way:[[400,460],[300,460]]},{partType:"line",way:[[660,440],[660,460],[600,460]]},{partType:"line",way:[[600,460],[400,460]]},{partType:"line",way:[[400,240],[400,100],[300,100]]},{partType:"line",way:[[300,100],[300,140]]},{partType:"line",way:[[540,340],[600,340]]},{partType:"line",way:[[660,360],[660,340],[600,340]]},{partType:"line",way:[[600,340],[600,360]]},{partType:"line",way:[[460,340],[400,340]]},{partType:"line",way:[[400,340],[400,360]]}]},_="http://www.w3.org/2000/svg";Object.prototype.extend=function(t){if(!(t instanceof Object))return this;for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);return this},Object.prototype.extend({isEqual:function(t){var e=(0,x.default)(this),n=(0,x.default)(t);if(!e.isEqual(n))return!1;for(var r=0;r<e.length;r++)if(this[e[r]]instanceof Object){if(!this[e[r]].isEqual(t[e[r]]))return!1}else if(this[e[r]]!==t[e[r]])return!1;return!0}}),Array.extend({clone:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=0;r<t.length;r++)t[r]instanceof Array?n[r]=Array.clone(t[r],e):t[r]instanceof Object?n[r]=Object.clone(t[r]):"number"==typeof t[r]?n[r]=t[r]*e:n[r]=t[r];return n}}),Array.prototype.extend({isEqual:function(t){if(!t)return!1;if(this.length!==t.length)return!1;for(var e=0;e<this.length;e++)if(this[e]instanceof Object){if(!this[e].isEqual(t[e]))return!1}else if(this[e]!==t[e])return!1;return!0},get:function(t){var e=t>=0?t:this.length+t;return(t>=0||t<this.length)&&this[e]}}),Object.extend({clone:function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(t[n]instanceof Array?e[n]=Array.clone(t[n]):t[n]instanceof Object?e[n]=Object.clone(t[n]):e[n]=t[n]);return(0,w.default)(e,(0,g.default)(t)),e},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},freezeAll:function(t){for(var e in t)t.hasOwnProperty(e)&&"object"===(0,v.default)(t[e])&&Object.freezeAll(t[e]);(0,f.default)(t)},freezeMethod:function(t){for(var e in t)t.hasOwnProperty(e)&&(0,p.default)(t,e,{configurable:!1,writable:!1,enumerable:!1})},sealAll:function(t){for(var e in t)t.hasOwnProperty(e)&&"object"===(0,v.default)(t[e])&&Object.sealAll(t[e]);(0,c.default)(t)}}),Math.extend({maxOfArray:function(t){for(var e=-(1/0),n=0;n<t.length;n++){var r=Number(t[n]);!(0,s.default)(r)&&r>e&&(e=r)}return e},minOfArray:function(t){for(var e=1/0,n=0;n<t.length;n++){var r=Number(t[n]);!(0,s.default)(r)&&r<e&&(e=r)}return e},average:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e/=t.length}}),Number.prototype.extend({toSFixed:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,e=this.valueOf();if(!e)return 0;var n=e/Math.abs(e),r=e*n,i=t-1-Math.floor((0,a.default)(r)),o=void 0;if(i>0)o=parseFloat(r.toFixed(i));else if(i<0){var s=Math.pow(10,i);o=Math.round(r/s)*s}else o=Math.round(r);return o*n},toShort:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,e=this.valueOf();if(!e)return"0";for(var n=e/Math.abs(e),r=["m","μ","n","p"],i=["k","M","G"],a=-1,o=void 0,s=1,u=e*n;u<1;)if(s*=1e3,u*=1e3,a++,u>1||3===a)return o=(n*u).toSFixed(t),{rank:s,number:o,unit:r[a],txt:o+r[a]};for(;u>1e3;)if(s*=.001,u*=.001,a++,u<1e3||2===a)return o=(n*u).toSFixed(t),{rank:s,number:o,unit:i[a],txt:o+i[a]};return{rank:1,unit:"",number:e.toSFixed(t),txt:e.toSFixed(t).toString()}},rank:function(){var t=this.valueOf();if(!t)return 0;var e=t/Math.abs(t);return Math.pow(10,Math.floor((0,a.default)(t*e)))},powRank:function(){var t=this.valueOf();if(!t)return 0;var e=t/Math.abs(t);return Math.floor((0,a.default)(t*e))+1},toUnit:function(){var t=this.valueOf();return t>0?1:t<0?-1:0}}),String.prototype.extend({toVal:function(){var t={G:1e9,M:1e6,k:1e3,m:.001,u:1e-6,n:1e-9,p:1e-12};if(this.search(/[dD][bB]$/)!==-1)return Math.pow(10,parseFloat(this)/20);if(this.search(/^update/)!==-1)return this;var e=this.replace("μ","u"),n=parseFloat(e.match(/\d+(.\d+)?/)[0]),r=e.match(/[GMkmunp]/),i=r?t[r[0]]:1;return(n*i).toSFixed()}}),Object.freezeMethod(Array),Object.freezeMethod(Object),Object.freezeMethod(Object.prototype),Object.freezeMethod(Number.prototype),Object.freezeMethod(String.prototype),window.document.oncontextmenu=function(){return!1},(0,T.$)("#action-container .fab").each(function(t){var e={run:{long:1580,transform:[86,100],d:"M1384 609l-1328 -738q-23 -13 -39.5 -3t-16.5 36v1472q0 26 16.5 36t39.5 -3l1328 -738q23 -13 23 -31t-23 -31z"},adds:{long:1408,transform:[0,0],d:"M1408 800v-192q0 -40 -28 -68t-68 -28h-416v-416q0 -40 -28 -68t-68 -28h-192q-40 0 -68 28t-28 68v416h-416q-40 0 -68 28t-28 68v192q0 40 28 68t68 28h416v416q0 40 28 68t68 28h192q40 0 68 -28t28 -68v-416h416q40 0 68 -28t28 -68z"},config:{long:1920,transform:[-30,200],d:"M896 640q0 106 -75 181t-181 75t-181 -75t-75 -181t75 -181t181 -75t181 75t75 181zM1664 128q0 52 -38 90t-90 38t-90 -38t-38 -90q0 -53 37.5 -90.5t90.5 -37.5t90.5 37.5t37.5 90.5zM1664 1152q0 52 -38 90t-90 38t-90 -38t-38 -90q0 -53 37.5 -90.5t90.5 -37.5 t90.5 37.5t37.5 90.5zM1280 731v-185q0 -10 -7 -19.5t-16 -10.5l-155 -24q-11 -35 -32 -76q34 -48 90 -115q7 -10 7 -20q0 -12 -7 -19q-23 -30 -82.5 -89.5t-78.5 -59.5q-11 0 -21 7l-115 90q-37 -19 -77 -31q-11 -108 -23 -155q-7 -24 -30 -24h-186q-11 0 -20 7.5t-10 17.5 l-23 153q-34 10 -75 31l-118 -89q-7 -7 -20 -7q-11 0 -21 8q-144 133 -144 160q0 9 7 19q10 14 41 53t47 61q-23 44 -35 82l-152 24q-10 1 -17 9.5t-7 19.5v185q0 10 7 19.5t16 10.5l155 24q11 35 32 76q-34 48 -90 115q-7 11 -7 20q0 12 7 20q22 30 82 89t79 59q11 0 21 -7 l115 -90q34 18 77 32q11 108 23 154q7 24 30 24h186q11 0 20 -7.5t10 -17.5l23 -153q34 -10 75 -31l118 89q8 7 20 7q11 0 21 -8q144 -133 144 -160q0 -9 -7 -19q-12 -16 -42 -54t-45 -60q23 -48 34 -82l152 -23q10 -2 17 -10.5t7 -19.5zM1920 198v-140q0 -16 -149 -31 q-12 -27 -30 -52q51 -113 51 -138q0 -4 -4 -7q-122 -71 -124 -71q-8 0 -46 47t-52 68q-20 -2 -30 -2t-30 2q-14 -21 -52 -68t-46 -47q-2 0 -124 71q-4 3 -4 7q0 25 51 138q-18 25 -30 52q-149 15 -149 31v140q0 16 149 31q13 29 30 52q-51 113 -51 138q0 4 4 7q4 2 35 20 t59 34t30 16q8 0 46 -46.5t52 -67.5q20 2 30 2t30 -2q51 71 92 112l6 2q4 0 124 -70q4 -3 4 -7q0 -25 -51 -138q17 -23 30 -52q149 -15 149 -31zM1920 1222v-140q0 -16 -149 -31q-12 -27 -30 -52q51 -113 51 -138q0 -4 -4 -7q-122 -71 -124 -71q-8 0 -46 47t-52 68 q-20 -2 -30 -2t-30 2q-14 -21 -52 -68t-46 -47q-2 0 -124 71q-4 3 -4 7q0 25 51 138q-18 25 -30 52q-149 15 -149 31v140q0 16 149 31q13 29 30 52q-51 113 -51 138q0 4 4 7q4 2 35 20t59 34t30 16q8 0 46 -46.5t52 -67.5q20 2 30 2t30 -2q51 71 92 112l6 2q4 0 124 -70 q4 -3 4 -7q0 -25 -51 -138q17 -23 30 -52q149 -15 149 -31z"}},n=(0,T.$)(t),r=n.attr("id").split("-")[1],i=.6,a=e[r]&&e[r].long;"text"!==r&&n.append((0,T.$)("<svg>",_,{viewBox:"0 0 "+a+" "+a})).append((0,T.$)("<g>",_,{transform:"translate("+(e[r].transform[0]+(1-i)/2*a)+","+(e[r].transform[1]+(1-i)/2*a)+") scale("+i+","+i+")"})).append((0,T.$)("<path>",_,{d:e[r].d}))}),e.iniData=M,e.SVG_NS=_},function(t,e,n){t.exports={default:n(89),__esModule:!0}},function(t,e,n){n(90),t.exports=n(18).Math.log10},function(t,e,n){var r=n(16);r(r.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,e,n){t.exports={default:n(92),__esModule:!0}},function(t,e,n){n(93),t.exports=n(18).Number.isNaN},function(t,e,n){var r=n(16);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){t.exports={default:n(95),__esModule:!0}},function(t,e,n){n(96),t.exports=n(18).Object.freeze},function(t,e,n){var r=n(24),i=n(65).onFreeze;n(66)("freeze",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){t.exports={default:n(98),__esModule:!0}},function(t,e,n){n(99),t.exports=n(18).Object.getPrototypeOf},function(t,e,n){var r=n(50),i=n(49);n(66)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){t.exports={default:n(101),__esModule:!0}},function(t,e,n){n(102),t.exports=n(18).Object.setPrototypeOf},function(t,e,n){var r=n(16);r(r.S,"Object",{setPrototypeOf:n(103).set})},function(t,e,n){var r=n(24),i=n(23),a=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(19)(Function.call,n(83).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:a}},function(t,e,n){t.exports={default:n(105),__esModule:!0}},function(t,e,n){n(106),t.exports=n(18).Object.keys},function(t,e,n){var r=n(50),i=n(36);n(66)("keys",function(){return function(t){return i(r(t))}})},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={},r={};r.extend({getValueBySmalle:function(t){return!(!n[t[0]]||!n[t[0]][t[1]])&&n[t[0]][t[1]]},getValueByOrigin:function(t){return r.getValueBySmalle([t[0]/20,t[1]/20])},setValueBySmalle:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t[0],a=t[1];n[i]||(n[i]=[]),r?n[i][a]={}:n[i][a]||(n[i][a]={}),n[i][a].extend(e)},setValueByOrigin:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r.setValueBySmalle([t[0]/20,t[1]/20],e,n)},deleteValueBySmalle:function(t){var e=r.getValueBySmalle(t);if(e&&e.connect)for(var i=0;i<e.connect.length;i++)r.deleteConnectBySmalle(e.connect[i],t);e&&delete n[t[0]][t[1]],Object.isEmpty(n[t[0]])&&delete n[t[0]]},deleteValueByOrigin:function(t){return r.deleteValueBySmalle([t[0]/20,t[1]/20])},pushConnectBySmalle:function(t,e){var n=r.getValueBySmalle(t);if(!n)return!1;n.connect||(n.connect=[]),n=n.connect;for(var i=0;i<n.length;i++)if(n[i].isEqual(e))return!1;return n.push(e),!0},pushConnectByOrigin:function(t,e){var n=[t[0]/20,t[1]/20],i=[e[0]/20,e[1]/20];return r.pushConnectBySmalle(n,i)},deleteConnectBySmalle:function(t,e){var n=r.getValueBySmalle(t);if(!n||!n.connect)return!1;for(var i=0;i<n.connect.length;i++)if(n.connect[i].isEqual(e)){n.connect.splice(i,1);break}return!0},deleteConnectByOrigin:function(t,e){var n=[t[0]/20,t[1]/20],i=[e[0]/20,e[1]/20];return r.deleteConnectBySmalle(n,i)},nodeInConnectBySmall:function(t,e){var n=r.getValueBySmalle(t);if(n&&("line"===n.form||"cross-point"===n.form))for(var i=0;i<n.connect.length;i++)if(n.connect[i].isEqual(e))return!0;return!1},nodeInConnectByOrigin:function(t,e){var n=[t[0]/20,t[1]/20],i=[e[0]/20,e[1]/20];return r.nodeInConnectBySmall(n,i)},isLine:function(t,e){var n="small"===e?r.getValueBySmalle(t):r.getValueByOrigin(t);return n&&"line"===n.form||"cross-point"===n.form||"cover-point"===n.form},isPartPoint:function(t,e){var n="small"===e?r.getValueBySmalle(t):r.getValueByOrigin(t);return n&&"part-point"===n.form},alongTheLineBySmall:function(t,e,n){if(e=e?e:[3e3,3e3],n=n?n:[e[0]-t[0],e[1]-t[1]],n[0]=n[0].toUnit(),n[1]=n[1].toUnit(),!r.isLine(t,"small")||t.isEqual(e))return t;for(var i=[t[0],t[1]],a=[i[0]+n[0],i[1]+n[1]];r.isLine(a,"small")&&!i.isEqual(e)&&r.nodeInConnectBySmall(i,a);)i=a,a=[i[0]+n[0],i[1]+n[1]];return i},alongTheLineByOrigin:function(t,e,n){var i=[t[0]/20,t[1]/20],a=[e[0]/20,e[1]/20],o=r.alongTheLineBySmall(i,a,n);return[20*o[0],20*o[1]]},nodeRound:function(t,e,n){for(var r=[],i=0;!r.length;){for(var a=0;a<=i;a++)for(var o=t[0]-20*i;o<=t[0]+20*i;o+=20){for(var s=t[1]-20*i;s<=t[1]+20*i;s+=20)Math.abs(o-t[0])+Math.abs(s-t[1])===20*(a+i)&&(n([o,s])||r.push([o,s]));if(r.length)break}i++}var u=r.map(function(e){return[e[0]-t[0],e[1]-t[1]]});return r[t.add(-1,e).similar(u).sub]},toSmallNodes:function(){var t=[];for(var e in n)if(n.hasOwnProperty(e))for(var r in n[e])n[e].hasOwnProperty(r)&&t.push([e,r]);return t},cross2line:function(t,e){var n=r.getValueByOrigin(t);if(!n||"cross-point"!==n.form)return!1;for(var i=0;i<n.connect.length;i++){var a=n.connect[i],o=r.getValueBySmalle(a);if(o.id.indexOf(e)!==-1)return[t[0]-20*a[0],t[1]-20*a[1]]}return!1}}),e.schMap=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){for(var r=-(1/0),i=void 0,a=0;a<e.length;a++)if(e[a]){var o=n(t,e[a]);o>r&&(r=o,i=a)}return void 0!==i&&{value:e[i],sub:i}}function a(t,e,n){for(var r=1/0,i=void 0,a=0;a<e.length;a++)if(e[a]){var o=n(t,e[a]);o<r&&(r=o,i=a)}return void 0!==i&&{value:e[i],sub:i}}function o(t,e){return u.prototype.product.call(t,e)}function s(t,e){return u.prototype.distance.call(t,e)}function u(t){c.isPoint(t)?(this[0]=t[0],this[1]=t[1]):c.isVector(t)&&(this[0]=t[1][0]-t[0][0],this[1]=t[1][1]-t[0][1]),this.length=2,Object.defineProperty(this,"length",{configurable:!1,enumerable:!1,writable:!1})}function c(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(u,[null].concat(e)))}Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;var l=n(100),p=r(l);u.prototype={add:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments[1],n=[],r=void 0===e?1:t,i=void 0===e?t:e;if("number"==typeof i)for(var a=0;a<this.length;a++)n[a]=this[a]+i*r;else if(i.length)for(var o=0;o<this.length;o++)"number"!=typeof i[o]?n[o]=this[o]:n[o]=this[o]+i[o]*r;else n[0]=this[0],n[1]=this[1];return new u(n)},mul:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments[1],n=[],r=void 0===e?1:t,i=void 0===e?t:e;if("number"==typeof i){i=r===-1?1/i:i;for(var a=0;a<this.length;a++)n[a]=this[a]*i}else if(i.length)for(var o=0;o<this.length;o++)if("number"!=typeof i[o])n[o]=this[o];else{var s=r===-1?1/i[o]:i[o];n[o]=this[o]*s}else n[0]=this[0],n[1]=this[1];return new u(n)},product:function(t){return this[0]*t[0]+this[1]*t[1]},abs:function(){return new u([Math.abs(this[0]),Math.abs(this[1])])},toUnit:function(t){var e=Number(this[0]),n=Number(this[1]);if(!e&&!n)return new u([0,0]);var r=1/Math.sqrt(e*e+n*n),i=t?Number(t):1;return new u([e*r*i,n*r*i])},isInteger:function(){return 2===this.length&&this[0]===Math.floor(this[0])&&this[1]===Math.floor(this[1])},isParallel:function(t){return this[0]*t[1]===this[1]*t[0]},isVertical:function(t){return!(this[0]*t[0]+this[1]*t[1])},isSameDire:function(t){var e=this.toUnit(),n=c.prototype.toUnit.call(t);return e.isEqual(n)},isOppoDire:function(t){var e=this.toUnit().mul(-1),n=c.prototype.toUnit.call(t);return e.isEqual(n)},inLine:function(t,e){return"y"===e||t[0][0]===t[1][0]&&t[0][0]===this[0]?this[1]>=t[0][1]&&this[1]<=t[1][1]||this[1]<=t[0][1]&&this[1]>=t[1][1]:"x"===e||t[0][1]===t[1][1]&&t[0][1]===this[1]?this[0]>=t[0][0]&&this[0]<=t[1][0]||this[0]<=t[0][0]&&this[0]>=t[1][0]:void 0},distance:function(t){if(t[0].length){var e=+(t[0][1]!==t[1][1]);return this[e]<=t[0][e]&&this[e]>=t[1][e]||this[e]>=t[0][e]&&this[e]<=t[1][e]?Math.abs(this[1-e]-t[0][1-e]):Math.min(Math.abs(this[0]-t[0][0])+Math.abs(this[1]-t[0][1]),Math.abs(this[0]-t[1][0])+Math.abs(this[1]-t[1][1]))}return Math.abs(this[0]-t[0])+Math.abs(this[1]-t[1])},round:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return new u([Math.round(this[0]/t)*t,Math.round(this[1]/t)*t])},roundToSmall:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return new u([Math.round(this[0]/t),Math.round(this[1]/t)])},floor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return new u([Math.floor(this[0]/t)*t,Math.floor(this[1]/t)*t])},floorToSmall:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return new u([Math.floor(this[0]/t),Math.floor(this[1]/t)])},toGrid:function(){return[new u(this),new u([this[0]+20,this[1]]),new u([this[0],this[1]+20]),new u([this[0]+20,this[1]+20])]},similar:function(t){return i(this,t,o)},closest:function(t){return a(this,t,s)},farest:function(t){return i(this,t,s)},rotate:function(t,e){e=e||new u([0,0]);var n=this.add(-1,e),r=t.multo([n]),i=c(r[0]).add(e);return i}},(0,p.default)(u.prototype,Array.prototype),c.extend({isPoint:function(t){return t instanceof Object&&t instanceof u||"number"==typeof t[0]&&"number"==typeof t[1]},isVector:function(t){return c.isPoint(t[0])&&c.isPoint(t[1])}}),c.prototype=u.prototype,e.Point=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=(0,O.$)(t.tag,A.SVG_NS,t.attribute);if(t.child)for(var n=0;n<t.child.length;n++)e.append(i(t.child[n]));return e}function a(t,e){var n=[],r=[],i=14,a={class:"line-rect"};return n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),n[0]===r[0]?(a.x=n[0]-i/2,a.y=n[1]-i/2,a.height=r[1]-n[1]+i,a.width=i):(a.x=n[0]-i/2,a.y=n[1]-i/2,a.height=i,a.width=r[0]-n[0]+i),a}function o(t,e){var n={};return n.vector=[t.vector[0]*e[0][0]+t.vector[1]*e[1][0],t.vector[0]*e[0][1]+t.vector[1]*e[1][1]],n.point=[t.point[0]+n.vector[0],t.point[1]+n.vector[1]],n}function s(){var t={},e={};return t.setValue=function(t,n){e[t[0]]||(e[t[0]]=[]),e[t[0]][t[1]]=n},t.getValue=function(t){return!(!e[t[0]]||!e[t[0]][t[1]])&&e[t[0]][t[1]]},t}function u(t,e,n){function r(t,e){return C.Point.prototype.distance.call(t,e)}function i(t){var e=N.schMap.getValueBySmalle(t.point);if(e&&"line"===e.form||"cross-point"===e.form)for(var n=0;n<e.connect.length;n++)if((0,C.Point)([t.point,e.connect[n]]).isParallel(t.vector))return!1;return!0}function a(t){var e=N.schMap.getValueBySmalle(t);return"part"===e.form?e.id:"part-point"===e.form?e.id.split("-")[0]:""}function o(t){if(N.schMap.isLine(t,"small")){for(var e=[],n=0;n<2;n++){var r=[[1,0],[-1,0],[0,-1],[0,1]],i=[N.schMap.alongTheLineBySmall(t,!1,r[2*n]),N.schMap.alongTheLineBySmall(t,!1,r[2*n+1])];i[0].isEqual(i[1])||e.push(i)}return e}return[]}function s(t){for(var e=[],n=0;n<t.length-1;n++){var r=t.slice(n,n+2);e[n]=[],e[n][0]=N.schMap.alongTheLineBySmall(r[1],!1,(0,C.Point)([r[0],r[1]])),e[n][1]=N.schMap.alongTheLineBySmall(r[0],!1,(0,C.Point)([r[1],r[0]]))}return e}function u(t,e){return C.Point.prototype.inLine.call(t,e)}function c(t){return r(t.point,O)+t.junction}function l(t){for(var e=0,n=0;n<O.length;n++)e+=r(t.point,O[n]);return e+t.junction}function h(t){return 3*l(t)+r(t.point,_)}function f(t,e){for(var n=0;n<e.length;n++)if(u(t,e[n]))return e[n];return!1}function d(t){return t.point.isEqual(O)}function v(t){for(var e=0;e<O.length;e++)if(u(t.point,O[e]))return!0;return!1}function y(t){if(t.point.isEqual(O))return!0;var e=f(t.point,k);if(!e)return!1;if(!t.junction)return!0;if((0,C.Point)(e).isParallel(t.vector))return!0;var n=t.junctionParent.vector,r=(0,C.Point)([t.point,O]);return r.isOppoDire(n)}function g(t){return t.point.isEqual(O)||f(t.point,k)}function m(t){var e=N.schMap.getValueBySmalle(t.point);return!e||"part"!==e.form&&("part-point"===e.form?r(t.point,O)<2:"line"!==e.form&&"cross-point"!==e.form||i(t))}function w(t){var e=N.schMap.getValueBySmalle(t.point);return!e||"part"!==e.form&&("part-point"===e.form?t.point.isEqual(O):"line"!==e.form&&"cross-point"!==e.form||i(t))}function b(t){var e=N.schMap.getValueBySmalle(t.point);return!e||("part"===e.form?e.id===S:"part-point"===e.form?e.id.split("-")[0]===S||r(t.point,O)<2:"line"!==e.form&&"cross-point"!==e.form||i(t))}function x(t){var e=N.schMap.getValueBySmalle(t.point);return!e||"part"!==e.form&&"part-point"!==e.form&&("line"!==e.form&&"cross-point"!==e.form||(f(t.point,P)||i(t)))}function T(t){var e=N.schMap.getValueBySmalle(t.point);return!e||("part"===e.form?e.id===S:"part-point"===e.form?e.id.split("-")[0]===S||t.point.isEqual(O):"line"!==e.form&&"cross-point"!==e.form||(f(t.point,P)||i(t)))}var M={},_=t.mul(.05),k=[],S="",P=[],O=Array.clone(e,.05);switch(n.process){case"draw":var A=N.schMap.getValueBySmalle(O);switch(A.form){case"line":k=o(O),M.checkPoint=w,M.checkEnd=y;break;case"cross-point":k=o(O),M.checkPoint=w,M.checkEnd=y;break;case"part-point":case"line-point":M.checkPoint=w,M.checkEnd=d;break;case"part":S=a(O),M.checkPoint=b,M.checkEnd=d;break;default:M.checkPoint=m,M.checkEnd=d}M.calValue=c;break;case"movePart":S=a(_),P=o(_),C.Point.isPoint(O)?(k=o(O),M.calValue=c,M.checkEnd=g,M.checkPoint=T):(O=s(O),M.calValue=l,M.checkEnd=v,M.checkPoint=T);break;case"deformation":O=[O],P=o(_),M.calValue=h,M.checkEnd=v,M.checkPoint=x;break;case"modified":"end"!==n.status&&(S=a(O),P=o(_)),M.checkPoint=T,M.checkEnd=d,M.calValue=c}return M.expandNumber=function(t){return N.schMap.isLine(t)?this.nodeInLine(t,P)?3:1:3},M.checkEnd({point:_})?new p([t]):M}function c(t,e,n){var r={},i=[],a=t.mul(.05);return i[0]=[],i[0][0]={point:a,vector:e,junction:0,value:0,parent:!1,straight:!0},i[0][0].junctionParent=i[0][0],n.setValue(a,i[0][0]),r.openSize=1,r.closeSize=0,r.pop=function(){for(var t in i)if(i.hasOwnProperty(t)){var e=i[t].pop();return i[t].length||delete i[t],r.openSize--,r.closeSize++,e}},r.push=function(t){var e=!0,a=n.getValue(t.point);if(a)if(t.value>a.value)e=!1;else if(i[a.value])for(var o=0;o<i[a.value].length;o++)if(a===i[a.value][o]){i[a.value].splice(o,1),i[a.value].length||delete i[a.value];break}e&&(i[t.value]||(i[t.value]=[]),i[t.value].push(t),n.setValue(t.point,t),r.openSize++)},r.get=function(t,e){return!(!i[t]||!i[t][e])&&i[t][e]},r}function l(t,e,n,r){var i=s(),a=u(t,e,r),l=c(t,n,i);if(a instanceof p)return a;for(var h=!1,f=void 0;!h&&l.closeSize<1e3;){for(var d=l.pop(),v=a.expandNumber(d.point),y=0;y<v;y++){var g=o(d,L[y]);if(g.junction=d.junction+(y&&3!==y?1:0),g.parent=d,g.straight=!0,g.junctionParent=y?d:d.junctionParent,g.value=a.calValue(g),a.checkEnd(g)){f=g,h=!0;break}a.checkPoint(g)?l.push(g):d.straight=!!y&&d.straight}if(!l.openSize&&!h)return new p([(0,C.Point)(t)])}for(var m=new p;f.parent;)m.push((0,C.Point)([20*f.point[0],20*f.point[1]])),f=f.junctionParent;return m.push((0,C.Point)(t)),m.reverse(),m}function p(t){if(this.length=0,t instanceof Array)for(var e=0;e<t.length;e++)this.push((0,C.Point)(t[e]))}function h(t){if(t instanceof Array){this.size=t.length;for(var e=0;e<t.length;e++){var n=(0,w.default)(t[e][0],2),r=n[0],i=n[1];this.set(r,i)}}else this.size=0;this.sign=!1,(0,g.default)(this,{size:{enumerable:!1,configurable:!1},sign:{enumerable:!1,configurable:!1}})}function f(t){this.id="line_",this.way=new p,this.circle=[!1,!1],this.connect=["",""],this.partType="line",this.current={};var e={tag:"<g>",attribute:{class:"line",transform:"translate(0,0)"},child:[{tag:"<path>"}]},n={tag:"<g>",attribute:{class:"line-point draw-open",transform:"translate(0,0)"},child:[{tag:"<circle>"},{tag:"<rect>",attribute:{class:"rect-line-point"}}]};t instanceof Array?this.way=new p(t):(this.extend(t),this.way=new p(this.way)),this.id=V.partsAll.newId(this.id),this.elementDOM=i(e),this.elementDOM.attr("id",this.id),E.preappend(this.elementDOM);
for(var r=0;r<2;r++)this.circle[r]=i(n),this.circle[r].attr("id",this.id+"-"+r),this.circle[r].attr("transform","translate("+this.way.get(-1*r).join(",")+")"),this.elementDOM.append(this.circle[r]),this.setConnect(r);this.wayDrawing(),(0,g.default)(this,{way:{configurable:!1,writable:!1},circle:{configurable:!1,writable:!1},connect:{configurable:!1,writable:!1},partType:{configurable:!1,writable:!1}}),(0,v.default)(this),V.partsAll.push(this)}Object.defineProperty(e,"__esModule",{value:!0}),e.LineClass=void 0;var d=n(62),v=r(d),y=n(110),g=r(y),m=n(2),w=r(m),b=n(113),x=r(b),T=n(100),M=r(T),_=n(68),k=r(_),S=n(115),P=r(S),O=n(67),C=n(108),A=n(87),N=n(107),V=n(123),E=(0,O.$)("#area-of-parts"),$=(0,O.$)("<g>",A.SVG_NS,{id:"temp-line",class:"line focus"}),L=[[[1,0],[0,1]],[[0,1],[-1,0]],[[0,-1],[1,0]],[[-1,0],[0,-1]]],D={draw:{start:function(t,e){var n=this.current,r=n.mouse(t).round();0===this.findConnect(r)&&this.reverse(),this.current.extend({startNode:(0,C.Point)(this.way[0]),mouseGrid:new h,enforceAlign:{},backup:{node:(0,C.Point)(r),way:new p(this.way)}}),this.toFocus(),this.enlargeCircle(1),this.deleteSign(),this.freedConnect(1),this.toGoing(),this.current.initTrend=this.initTrend(0),"new"===e&&delete this.current.backup},callback:function(t){var e=this.current,n=e.gridL,r=e.enforceAlign,i=e.mouseBias(t),a=e.mouse(t),o=a.round(),s=a.floor(),u=N.schMap.getValueByOrigin(o),c={process:"draw"},p=!1;"line-point"===u.form||"cross-point"===u.form&&3===u.connect.length?c.status="point":"line"===u.form||"cross-point"===u.form&&4===u.connect.length?c.status="line":r.label&&r.onPart?c.status="align":c.status="space",!r.flag&&s.isEqual(n)||!function(){p=r.label,r.label=!1,r.flag=!1;var t=r.part,o=e.startNode,u=e.initTrend,f=e.mouseGrid||new h,d=e.mouseGrid=new h,v=s.toGrid();if(r.onPart){var y=a.add(i).add(-1,t.position),g=t.pointRotate().map(function(e,n){return!t.connect[n]&&e.position}),m=y.similar(g);if(m){var w=t.position.add(m.value);c.status="align",v=[w],r.label={part:t,sub:m.sub,node:w}}}f.forSameNode(v,d);for(var b=0;b<v.length;b++){var x=v[b];d.has(x)||d.set(x,l(o,x,u,c).checkWayExcess(u))}n[0]=20*Math.floor(a[0]/20),n[1]=20*Math.floor(a[1]/20)}();var f=e.mouseGrid,d=e.backup;switch(p&&p.part.shrinkCircle(p.sub),c.status){case"line":var v=u.connect.map(function(t){return[20*t[0],20*t[1]]}).filter(function(t){return f.has(t)&&"part-point"!==N.schMap.getValueByOrigin(t).form});if(v.length){var y=a.closest(v).value,g=f.get(o);if(g.isSimilar(f.get(y))){this.shrinkCircle(1),this.way.clone(g),this.way.endToLine([o,y],a);break}}case"point":this.way.clone(f.get(o)),this.shrinkCircle(1);break;case"align":this.shrinkCircle(1),this.way.clone(f.get(r.label.node)),r.label.part.enlargeCircle(r.label.sub);break;default:this.way.clone(f.nodeMax()),this.way.endToMouse(a),this.enlargeCircle(1)}d&&d.node.isEqual(this.way.get(-1))&&this.way.clone(d.way),this.wayDrawing()},end:function(){function t(){var t=(0,C.Point)(N.schMap.nodeRound(i,r,N.schMap.getValueByOrigin.bind(N.schMap)));return l(e,t,n,{process:"modified"}).checkWayExcess(n,"end")}var e=this.way[0],n=this.current.initTrend,r=this.way.get(-1),i=r.round(),a=N.schMap.getValueByOrigin(i);if(this.way.length<2||i.isEqual(this.way[0]))return this.deleteSelf(),!1;switch(a.form){case"part-point":var o=V.partsAll.findPart(a.id),s=a.id.split("-")[1];o.connect[s]?this.way.clone(t()):(this.nodeToConnect(1),o.toFocus());break;case"line-point":case"line":case"cross-point":this.nodeToConnect(1);break;default:if(!this.connect[0])return this.deleteSelf(),!1;this.way.clone(t())}this.render(),this.markSign()}},movePart:{start:function(){var t=V.partsAll.findPart(this.connect[0]),e=V.partsAll.findPart(this.connect[1]),n=this.current;V.partsNow.has(t)||V.partsNow.has(e)?("part"===this.connectStatus(1)&&V.partsNow.has(e)&&this.reverse(),n.status="part2any"):t||e?t&&e||(t&&this.reverse(),n.status="line2part",n.backTrend=this.initTrend(1)):(this.connect[1].split(" ").some(function(t){return V.partsNow.has(t)})&&this.reverse(),n.status="line2line"),n.wayBackup=new p(this.way),n.initTrend=this.initTrend(0),n.startPoint=(0,C.Point)(this.way[0])},callback:function(t){var e=this.current,n=e.gridL,r=e.initTrend,i=t.floor(),a={process:"movePart",status:e.status};i.isEqual(n)||!function(){var t=e.wayBackup,n=i.toGrid(),o=t.gridToEnd(n),s=e.searchGrid||new h,u=e.searchGrid=new h,c=e.mouseGrid=new h;u.sign=o,s.forSameNode(n,u);for(var f=0;f<n.length;f++){var d=n[f];u.has(d)||u.set(d,l(d,o.seg,r,a).checkWayExcess(r))}u.forEach(function(e,n){var r=new p(t);r.splice.apply(r,[0,o.sub].concat((0,P.default)(n))),r.checkWayRepeat(),c.set(e,r)}),e.gridL=i}();var o=this.current.mouseGrid;this.way.clone(o.nodeMax()),this.way.endToMouse(-1,t),this.wayDrawing()},end:function t(){var e=this.current;if("move"!==e.status){var n,r=e.wayBackup,i=e.initTrend,a=this.connectNode(0),o={process:"movePart",status:e.status},t=r.gridToEnd(a.floor().toGrid()),s=l(a,t.seg,i,o).checkWayExcess(i,"end");this.way.clone(r),(n=this.way).splice.apply(n,[0,t.sub].concat((0,P.default)(s))),this.way.checkWayLine(),this.resetConnect(r)}this.render(),this.markSign()}},deformation:{start:function(t){var e=this,n=e.current,r=n.mouse(t),i=e.way.nodeInWay(r);n.startMouse=r,n.movePoint=(0,C.Point)(i.value[0]),n.backup=new p(this.way),n.backup.sub=i.sub,n.moveVector=(0,C.Point)(i.value).toUnit().abs().reverse(),e.toGoing(),e.deleteSign(),n.Limit={},N.schMap.isLine(this.way[0])&&(n.Limit.start=[N.schMap.alongTheLineByOrigin(this.way[0],!1,n.moveVector),N.schMap.alongTheLineByOrigin(this.way[0],!1,n.moveVector.mul(-1))]),N.schMap.isLine(this.way.get(-1))&&(n.Limit.end=[N.schMap.alongTheLineByOrigin(this.way.get(-1),!1,n.moveVector),N.schMap.alongTheLineByOrigin(this.way.get(-1),!1,n.moveVector.mul(-1))])},callback:function(t){var e=this.current,n=e.gridL,r=e.moveVector,i=e.mouse(t).add(-1,e.startMouse),a=e.movePoint.add(i.mul(r)),o=a.floor(),s={process:"deformation"};if(!o.isEqual(n)){var u=[(0,C.Point)(o),o.add(r.mul(20))],c=e.mouseGrid||new h,l=e.mouseGrid=new h;c.forSameNode(u,l);for(var p=0;p<2;p++)l.get(u[p])||l.set(u[p],D.deformation.splice(u[p],e.backup,s,l.get(u[1-p])));e.gridL=o}var f=e.mouseGrid.nodeMax(function(t,e){return t.sub===-1?t:e});this.way.clone(f),this.way.segToPoint(f.sub,a,e.Limit),this.wayDrawing()},end:function(t){var e=this.current,n=e.moveVector,r=e.mouse(t).add(-1,e.startMouse),i=e.movePoint.add(r.mul(n)).round();this.way.clone(D.deformation.splice(i,e.backup,{process:"deformation"},!1,!0)),this.resetConnect(e.backup),this.render(),this.markSign()},splice:function(t,e,n,r,i){for(var a=e.sub,o=e.vector(a).abs().toUnit(),s=(0,C.Point)(o).reverse(),u=[e[a],e[a+1]],c=Math.abs(t.add(-1,e[a]).product(s.mul(-1,20))),h=0;h<c;h++){var f=function(c){var f=u.map(function(e){return e.mul(o).add(t.mul(s).add(s.mul(20*c)))}),d=e.moveSegment(a,f),v=d.overlapp(f),y=d.segmentSplit(v,!!i);if(y){var g=void 0,m=void 0,w=void 0,b=d.slice(0,v),x=d.slice(v+2);b.length?(w=(0,C.Point)([b.get(-1),y[0]]).mul(s).toUnit(),g=l(b.get(-1),y,w,n).checkWayExcess(w)):g=[d[0]],x.length?(w=(0,C.Point)([x[0],y[1]]).mul(s).toUnit(),m=l(x[0],y,w,n).checkWayExcess(w).reverse()):m=[d[v+1]];var T=new p(b.concat(g,y,m,x)).checkWayLine(s);return T.sub=T.overlapp(f),{v:T}}return r?{v:r}:h?void 0:"break"};t:for(var d=-h;d<=h;d+=2*h){var v=f(d);switch(v){case"break":break t;default:if("object"===("undefined"==typeof v?"undefined":(0,k.default)(v)))return v.v}}}return e}}};p.prototype={constructor:p,push:function(t){return this[this.length++]=(0,C.Point)(t),this.length},unshift:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.length,i=this.length-1;i>=0;i--)this[i+r]=this[i];for(var a=0;a<r;a++)this[a]=(0,C.Point)(e[a]);return this.length=this.length+r,this.length},standardize:function(t){for(var e=0;e<this.length;e++)this[e]=t?this[e].add(t).round():this[e].round();return this},checkWayRepeat:function(){for(var t=0;t<this.length-2;t++)(this[t][0]===this[t+1][0]&&this[t+1][0]===this[t+2][0]||this[t][1]===this[t+1][1]&&this[t+1][1]===this[t+2][1]||this[t][0]===this[t+1][0]&&this[t][1]==this[t+1][1])&&(this.splice(t+1,1),t-=2,t<-1&&(t=-1));return this},checkWayExcess:function(t,e){var n=e?{process:"modified",status:e}:{process:"modified"};if(this.length<=3)return this;t.isSameDire((0,C.Point)([this[1],this[2]]))&&(this.splice.apply(this,[0,3].concat((0,P.default)(l(this[0],this[2],t,n)))),this.checkWayRepeat());for(var r=0;r<this.length-3;r++){var i=[(0,C.Point)([this[r],this[r+1]]).toUnit(),(0,C.Point)([this[r+2],this[r+3]]).toUnit()],a=void 0,o=void 0;i[0].isEqual(i[1])?(a=l(this[r+1],this[r+3],i[0],n),o=(0,C.Point)([a[0],a[1]]),a.length<4&&o.isSameDire(i[0])&&(this.splice.apply(this,[r+1,3].concat((0,P.default)(a))),this.checkWayRepeat(),r--)):this.length>4&&(a=l(this[r],this[r+3],i[0],n),a.length<4&&(this.splice.apply(this,[r,4].concat((0,P.default)(a))),this.checkWayRepeat(),r--))}return this.checkWayRepeat(),this},checkWayLine:function(t){this.checkWayRepeat();var e=(0,C.Point)([this[0],this[1]]),n=(0,C.Point)([this.get(-1),this.get(-2)]),r=(0,C.Point)(N.schMap.alongTheLineByOrigin(this[0],this[1])),i=(0,C.Point)(N.schMap.alongTheLineByOrigin(this.get(-1),this.get(-2)));return r.isEqual(this[1])&&(!t||t&&e.isParallel(t))?this.splice(0,1):this[0]=r,i.isEqual(this.get(-2))&&(!t||t&&n.isParallel(t))?this.pop():this[this.length-1]=i,this.checkWayRepeat(),this},clone:function(t){for(var e=0;e<t.length;e++)this[e]=(0,C.Point)(t[e]);this.splice(t.length),this.length=t.length},reverse:function(){return Array.prototype.reverse.call(this),this},vector:function(t){return t>=0?(0,C.Point)([this[t],this[t+1]]):(0,C.Point)([this.get(t),this.get(t-1)])},isSame:function(t){for(var e=0;e<this.length;e++)if(!this[e].isEqual(t[e]))return!1;return!0},isSimilar:function(t){if(this.length!==t.length)return!1;for(var e=0;e<this.length-2;e++)if(!this[e].isEqual(t[e]))return!1;return!this.get(-1).isEqual(t.get(-1))&&!this.get(-2).isEqual(t.get(-2))},nodeCollection:function(){for(var t=[],e=0;e<this.length-1;e++)for(var n=(0,C.Point)([this[e],this[e+1]]).toUnit().mul(20),r=(0,C.Point)(this[e]);(0,C.Point)([r,this[e+1]]).isSameDire(n);)t.push(r),r=r.add(n);return t.push((0,C.Point)(this.get(-1))),t},endToMouse:function(t,e){e=1===arguments.length?t:e,t=1===arguments.length?1:t;var n=1===t?this.length-1:0,r=1===t?this.length-2:1;this.length>1&&(this[n][0]===this[r][0]?this[r][0]=e[0]:this[r][1]=e[1]),this[n]=e},endToLine:function(t,e){t[0][0]===t[1][0]?(this[this.length-1][1]=e[1],this[this.length-2][1]=e[1],this[this.length-1][0]=t[0][0]):(this[this.length-1][1]=t[0][1],this[this.length-1][0]=e[0],this[this.length-2][0]=e[0])},segToPoint:function(t,e,n){var r=t;if(r<0)return this;var i=this[r][0]===this[r+1][0]?"x":"y";return!r&&(n&&n.start&&!e.inLine(n.start,i)||N.schMap.isPartPoint(this[0]))&&(r++,this.splice(0,0,(0,C.Point)(this[0]))),r===this.length-2&&(n&&n.end&&!e.inLine(n.end,i)||N.schMap.isPartPoint(this.get(-1)))&&this.push((0,C.Point)(this.get(-1))),this[r][0]===this[r+1][0]?(this[r][0]=e[0],this[r+1][0]=e[0]):(this[r][1]=e[1],this[r+1][1]=e[1]),this},moveSegment:function(t,e){for(var n=this,r=new p(n),i=(0,C.Point)(e).reverse(),a=i[0]?"x":"y",o=t,s=t+1,u=t;u>0;u--){var c=[r[u-1],r[u]];if((0,C.Point)(c).isParallel(i)&&e[0].inLine(c,a)){o=u;break}}for(var l=t+1;l<this.length-1;l++){var h=[r[l],r[l+1]];if((0,C.Point)(h).isParallel(i)&&e[0].inLine(h,a)){s=l;break}}return r.splice.apply(r,[o,s-o+1].concat((0,P.default)(e))),r.splice(0,0,(0,C.Point)(this[0])),r.push((0,C.Point)(this.get(-1))),r.checkWayRepeat(),r},gridToEnd:function(t){var e=this,n=[],r=(0,C.Point)(this[0].farest(t).value);if(2===this.length)return{sub:this.length,seg:(0,C.Point)(this.get(-1))};for(var i=function(i){var a=[],o=e.map(function(t){return[(1-i)*t[0],i*t[1]]}),s=t.map(function(t){return[(1-i)*t[0],i*t[1]]}),u=e[0][1-i]===e[1][1-i]?(0,C.Point)([e[0],e[1]]):(0,C.Point)([e[1],e[2]]),c=(0,C.Point)([o[0],[(1-i)*r[0],i*r[1]]]);if(u.isOppoDire(c))return n[i]=0,"continue";for(var l=function(t){return e[t][i]===e[t+1][i]?"continue":void(s.every(function(e){return C.Point.prototype.inLine.call(e,[o[t],o[t+1]])})&&a.push(t))},p=0;p<o.length-1;p++){l(p)}a.length?n[i]=r.closest(a.map(function(t){return[e[t],e[t+1]]})).sub:n[i]=e.length+1},a=0;a<2;a++){i(a)}var o=Math.abs(n[0]-n[1]),s=Math.maxOfArray(n);return 0===s?{sub:1,seg:[this[1],this[2]]}:s===this.length+1?{sub:this.length,seg:(0,C.Point)(this.get(-1))}:1===o?{sub:s,seg:[this[s-1],this[s],this[s+1]]}:void 0},nodeInWay:function(t){for(var e=[],n=0;n<this.length-1;n++)e.push(this.slice(n,n+2));return t.closest(e)},overlapp:function(t){for(var e={},n=(0,C.Point)(t).toUnit(20),r=t[0];!r.isEqual(t[1]);r=r.add(n))e[r.join(",")]=!0;e[t[1].join(",")]=!0;for(var i=0;i<this.length-1;i++){var a=this.slice(i,i+2),o=(0,C.Point)(a).toUnit(20);if(!n.isVertical(o))for(var s=a[0];!s.isEqual(a[1]);s=s.add(o))if(e[s.join(",")])return i}return-1},segmentSplit:function(t,e){function n(t){return!N.schMap.getValueByOrigin(t)}function r(t){var e=N.schMap.getValueByOrigin(t);if("part"===e.form||"part-point"===e.form||"line-point"===e.form)return!1;if("line"===e.form||"cross-point"===e.form)for(var n=e.connect,r=0;r<n.length;r++){var i=n[r],a=(0,C.Point)([t.floorToSmall(),i]);if(s.isVertical(a))return!1}return!0}if(t===-1)return!1;for(var i=[],a=[this[t],this[t+1]],o=p.prototype.nodeCollection.call(a),s=(0,C.Point)(a),u=e?n:r,c=null,l=0;l<o.length;l++){var h=u(o[l]);h&&!c?l===o.length-1?i.push([o[l],o[l]]):c=o[l]:!h&&c?(i.push([c,o[l-1]]),c=null):h&&c&&l===o.length-1&&i.push([c,o[l]])}for(var f=-1,d=!1,v=0;v<i.length;v++)i[v].length>f&&(f=C.Point.prototype.distance.call(i[v][0],i[v][1]),d=i[v]);return d},map:function(t){for(var e=new p,n=0;n<this.length;n++)e.push(t(this[n],n));return e}},(0,M.default)(p.prototype,Array.prototype),p.prototype[x.default]=!0,h.extend({checkKeyError:function(t){if(!C.Point.isPoint(t)||!t.isEqual(C.Point.prototype.floor.call(t)))throw"键的格式错误"},checkValueError:function(t){if(!(t instanceof p))throw"键值必须是LineWay的实例"},keyToHash:function(t){return 5*t[0]+.05*t[1]},hashToKey:function(t){var e=[],n=t%100;return e[1]=20*n,e[0]=.2*(t-n),(0,C.Point)(e)}}),h.prototype={constructor:h,get:function(t){return h.checkKeyError(t),this[h.keyToHash(t)]},set:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";h.checkKeyError(t),h.checkValueError(e);var r=h.keyToHash(t);this[r]?"default"===n?this[r]=e:"small"===n&&this[r].length>e.length&&(this[r]=e):(this[r]=e,this.size+=1)},has:function(t){return!!this.get(t)},keys:function t(){var t=[];for(var e in this)this.hasOwnProperty(e)&&t.push(h.hashToKey(e));return t},ways:function t(){for(var t=[],e=this.keys(),n=0;n<e.length;n++)t.push(this.get(e[n]));return t},forEach:function(t){for(var e in this)this.hasOwnProperty(e)&&t(h.hashToKey(e),this[e],this)},nodeMax:function(t){var e=-(1/0),n=!1;return this.forEach(function(r,i){i.length>e?(n=i,e=n.length):t&&i.length===e&&(n=t(n,i),e=n.length)}),n},forSameNode:function(t,e){this.sign&&e.sign&&this.sign.isEqual(e.sign)&&this.forEach(function(n,r){for(var i=0;i<t.length;i++)n.isEqual(t[i])&&e.set(n,r)})}},f.prototype={constructor:f,shrinkCircle:function(t){(0,O.$)("circle",this.circle[t]).attr("style","r:4")},enlargeCircle:function(t){(0,O.$)("circle",this.circle[t]).attr("style","r:8")},resetCircle:function(t){this.elementDOM.append(this.circle[t]),this.moveCircle(t,this.way.get(-1*t)),(0,O.$)("circle",this.circle[t]).removeAttr("style")},moveCircle:function(t,e){this.circle[t].attr("transform","translate("+e.join(",")+")")},toGoing:function(){(0,O.$)("rect.line-rect",this.elementDOM).remove(),E.preappend(this.elementDOM);for(var t=0;t<2;t++)if(this.setConnect(t),"line"===this.connectStatus(t)){var e=this.way.get(-1*t),n=this.connect[t].split(" ");if(2===n.length)for(var r=0;r<2;r++){var i=V.partsAll.findPart(n[r]),a=i&&i.findConnect(e);i&&i.circle[a].addClass("dispear")}$.append(this.circle[t]),E.preappend($,document.querySelector("#area-of-parts .editor-parts"))}},wayDrawing:function(){if(this.way.length<1)return!1;for(var t="M"+this.way[0][0]+","+this.way[0][1],e=1;e<this.way.length;e++)t+="L"+this.way[e][0]+","+this.way[e][1];(0,O.$)("path",this.elementDOM).attr("d",t),this.moveCircle(0,this.way[0]),this.moveCircle(1,this.way.get(-1))},render:function(){var t=this.elementDOM,e=(0,O.$)("rect.line-rect",t),n=this.way;for(n.checkWayRepeat(),n.standardize(),$.remove(),E.preappend(this.elementDOM,document.querySelector("#area-of-parts .editor-parts"));e.length>this.way.length-1;)e.remove(-1);for(var r=0;r<n.length-1;r++)e[r]?e.get(r).attr(a(n[r],n[r+1])):t.append((0,O.$)("<rect>",A.SVG_NS,a(n[r],n[r+1])));this.wayDrawing(),this.elementDOM.removeAttr("transform"),this.resetCircle(0),this.resetCircle(1)},rotateSelf:function(t,e){for(var n=0;n<this.way.length;n++)this.way[n]=this.way[n].rotate(t,e);return this.wayDrawing(),this},move:function(t){var e=(this.current.bias||(0,C.Point)([0,0])).add(t);return this.elementDOM.attr("transform","translate("+e.join(",")+")"),this},connectStatus:function(t){var e=this.connect[t];return!!e&&(e.search("line_")!==-1?"line":e.search("-")!==-1&&"part")},deleteConnect:function(t){this.connect.forEach(function(e,n,r){e.search(t)!==-1&&(r[n]=e.split(" ").filter(function(e){return e!==t}).join(" "))})},replaceConnect:function(t,e){var n=this,r=n.connect[t];if("part"===n.connectStatus(t)){var i=V.partsAll.findPart(r),a=r.split("-")[1];i.setConnect(a,e)}else if("line"===n.connectStatus(t)){r.split(" ").map(function(t){return V.partsAll.findPart(t)}).forEach(function(t){t.connect[0]=t.connect[0].replace(n.id,e),t.connect[1]=t.connect[1].replace(n.id,e)});var o=n.way.get(-1*t),s=N.schMap.getValueByOrigin(o);s.id=s.id.replace(n.id,e)}},setConnect:function(t,e){2===arguments.length&&(this.connect[t]=e),this.connect[t]?this.connect[t].search(" ")===-1?this.circle[t].attr("class","line-point draw-close"):this.circle[t].attr("class","line-point cross-point"):(this.connect[t]="",this.circle[t].attr("class","line-point draw-open"))},freedConnect:function(t){var e=this,n=e.connect[t];if("part"===e.connectStatus(t)){var r=V.partsAll.findPart(n),i=n.split("-")[1];r.setConnect(i,!1)}else if("line"===e.connectStatus(t)){var a=n.split(" ").map(function(t){return V.partsAll.findPart(t)});2===a.length&&a.every(function(t){return t.hasConnect(e.id)})?(a[0].mergeLine(a[1]),a[0].render(),a[0].markSign()):3===a.length&&a.forEach(function(t){return t.deleteConnect(e.id)})}e.setConnect(t,!1)},nodeToConnect:function(t){var e=this,n=e.way.get(-1*t).round(),r=N.schMap.getValueByOrigin(n);if(r){if("part-point"===r.form){var i=V.partsAll.findPart(r.id),a=r.id.split("-")[1];i.setConnect(a,this.id),e.setConnect(t,i.id+"-"+a)}else if("line-point"===r.form)e.mergeLine(r.id);else if("line"===r.form)e.splitLine(r.id,t);else if("cross-point"===r.form){var o=e.way.get(-1*t),s=r.id.split(" ").filter(function(t){return t!==e.id});if(1===s.length)e.mergeLine(s[0]);else{e.setConnect(t,s.join(" "));for(var u=function(t){var n=V.partsAll.findPart(s[t]),r=n.findConnect(o);n.setConnect(r,s.filter(function(t){return t!==n.id}).join(" ")+" "+e.id)},c=0;c<s.length;c++)u(c)}}}else e.setConnect(t,!1)},resetConnect:function(t){for(var e=0;e<2;e++)"line"!==this.connectStatus(e)||t.get(-1*e).isEqual(this.way.get(-1*e))||(this.freedConnect(e),this.nodeToConnect(e))},findConnect:function(t){return t.isEqual(this.way.get(-1))?1:t.isEqual(this.way[0])?0:-1},isCover:function(t){for(var e=t?this.way.map(function(e){return e.add(t).round()}):this.way.map(function(t){return t.round()}),n=e.nodeCollection(),r=0;r<n.length;r++){var i=n[r],a=N.schMap.getValueByOrigin(i);if(i.isEqual(e[0])||i.isEqual(e.get(-1))){if(a&&"cross-point"===a.form){if(!a.id.indexOf(this.id))return!0}else if(a)return!0}else if(a)return!0}return!1},toSimpleData:function(){return{id:this.id,partType:"line",way:new p(this.way),connect:Array.clone(this.connect)}},initTrend:function(t){var e=this.way.get(-1*t),n=N.schMap.getValueByOrigin(e);if(n&&"part-point"===n.form){var r=n.id.split("-")[1],i=V.partsAll.findPart(n.id),a=i.pointRotate()[r];return(0,C.Point)(a.direction)}return t?(0,C.Point)([this.way.get(-1),this.way.get(-2)]).toUnit():(0,C.Point)(this.way.slice(0,2)).toUnit()},connectNode:function(t){var e=this;if(!this.connect[t])return!1;if("line"===this.connectStatus(t)){var n=function(){for(var n=e.connect[t],r=n.split(" ").map(function(t){return V.partsAll.findPart(t).way}),i=r[0],a=function(t){i=i.filter(function(e){return r[t].some(function(t){return t.isEqual(e)})})},o=1;o<r.length;o++)a(o);return{v:(0,C.Point)(i[0])}}();if("object"===("undefined"==typeof n?"undefined":(0,k.default)(n)))return n.v}else if("part"===this.connectStatus(t)){var r=this.connect[t],i=r.split("-")[1],a=V.partsAll.findPart(r),o=a.pointRotate()[i];return a.position.add(o.position)}},isExist:function(){return E.contains(this.elementDOM)||V.partsAll.has(this)},hasConnect:function(t){return this.connect[0].indexOf(t)!==-1||this.connect[1].indexOf(t)!==-1},markSign:function(){for(var t=this.way.nodeCollection(),e=0;e<t.length;e++){var n=t[e],r=t[e-1],i=N.schMap.getValueByOrigin(n);if(e&&e!==t.length-1)if(i&&"line"===i.form&&!N.schMap.nodeInConnectByOrigin(n,r))i.form="cover-point",i.id+=" "+this.id;else if(i&&"cover-point"===i.form){var a=n.add((0,C.Point)([r,n]).reverse()),o=N.schMap.getValueByOrigin(a),s=void 0,u=void 0;"line"===o.form?i.id=o.id+" "+this.id:"part-point"===o.form&&(s=V.partsAll.findPart(o.id),u=s.connect[o.id.split("-")[1]],i.id=u+" "+this.id)}else N.schMap.setValueByOrigin(n,{form:"line",id:this.id,connect:[]});else if(i){if("cross-point"===i.form&&i.id.search(this.id)===-1)i.id?i.id+=" "+this.id:i.id=this.id;else if("line-point"===i.form){var c=i.id;N.schMap.setValueByOrigin(n,{form:"cross-point",id:this.id+" "+c})}}else N.schMap.setValueByOrigin(n,{form:"line-point",id:this.id,connect:[]});r&&(N.schMap.pushConnectByOrigin(n,r),N.schMap.pushConnectByOrigin(r,n))}},deleteSign:function(){for(var t=this,e=this.way.nodeCollection(),n=0;n<e.length;n++){var r=e[n],i=N.schMap.getValueByOrigin(r);if(n&&n!==e.length-1)"cover-point"===i.form?(i.id=i.id.split(" ").filter(function(e){return e!==t.id})[0],i.form="line",N.schMap.deleteConnectByOrigin(r,e[n-1]),N.schMap.deleteConnectByOrigin(e[n-1],r)):"line"===i.form&&N.schMap.deleteValueByOrigin(r);else{if(!i)continue;"line-point"===i.form?N.schMap.deleteValueByOrigin(r):"cross-point"===i.form&&(i.id=i.id.split(" ").filter(function(e){return e!==t.id}).join(" "),i.id||N.schMap.deleteValueByOrigin(r))}}},reverse:function(){this.way.reverse(),this.connect.reverse(),this.circle.reverse();for(var t=0;t<2;t++)this.circle[t].attr("id",this.id+"-"+t)},toFocus:function(){this.elementDOM.addClass("focus"),V.partsNow.push(this)},toNormal:function(){this.elementDOM.removeClass("focus"),this.current={}},splitLine:function(t,e){t=t instanceof f?t:V.partsAll.findPart(t);var n=(0,C.Point)(this.way.get(-1*e)),r=new f([n]);t.replaceConnect(1,r.id),r.setConnect(1,t.connect[1]),r.setConnect(0,t.id+" "+this.id),this.setConnect(e,t.id+" "+r.id),t.setConnect(1,r.id+" "+this.id);for(var i=0,a=0;a<t.way.length-1;a++)if(n[0]===t.way[a][0]&&n[0]===t.way[a+1][0]){if(n[1]<=t.way[a][1]&&n[1]>=t.way[a+1][1]||n[1]>=t.way[a][1]&&n[1]<=t.way[a+1][1]){i=a;break}}else if(n[1]===t.way[a][1]&&n[1]===t.way[a+1][1]&&(n[0]<=t.way[a][0]&&n[0]>=t.way[a+1][0]||n[0]>=t.way[a][0]&&n[0]<=t.way[a+1][0])){i=a;break}r.way.clone(t.way.slice(i+1)),r.way.unshift(n),t.way.splice(i+1,t.way.length-i-1),t.way.push(n),this.elementDOM.preappendTo(E),t.render(),t.markSign(),r.render(),r.markSign(),N.schMap.setValueByOrigin(n,{form:"cross-point",id:this.id+" "+t.id+" "+r.id})},deleteSelf:function(){var t=this;if(!this.isExist())return!1;for(var e=0;e<this.connect.length;e++)if("line"===this.connectStatus(e)){var n=this.connect[e].split(" ").map(function(t){return V.partsAll.findPart(t)});n.forEach(function(e){return e&&e.deleteConnect(t.id)}),2===n.length&&n[0]&&(n[0].mergeLine(n[1]),n[0].render(),n[0].markSign())}else if("part"===this.connectStatus(e)){var r=this.connect[e].split("-"),i=V.partsAll.findPart(r[0]);i&&i.setConnect(r[1],!1)}this.deleteSign(),this.elementDOM.remove(),V.partsAll.deletePart(this)},mergeLine:function(t){return t=t instanceof f?t:V.partsAll.findPart(t),!(!t||"line"!==t.partType)&&(this.way[0].isEqual(t.way[0])?this.reverse():this.way[0].isEqual(t.way.get(-1))?(this.reverse(),t.reverse()):this.way.get(-1).isEqual(t.way.get(-1))&&t.reverse(),this.way.clone(this.way.concat(t.way)),this.way.checkWayRepeat(),this.setConnect(1,t.connect[1]),t.replaceConnect(1,this.id),t.elementDOM.remove(),V.partsAll.deletePart(t),void this.wayDrawing())},startPath:function(t,e){for(var n,r=arguments.length,i=Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];(n=D[e].start).call.apply(n,[this,t].concat(i))},setPath:function(t,e){D[e].callback.call(this,t)},putDown:function(t,e){D[e].end.call(this,t)}},e.LineClass=f},function(t,e,n){t.exports={default:n(111),__esModule:!0}},function(t,e,n){n(112);var r=n(18).Object;t.exports=function(t,e){return r.defineProperties(t,e)}},function(t,e,n){var r=n(16);r(r.S+r.F*!n(26),"Object",{defineProperties:n(35)})},function(t,e,n){t.exports={default:n(114),__esModule:!0}},function(t,e,n){t.exports=n(71).f("isConcatSpreadable")},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(116),a=r(i);e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,a.default)(t)}},function(t,e,n){t.exports={default:n(117),__esModule:!0}},function(t,e,n){n(51),n(118),t.exports=n(18).Array.from},function(t,e,n){"use strict";var r=n(19),i=n(16),a=n(50),o=n(119),s=n(120),u=n(39),c=n(121),l=n(58);i(i.S+i.F*!n(122)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,p,h=a(t),f="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,y=void 0!==v,g=0,m=l(h);if(y&&(v=r(v,d>2?arguments[2]:void 0,2)),void 0==m||f==Array&&s(m))for(e=u(h.length),n=new f(e);e>g;g++)c(n,g,y?v(h[g],g):h[g]);else for(p=m.call(h),n=new f;!(i=p.next()).done;g++)c(n,g,y?o(p,v,[i.value,g],!0):i.value);return n.length=g,n}})},function(t,e,n){var r=n(23);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var a=t.return;throw void 0!==a&&r(a.call(t)),e}}},function(t,e,n){var r=n(9),i=n(48)("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||a[i]===t)}},function(t,e,n){"use strict";var r=n(22),i=n(30);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(48)("iterator"),i=!1;try{var a=[7][r]();a.return=function(){i=!0},Array.from(a,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var a=[7],o=a[r]();o.next=function(){return{done:n=!0}},a[r]=function(){return o},t(a)}catch(t){}return n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t instanceof i)return t;if("number"==typeof t)return new i;if(this.hash={},this.current={},this.length=0,void 0!==t){t instanceof Array||this.push(t);for(var e=0;e<t.length;e++)this.push(t[e])}(0,u.default)(this,{hash:{configurable:!1,writable:!1,enumerable:!1},length:{configurable:!1,enumerable:!1},current:{configurable:!1,enumerable:!1}})}Object.defineProperty(e,"__esModule",{value:!0}),e.PartsCollection=e.partsNow=e.partsAll=void 0;var a=n(100),o=r(a),s=n(110),u=r(s),c=50;i.prototype={constructor:i,push:function(t){if(!t.elementDOM)return!1;if(this.has(t)){var e=this.hash[t.id],n=t,r=this.length-1,i=this[r];this[r]=n,this[e]=i,this.hash[n]=r,this.hash[i]=e}else this[this.length++]=t,this.hash[t.id]=this.length-1;return this},pop:function(){var t=Array.prototype.pop.call(this);if(t)return delete this.hash[t.id],t},findPart:function(t){if(!t)return!1;var e=t.split("-")[0];return!!this.has(e)&&this[this.hash[e]]},deletePart:function(t){var e=void 0;if("string"==typeof t)e=t;else{if(!(t.elementDOM&&t.input||t.id.indexOf("line")!==-1))throw"输入参数必须是字符串或者器件对象";e=t.id}if(void 0===this.hash[e])return!1;var n=this.hash[e];this.splice(n,1);for(var r=n;r<this.length;r++)this.hash[this[r].id]--;delete this.hash[e]},deleteParts:function(t){var e=this,n=void 0,r=void 0,a=void 0;"function"==typeof t?n=t:(r=new i(t),n=function(t){return!r.has(t)}),a=this.filter(n),this.deleteAll(),a.forEach(function(t){return e.push(t)})},has:function(t){var e=void 0;return e="string"==typeof t?t.split("-")[0]:t.id,void 0!==this.hash[e]},newId:function(t){var e=t.match(/^[^_]+(_[^_]+)?/),n=e&&e[0];if(!e)throw"器件ID格式错误";var r="",i=void 0;if(n.indexOf("_")===-1)r=n+"_";else{if(!this.has(t))return t;r=n.split("_")[0]+"_"}for(var a=1;a<=c;a++)if(i=r+a,!this.has(i))return i;throw"器件数量超出最大限制"},deleteAll:function(){for(var t=0;t<this.length;t++)this[t].toNormal(),delete this.hash[this[t].id],delete this[t];this.length=0,this.current={}},connectGraph:function(){var t=[],e={};return this.forEach(function(t){return e[t.id]=!0}),this.forEach(function(n){e[n.id]&&!function(){for(var r=new i(n),a=new i;r.length;){var o=r.pop();e[o.id]=!1,a.push(o),o.connect.join(" ").split(" ").forEach(function(t){var n=l.findPart(t);"网络标号"===n.partType||e[n.id]&&!r.has(n)&&r.push(n)})}t.push(a)}()}),t},center:function(){for(var t=[],e=0;e<this.length;e++){var n=this[e].way?this[e].way.nodeCollection():this[e].position.round();t=t.concat(n)}var r=t.map(function(t){return t[0]}),i=t.map(function(t){return t[1]});return[(Math.minOfArray(r)+Math.maxOfArray(r))/2,(Math.minOfArray(i)+Math.maxOfArray(i))/2]},forEach:function(t){for(var e=0;e<this.length;e++)t(this[e],e,this)},every:function(t){for(var e=0;e<this.length;e++)if(!t(this[e],e,this))return!1;return!0},filter:function(t){for(var e=new i,n=0;n<this.length;n++)t(this[n],n,this)&&e.push(this[n]);return e}},(0,o.default)(i.prototype,Array.prototype);var l=new i,p=new i;e.partsAll=l,e.partsNow=p,e.PartsCollection=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return!!(0,h.default)(t).every(function(e){return t[e]})&&"请为每个电路网络设置参考地"}function a(t,e,n,r){var i=e[t],a=[];for(var o in e)e.hasOwnProperty(o)&&e[o]===i&&o!==t&&a.push(o);for(var s=new d.Matrix(1,r),u=0;u<a.length;u++)s[0][n[a[u]]]=Math.pow(-1,parseInt(a[u][a[u].length-1])+1);return s}function o(t,e,n){for(var r=new d.Matrix(1,n),i=0;i<2;i++)e[t[i]]&&(r[0][e[t[i]]-1]=Math.pow(-1,i));return r}function s(t,e){return e[t+"-0"]}function u(t){var e={},n={},r=[],u=[],c=[],l=new v.PartsCollection,p=1,h=0,f=void 0;if(t.forEach(function(t){"line"!==t.partType||l.has(t)||!function(){for(var n=new v.PartsCollection(t);n.length;){var r=n.pop();l.push(r),r.connect.join(" ").split(" ").forEach(function(t){var r=v.partsAll.findPart(t.split("-")[0]);"line"===r.partType?n.has(r)||l.has(r)||n.push(r):t.search("-")!==-1&&(e[t]=p)})}p++}()}),t.forEach(function(t){if("line"===t.partType||"current_meter"===t.partType||"voltage_meter"===t.partType||"reference_ground"===t.partType)return!0;if(y[t.partType]&&y[t.partType].apart){for(var r=y[t.partType].apart.interface,i=y[t.partType].apart.connect,a=y[t.partType].apart.parts,o=0;o<r.length;o++){for(var s=e[t.id+"-"+o],u=0;u<r[o].length;u++)e[t.id+"-"+r[o][u]]=s;delete e[t.id+"-"+o]}for(var c=0;c<i.length;c++){for(var l=0;l<i[c].length;l++)e[t.id+"-"+i[c][l]]=p;p++}for(var f=0;f<a.length;f++){var d=a[f];n[t.id+"-"+d.id+"-0"]=h,n[t.id+"-"+d.id+"-1"]=h,h++}}else n[t.id+"-0"]=h,n[t.id+"-1"]=h,h++}),t.forEach(function(t){if("reference_ground"===t.partType){var n=e[t.id+"-0"];for(var i in e)e.hasOwnProperty(i)&&(e[i]>n?e[i]--:e[i]===n&&(e[i]=0));delete e[t.id+"-0"],l.push(t)}else if("current_meter"===t.partType){var a={};a.name=t.id,a.matrix=[],a.data=[];var o=e[t.id+"-0"];for(var s in e)if(e.hasOwnProperty(s)&&e[s]===o&&s.search("GND")===-1){var u=v.partsAll.findPart(s.split("-")[0]);"voltage_meter"!==u.partType&&"current_meter"!==u.partType&&a.matrix.push(s);
}var c=Math.min(e[t.id+"-0"],e[t.id+"-1"]),p=Math.max(e[t.id+"-0"],e[t.id+"-1"]);for(var h in e)e.hasOwnProperty(h)&&(e[h]===p?e[h]=c:e[h]>p&&e[h]--);r.push(a),l.push(t),delete e[t.id+"-0"],delete e[t.id+"-1"]}}),f=i(e,n))return this.error=f,this;p=function(t){var e=-1;for(var n in t)t.hasOwnProperty(n)&&t[n]>e&&(e=t[n]);return e}(e),t.forEach(function(t){if("voltage_meter"===t.partType){var n={};n.name=t.id,n.data=[],n.matrix=new d.Matrix(1,p),e[t.id+"-0"]&&(n.matrix[0][e[t.id+"-0"]-1]+=1),e[t.id+"-1"]&&(n.matrix[0][e[t.id+"-1"]-1]+=-1),e.hasOwnProperty(t.id+"-0")&&delete e[t.id+"-0"],e.hasOwnProperty(t.id+"-1")&&delete e[t.id+"-1"],u.push(n),l.push(t)}}),t.deleteParts(l),l.deleteAll();for(var g=0;g<r.length;g++){var m=r[g].matrix;r[g].matrix=new d.Matrix(1,h);for(var w=r[g].matrix,b=0;b<m.length;b++){var x=m[b];w[0][n[x]]=Math.pow(-1,parseInt(x[x.length-1])+1)}}var T=new d.Matrix(p,h),M=new d.Matrix(h),_=new d.Matrix(h),k=new d.Matrix(h,1);for(var S in n)if(n.hasOwnProperty(S)){var P=e[S];P&&(T[P-1][n[S]]=Math.pow(-1,parseInt(S[S.length-1])+1))}t.forEach(function(t){!function t(r){var i=s(r.id,n);switch(r.partType){case"ac_voltage_source":M[i][i]=1,k[i][0]="update-"+c.length+"-0";break;case"dc_voltage_source":M[i][i]=1,k[i][0]=r.input[0].toVal();break;case"dc_current_source":_[i][i]=1,k[i][0]=r.input[0].toVal();break;case"resistance":M[i][i]=-1,_[i][i]=r.input[0].toVal();break;case"capacitor":M[i][i]=1,k[i][0]="update-"+c.length+"-0";break;case"VCVS":M[i][i]=1,M[i][n[r.input[1]]]=r.input[0].toVal();break;case"CCCS":var u=r.input[0].toVal();"number"==typeof u&&(u*=-1),_[i][i]=1,_[i][n[r.input[1]]]=u;break;default:for(var l=y[r.partType].apart,f=0;l&&f<l.parts.length;f++){var d=Object.clone(l.parts[f]);d.id=r.id+"-"+d.id,d.input=d.input.map(function(t){return t.search(/^input/)!==-1?r.input[t.split("-")[1]]:t.search(/this/)!==-1?t.replace(/this/g,r.id):t.search(/^update/)!==-1?"update-"+c.length+"-"+t.split("-")[1]:t}),t(d)}}if(y[r.partType]&&y[r.partType].iterative){var v=y[r.partType].iterative.create(r),g=v.describe;g.forEach(function(t){"voltage"===t.name?t.matrix=o(t.place,e,p):"current"===t.name&&(t.matrix=a(t.place,e,n,h))}),c.push(v)}}(t)});var O=d.Matrix.combination([[0,0,T],[T.transpose(),"E",0],[0,M,_]]),C=new d.Matrix(T.row,1).concatDown(new d.Matrix(T.column,1),k);C.forEach(function(t,e){if("string"==typeof t){var n=t.split("-"),r=c[n[1]];r.to[n[2]]={type:C,place:Array.clone(e)}}}),O.forEach(function(t,e){if("string"==typeof t){var n=t.split("-"),r=c[n[1]];r.to[n[2]]={type:O,place:Array.clone(e)}}}),this.factor=O,this.source=C,this.update=c,this.nodeNumber=p,this.branchNumber=h,this.observeCurrent=r,this.observeVoltage=u}Object.defineProperty(e,"__esModule",{value:!0}),e.Solver=void 0;var c=n(125),l=r(c),p=n(104),h=r(p),f=n(67),d=n(128),v=n(123),y={ac_voltage_source:{iterative:{equation:function(t,e,n,r){return function(i){return[t*Math.sin(e*i*Math.PI*2+r/180*Math.PI)+n]}},create:function(t){var e={to:[]};return e.process=y.ac_voltage_source.iterative.equation(t.input[0].toVal(),t.input[1].toVal(),t.input[2].toVal(),t.input[3].toVal()),e.describe=[{name:"time"}],e}}},capacitor:{iterative:{equation:function(t){return function(e,n,r){var i=(e+r.last)/2*n+r.integral;r.last=e,r.integral=i;var a=i/t;return[a]}},create:function(t){var e={save:{last:0,integral:0},to:[]};return e.process=y.capacitor.iterative.equation(t.input[0].toVal()),e.describe=[{name:"current",place:t.id+"-0"},{name:"timeInterval"},{name:"save"}],e}}},diode:{iterative:{equation:function(t,e,n){return function(r){return r>=t?[e,t]:[n,0]}},create:function(t){var e={to:[]};e.process=y[t.partType].iterative.equation(t.input[0].toVal(),t.input[1].toVal(),t.input[2].toVal());var n=y.diode.apart.interface;return e.describe=[{name:"voltage",place:[t.id+"-"+n[1][0],t.id+"-"+n[0][0]]}],e}},apart:{interface:[["R1-0"],["VD1-0"]],connect:[["R1-1","VD1-1"]],parts:[{partType:"resistance",id:"R1",input:["update-0"]},{partType:"dc_voltage_source",id:"VD1",input:["update-1"]}]}},transistor_npn:{iterative:{equation:function(t,e,n,r){return function(i,a){var o=new Array(4).fill(0);return i>=n?(o[0]=n,o[2]=e,a>=r?(o[1]=r,o[3]=-t):(o[1]=0,o[3]=0)):(o[0]=0,o[1]=0,o[2]=5e9,o[3]=0),o}},create:function(t){var e={to:[]};e.process=y[t.partType].iterative.equation(t.input[0].toVal(),t.input[1].toVal(),t.input[2].toVal(),t.input[3].toVal());var n=y.transistor_npn.apart.interface;return e.describe=[{name:"voltage",place:[t.id+"-"+n[0][0],t.id+"-"+n[2][0]]},{name:"voltage",place:[t.id+"-"+n[1][0],t.id+"-"+n[2][0]]}],e}},apart:{interface:[["V1-0"],["V2-0"],["R1-1","I1-1"]],connect:[["R1-0","V1-1"],["I1-0","V2-1"]],parts:[{partType:"dc_voltage_source",id:"V2",input:["update-0"]},{partType:"dc_voltage_source",id:"V1",input:["update-1"]},{partType:"resistance",id:"R1",input:["update-2"]},{partType:"CCCS",id:"I1",input:["update-3","this-R1-0"]}]}},operational_amplifier:{apart:{interface:[["R1-1"],["R1-0"],["R2-0"]],connect:[["R2-1","VD1-0"]],parts:[{partType:"resistance",id:"R1",input:["input-1"]},{partType:"resistance",id:"R2",input:["input-2"]},{partType:"VCVS",id:"VD1",input:["input-0","this-R1-0"]}]}}};u.prototype.solve=l.default.mark(function t(){var e,n,r,i,a,o,s,u,c,p,h,v,y,g,m,w,b,x,T,M,_,k,S,P,O,C,A,N,V;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=(0,f.$)("#endtime").prop("value").toVal(),n=(0,f.$)("#stepsize").prop("value").toVal(),r=Math.round(e/n),i=this.update,a=this.factor,o=this.source,s=this.nodeNumber,u=this.branchNumber,c=this.observeCurrent,p=this.observeVoltage,h=new d.Matrix(this.nodeNumber,1),v=new d.Matrix(this.branchNumber,1),y=void 0,g=void 0,m=0;case 3:if(!(m<=r)){t.next=44;break}g=!1,w=0;case 6:if(!(w<i.length)){t.next=33;break}b=i[w],x=[],T=0;case 10:if(!(T<b.describe.length)){t.next=28;break}M=b.describe[T],t.t0=M.name,t.next="time"===t.t0?15:"timeInterval"===t.t0?17:"voltage"===t.t0?19:"current"===t.t0?21:"save"===t.t0?23:25;break;case 15:return x.push(m*n),t.abrupt("break",25);case 17:return x.push(n),t.abrupt("break",25);case 19:return x.push(M.matrix.mul(h)),t.abrupt("break",25);case 21:return x.push(M.matrix.mul(v)),t.abrupt("break",25);case 23:return x.push(i[w].save),t.abrupt("break",25);case 25:T++,t.next=10;break;case 28:for(_=b.process.apply(b,x),k=0;k<b.to.length;k++)S=b.to[k].type,P=b.to[k].place,S===a&&S[P[0]][P[1]]!==_[k]&&(g=!0),S[P[0]][P[1]]=_[k];case 30:w++,t.next=6;break;case 33:for(!g&&m||(y=a.inverse()),O=y.mul(o),h=O.slice([0,0],[s-1,0]),v=O.slice([s+u,0],[O.length-1,0]),C=0;C<p.length;C++)A=p[C].matrix,p[C].data.push(A.mul(h));for(N=0;N<c.length;N++)V=c[N].matrix,c[N].data.push(V.mul(v));return t.next=41,Math.round(m/Math.round(e/n)*100);case 41:m++,t.next=3;break;case 44:case"end":return t.stop()}},t,this)}),e.Solver=u},function(t,e,n){t.exports=n(126)},function(t,e,n){(function(e){var r="object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this,i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,a=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(127),i)r.regeneratorRuntime=a;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}}).call(e,function(){return this}())},function(t,e,n){(function(e,n){!function(e){"use strict";function r(t,e,n,r){var i=Object.create((e||a).prototype),o=new d(r||[]);return i._invoke=p(t,n,o),i}function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function a(){}function o(){}function s(){}function u(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function c(t){this.arg=t}function l(t){function e(n,r,a,o){var s=i(t[n],t,r);if("throw"!==s.type){var u=s.arg,l=u.value;return l instanceof c?Promise.resolve(l.arg).then(function(t){e("next",t,a,o)},function(t){e("throw",t,a,o)}):Promise.resolve(l).then(function(t){u.value=t,a(u)},o)}o(s.arg)}function r(t,n){function r(){return new Promise(function(r,i){e(t,n,r,i)})}return a=a?a.then(r,r):r()}"object"==typeof n&&n.domain&&(e=n.domain.bind(e));var a;this._invoke=r}function p(t,e,n){var r=_;return function(a,o){if(r===S)throw new Error("Generator is already running");if(r===P){if("throw"===a)throw o;return y()}for(;;){var s=n.delegate;if(s){if("return"===a||"throw"===a&&s.iterator[a]===g){n.delegate=null;var u=s.iterator.return;if(u){var c=i(u,s.iterator,o);if("throw"===c.type){a="throw",o=c.arg;continue}}if("return"===a)continue}var c=i(s.iterator[a],s.iterator,o);if("throw"===c.type){n.delegate=null,a="throw",o=c.arg;continue}a="next",o=g;var l=c.arg;if(!l.done)return r=k,l;n[s.resultName]=l.value,n.next=s.nextLoc,n.delegate=null}if("next"===a)n.sent=n._sent=o;else if("throw"===a){if(r===_)throw r=P,o;n.dispatchException(o)&&(a="next",o=g)}else"return"===a&&n.abrupt("return",o);r=S;var c=i(t,e,n);if("normal"===c.type){r=n.done?P:k;var l={value:c.arg,done:n.done};if(c.arg!==O)return l;n.delegate&&"next"===a&&(o=g)}else"throw"===c.type&&(r=P,a="throw",o=c.arg)}}}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function v(t){if(t){var e=t[b];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(m.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=g,e.done=!0,e};return r.next=r}}return{next:y}}function y(){return{value:g,done:!0}}var g,m=Object.prototype.hasOwnProperty,w="function"==typeof Symbol?Symbol:{},b=w.iterator||"@@iterator",x=w.toStringTag||"@@toStringTag",T="object"==typeof t,M=e.regeneratorRuntime;if(M)return void(T&&(t.exports=M));M=e.regeneratorRuntime=T?t.exports:{},M.wrap=r;var _="suspendedStart",k="suspendedYield",S="executing",P="completed",O={},C=s.prototype=a.prototype;o.prototype=C.constructor=s,s.constructor=o,s[x]=o.displayName="GeneratorFunction",M.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},M.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(C),t},M.awrap=function(t){return new c(t)},u(l.prototype),M.async=function(t,e,n,i){var a=new l(r(t,e,n,i));return M.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},u(C),C[b]=function(){return this},C[x]="Generator",C.toString=function(){return"[object Generator]"},M.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},M.values=v,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return a.type="throw",a.arg=t,n.next=e,!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var o=m.call(i,"catchLoc"),s=m.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?this.next=i.finallyLoc:this.complete(a),O},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),f(n),O}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;f(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:v(t),resultName:e,nextLoc:n},O}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,function(){return this}(),n(1))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t instanceof Array){var r=i.isMatrix(t);if(!r)throw"数组格式错误，无法创建矩阵";for(var a=0;a<t.length;a++)this[a]=Array.clone(t[a]);this.row=r[0],this.column=r[1],this.length=this.row}else{if("I"===e||"E"===e||"I"===n||"E"===n){for(var o=0;o<t;o++)this[o]=new Array(t).fill(0),this[o][o]=1;e=t}else for(var s=0;s<t;s++)this[s]=new Array(e).fill(n);this.row=t,this.column=e,this.length=t}(0,l.default)(this,{row:{configurable:!1,enumerable:!1,writable:!1},column:{configurable:!1,enumerable:!1,writable:!1},length:{configurable:!1,enumerable:!1,writable:!1}}),Object.sealAll(this)}Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix=void 0;var a=n(100),o=r(a),s=n(2),u=r(s),c=n(110),l=r(c);i.prototype={constructor:i,exchange:function(t,e){if(t[0]!==e[0]){var n=this[t[0]];this[t[0]]=this[e[0]],this[e[0]]=n}if(t[1]!==e[1])for(var r=0;r<this.length;r++){var i=this[r][t[1]];this[r][t[1]]=this[r][e[1]],this[r][e[1]]=i}},mul:function(t){var e=t instanceof i?t:new i(t);if(this.column!==e.row)throw"这两个矩阵无法相乘";for(var n=this.row,r=e.column,a=new i(n,r),o=0;o<n;o++)for(var s=0;s<r;s++)for(var u=0;u<this.column;u++)a[o][s]+=this[o][u]*e[u][s];return 1===n&&1===r?a[0][0]:a},multo:function(t){var e=t instanceof i?t:new i(t);return this.mul.call(e,this)},luDecompose:function(){if(this.row!==this.column)throw"这不是行列式，无法三角分解";for(var t=this.row,e=i.clone(this),n=new i(t),r=new i(t,"E"),a=0;a<t;a++){if(a>0)for(var o=a;o<t;o++){n[o][a-1]=e[o][a-1]/e[a-1][a-1];for(var s=a;s<t;s++)e[o][s]-=n[o][a-1]*e[a-1][s];e[o][a-1]=0}if(a<t-1){for(var u=0,c=0,l=a;l<t;l++)Math.abs(e[l][a])>u&&(u=Math.abs(e[l][a]),c=l);n.exchange([a,0],[c,0]),e.exchange([a,0],[c,0]),r.exchange([a,0],[c,0])}}for(var p=0;p<t;p++)n[p][p]=1;return[n,e,r]},inverse:function(){for(var t=this.luDecompose(),e=(0,u.default)(t,3),n=e[0],r=e[1],a=e[2],o=this.row,s=0;s<r.row;s++)if(!r[s][s])throw"逆矩阵不存在";for(var c=new i(o),l=new i(o),p=0;p<o;p++){l[p][p]=1/r[p][p];for(var h=p-1;h>=0;h--){for(var f=0,d=h+1;d<=p;d++)f+=r[h][d]*l[d][p];l[h][p]=-f/r[h][h]}}for(var v=0;v<o;v++){c[v][v]=1;for(var y=v+1;y<o;y++)for(var g=v;g<=y-1;g++)c[y][v]-=n[y][g]*c[g][v]}var m=l.mul(c).mul(a);return m},forEach:function(t){if(this instanceof i)for(var e=0;e<this.row;e++)for(var n=0;n<this.column;n++)t(this[e][n],[e,n],this);else{if(!(this instanceof Array))throw"只有矩阵或者类似矩阵的数组才能调用此方法";var r=i.isMatrix(this);if(!r)throw"只有矩阵或者类似矩阵的数组才能调用此方法";for(var a=0;a<r[0];a++)for(var o=0;o<r[1];o++)t(this[a][o],[a,o],this)}},transpose:function(){for(var t=new i(this.column,this.row),e=0;e<this.row;e++)for(var n=0;n<this.column;n++)t[n][e]=this[e][n];return t},concatRight:function(){for(var t=i.clone(this),e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var a=function(e){var r=n[e],a=i.isMatrix(r),o=a?a:[],s=(0,u.default)(o,2),c=s[0],l=s[1];if(!c)throw"无法串联矩阵";var p=new i(c,t.column+l);t.forEach(function(t,e){var n=(0,u.default)(e,2),r=n[0],i=n[1];return p[r][i]=t}),i.prototype.forEach.call(r,function(e,n){var r=(0,u.default)(n,2),i=r[0],a=r[1];return p[i][a+t.column]=e}),t=p},o=0;o<n.length;o++)a(o);return t},concatDown:function(){for(var t=i.clone(this),e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var a=function(e){var r=n[e],a=i.isMatrix(r),o=a?a:[],s=(0,u.default)(o,2),c=s[0],l=s[1];if(!c)throw"无法串联矩阵";var p=new i(t.row+c,l);t.forEach(function(t,e){var n=(0,u.default)(e,2),r=n[0],i=n[1];return p[r][i]=t}),i.prototype.forEach.call(r,function(e,n){var r=(0,u.default)(n,2),i=r[0],a=r[1];return p[i+t.row][a]=e}),t=p},o=0;o<n.length;o++)a(o);return t},slice:function(t,e){if(!(t instanceof Array)||2!==t.length||"number"!=typeof t[0]||"number"!=typeof t[1]||!(e instanceof Array)&&2!==e.length||"number"!=typeof e[0]||"number"!=typeof e[1]||t[0]<0||e[0]<0||t[1]<0||e[1]<0||t[0]>this.row||e[0]>this.row||t[1]>this.column||e[1]>this.column)throw"输入坐标错误";var n=[],r=[],a=t[0]<e[0]?[t[0],e[0]]:[e[0],t[0]],o=(0,u.default)(a,2);n[0]=o[0],r[0]=o[1];var s=t[1]<e[1]?[t[1],e[1]]:[e[1],t[1]],c=(0,u.default)(s,2);n[1]=c[0],r[1]=c[1];for(var l=new i(r[0]-n[0]+1,r[1]-n[1]+1),p=n[0];p<=r[0];p++)for(var h=n[1];h<=r[1];h++)l[p-n[0]][h-n[1]]=this[p][h];return l},vision:function(){for(var t=0;t<this.row;t++)console.log(this[t].join(","))}},i.extend({isMatrix:function(t){if(t instanceof i)return[t.row,t.column];var e=-1,n=-1;for(var r in t)if(t.hasOwnProperty(r)){if(!(parseInt(r)-e===1&&t[r]instanceof Array))return!1;var a=t[r],o=-1;for(var s in a)if(a.hasOwnProperty(s)){if(parseInt(s)-o!==1||"number"!=typeof a[s])return!1;o++}if(n===-1)n=o;else if(n!==o)return!1;e++}return[e+1,n+1]},combination:function(t){if(!(t&&t instanceof Array))throw"无法组合矩阵";for(var e=0;e<t.length-1;e++)if(!(t[e]&&t[e]instanceof Array&&t[e+1]instanceof Array&&t[e].length===t[e+1].length))throw"无法组合矩阵";for(var n=[],r=0;r<t.length;r++){for(var a=void 0,o=0;o<t[r].length;o++)if("number"!=typeof t[r][o]&&"string"!=typeof t[r][o]){var s=void 0;if(s=t[r][o]instanceof i?t[r][o].row:Object.isMatrix(t[r][o])[0],void 0!==a&&a!==s)throw"无法组合矩阵";a=s}n.push(a)}for(var u=[],c=0;c<t[0].length;c++){for(var l=void 0,p=0;p<t.length;p++)if("number"!=typeof t[p][c]&&"string"!=typeof t[p][c]){var h=void 0;if(h=t[p][c]instanceof i?t[p][c].column:Object.isMatrix(t[p][c])[1],void 0!==l&&l!==h)throw"无法组合矩阵";l=h}u.push(l)}for(var f=void 0,d=0;d<t.length;d++){for(var v=void 0,y=0;y<t[d].length;y++){var g=void 0;g=t[d][y]instanceof i&&t[d][y]instanceof Array?t[d][y]:new i(n[d],u[y],t[d][y]),v=v?v.concatRight(g):g}f=f?f.concatDown(v):v}return f},clone:function(t){if(!(t instanceof i))throw"只有矩阵才能调用此方法";var e=new i(t.row,t.column);return t.forEach(function(t,n){var r=(0,u.default)(n,2),i=r[0],a=r[1];return e[i][a]=t}),e}}),(0,o.default)(i.prototype,Array.prototype),e.Matrix=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return Math.floor(t/50)}function a(t){if(!t)return 1;var e=t/Math.abs(t),n=t.rank(),r=Math.abs(t).toSFixed(2),i=Math.floor(r/n),a=(t*e/n-i).toSFixed(),o=void 0;return o=i<3?a<.2?.2:a<.5?.5:1:i>2&&i<5&&a<.5?.5:1,(n*(i+o)*e).toSFixed()}function o(t,e,n){for(var r=t.rank(),i=(t/r).toSFixed(),a=Math.abs(e/r).toSFixed(),o=[],s=1;s<2*n;s++){var u=(i/s).toSFixed(8),c=(a/u).toSFixed(8);u===parseFloat(u.toFixed(5))&&c===Math.floor(c)&&o.push(s+c)}if(!o.length)for(var l=(i+a).toSFixed(),p=1;p<2*n;p++){var h=(l/p).toSFixed(8);h===parseFloat(h.toFixed(5))&&o.push(p)}return o.length?o.reduce(function(t,e){return Math.abs(t-n)<Math.abs(e-n)?t:e}):n}function s(t,e){var n=void 0,r=void 0,s=i(e);if(t[0]===t[1]){var u=Math.abs(t[0]),c=u.rank(),l=Math.floor(u/c),p=l===(u/c).toSFixed()?l-1:l,h=p+2;return t[0]>0?(n=(p*c).toSFixed(),r=(h*c).toSFixed()):(n=-(h*c).toSFixed(),r=-(p*c).toSFixed()),[n,r,o(r-n,0,s)]}if(t[0]*t[1]<=0){var f=Math.max(Math.abs(t[0]),Math.abs(t[1])),d=Math.min(Math.abs(t[0]),Math.abs(t[1])),v=a(f),y=(2*a((v+d)/2)-v).toSFixed();return Math.abs(t[0])<Math.abs(t[1])?(n=-y,r=v):(n=-v,r=y),[n,r,o(r,n,s)]}var g=Math.min(Math.abs(t[0]),Math.abs(t[1])),m=2*a(Math.abs(t[0]-t[1])/2),w=o(m,0,s),b=Math.floor(g/(m/w))*(m/w);return t[0]<0?(n=-(m+b),r=-b):(n=b,r=m+b),[n,r,w]}function u(t,e){for(var n=Math.maxOfArray(e),r=Math.minOfArray(e);t[1]<r;)t.splice(0,1);for(t[0]=r;t[t.length-2]>n;)t.pop();t[t.length-1]=n}function c(t){if(!(t&&t.attributes&&t.nodeName))throw"输入必须是canvas元素";this.elementDOM=t,this.ctx=t.getContext("2d"),this.length={width:parseInt(t.getAttribute("width")),height:parseInt(t.getAttribute("Height"))},this.clear()}function l(t,e,n){this.elementDOM=(0,v.$)(e),this.type=n,this.output=t,this.long={},this.time=(0,v.$)("#endtime").prop("value").toVal(),this.stepTime=(0,v.$)("#stepsize").prop("value").toVal();var r=80,i=10,a=70,o=this.elementDOM.width(),s=this.elementDOM.height();this.long.waveWidth=o-r-10,this.long.waveHeight=s-a-i,this.long.waveRound=[[r,i],[r,i+this.long.waveHeight],[r+this.long.waveWidth,i+this.long.waveHeight],[r+this.long.waveWidth,i]];var u=[Math.minOfArray(t.map(function(t){return Math.minOfArray(t.data)})),Math.maxOfArray(t.map(function(t){return Math.maxOfArray(t.data)}))];this.drawBackground([0,this.time],u,!0);for(var c=0;c<t.length;c++)this.elementDOM.append((0,v.$)("<canvas>",{class:"graph-canvas",width:this.long.waveWidth-2,Height:this.long.waveHeight-2,id:"graph-"+this.output[c].name,style:"position: absolute; left: 81px; top: 11px; display: block"}));this.drawCurve();for(var l=0;l<this.output.length;l++)this.output[l].status=!0;var p=this.elementDOM.append((0,v.$)("<div>",{class:"graph-action",style:"position: absolute; left: 80px; top: 10px;width: "+this.long.waveWidth+"px; Height: "+this.long.waveHeight+"px;"}));p.append((0,v.$)("<canvas>",{class:"graph-action-canvas",width:this.long.waveWidth,Height:this.long.waveHeight,style:"position: absolute; left: 0px; top: 0px;"}));for(var h=0;h<this.output.length+1;h++)p.append((0,v.$)("<div>",{class:"graph-action-tip",style:"position: absolute; display: none;"}));p.append((0,v.$)("<div>",{class:"graph-action-cover",style:"position: absolute; left: 0px; top: 0px;width: "+this.long.waveWidth+"px; Height: "+this.long.waveHeight+"px;"})),this.createTable()}Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;var p=n(2),h=r(p),f=n(68),d=r(f),v=n(67),y=["#50B4C8","#F0A050","#50C850"],g="#66CCCC",m=(0,v.$)("#graph-page"),w=void 0;c.prototype={attributesBackUp:function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=this.ctx[n],this.ctx[n]=t[n]);return e},attributesAssignment:function(t){for(var e in t)t.hasOwnProperty(e)&&(this.ctx[e]=t[e])},attributesDefault:function(){var t={fillStyle:"#000000",font:"10px sans-serif",globalAlpha:1,globalCompositeOperation:"source-over",imageSmoothingEnabled:!0,lineCap:"butt",lineDashOffset:0,lineJoin:"miter",lineWidth:1,miterLimit:10,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)",shadowOffsetX:0,shadowOffsetY:0,strokeStyle:"#000000",textAlign:"start",textBaseline:"alphabetic"};for(var e in t)t.hasOwnProperty(e)&&(this.ctx[e]=t[e])},line:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=void 0;n&&(r=this.attributesBackUp(e)),this.ctx.beginPath(),this.ctx.moveTo(t[0][0],t[0][1]);for(var i=1;i<t.length;i++)this.ctx.lineTo(t[i][0],t[i][1]);this.ctx.stroke(),n&&this.attributesAssignment(r)},fillRect:function(t,e,n){"object"===("undefined"==typeof t?"undefined":(0,d.default)(t))&&e===w&&n===w&&(n=t,t=[0,0],e=[this.length.width,this.length.height]);var r=this.attributesBackUp(n);this.ctx.fillRect(t[0],t[1],e[0],e[1]),this.attributesAssignment(r)},strokeRect:function(t,e,n){var r=this.attributesBackUp(n);this.ctx.strokeRect(t[0],t[1],e[0],e[1]),this.attributesAssignment(r)},circle:function(t,e,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=void 0;i&&(a=this.attributesBackUp(r)),this.ctx.beginPath(),this.ctx.arc(t,e,n,0,2*Math.PI,!0),this.ctx.fill(),i&&this.attributesAssignment(a)},clear:function(t,e){t===w||e===w?this.ctx.clearRect(0,0,this.length.width,this.length.height):this.ctx.clearRect(t[0],t[1],e[0],e[1])},toDataURL:function(){var t;return(t=this.elementDOM).toDataURL.apply(t,arguments)},toText:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=void 0;r&&(i=this.attributesBackUp(n)),this.ctx.fillText(t,e[0],e[1]),r&&this.attributesAssignment(i)},drawImage:function(){var t;(t=this.ctx).drawImage.apply(t,arguments)}},l.prototype={drawBackground:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.long.waveWidth,i=this.long.waveHeight,a=this.long.waveRound,o=this.elementDOM.childSelect("canvas.graph-background",1,{width:this.elementDOM.width()+"px",height:this.elementDOM.height()+"px",style:"position: absolute; left: 0px; top: 0px;"});this.axisList=[];var l=new c(o[0]);l.fillRect(a[0],[r,i],{fillStyle:"#fffdf6"}),l.line(a.slice(1,4),{shadowOffsetX:2,shadowOffsetY:2,shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.7)",strokeStyle:"#999999"}),l.line(a.slice(0,2),{shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.7)",strokeStyle:"#999999"}),l.attributesAssignment({strokeStyle:"#cccccc",lineWidth:1});for(var p=0;p<2;p++){for(var f=[t,e][p],d=[this.long.waveWidth,this.long.waveHeight][p],v=s(f,d),y=(0,h.default)(v,3),g=y[0],m=y[1],w=y[2],b=(m-g).toSFixed(),x=(b/w).toSFixed(),T=[g];T[T.length-1]<m;)T.push((T[T.length-1]+x).toSFixed());n||u(T,f),this.drawGrid(p,T,l),this.axisList[p]=T}l.attributesDefault(),l.strokeRect(a[0],[r,i],{strokeStyle:"#999999",lineWidth:2})},drawGrid:function(t,e,n){var r=this.long.waveRound,i=[{name:"graph-bottomList",way:function(t){return[[r[0][0]+Math.round(t)+.5,r[0][1]],[r[0][0]+Math.round(t)+.5,r[1][1]+5]]},tagStyle:function(t){return"top: 8px; transform: rotate(35deg); left: "+(r[0][0]+t-10)+"px"},signStyle:r[2][0]+10+"px"},{name:"graph-leftList",way:function(t){return[[r[2][0],r[1][1]-Math.round(t)-.5],[r[1][0]-4,r[1][1]-Math.round(t)-.5]]},tagStyle:function(t){return"right: 0px; top: "+(r[1][1]-t-9)+"px"},signStyle:"75px"}],a=this.elementDOM.childSelect("div."+i[t].name,1),o=a.childSelect("div.axis-number",e.length),s=a.childSelect("div.axis-unit",1),u=[this.long.waveWidth,this.long.waveHeight][t]/(e[e.length-1]-e[0]),c=Math.maxOfArray(e).toShort(),l=c.rank,p=c.number.powRank(),h=t?"voltage"===this.type?"V":"A":"s";s.text(c.unit+h),s.attr("style","left:"+i[t].signStyle);for(var f=0;f<e.length;f++){var d=e[f-1]?Math.round((e[f-1]-e[0])*u)-.5:-30,v=Math.round((e[f]-e[0])*u)-.5;n.line(i[t].way(v)),v-d>20?o.get(f).attr("style",i[t].tagStyle(v)).text((e[f]*l).toSFixed().toFixed(4-p)):o.get(f).remove()}},drawCurve:function(){for(var t=this.backgroundStartToEnd(),e=(0,h.default)(t,4),n=e[0],r=e[1],i=e[2],a=e[3],o=this.long.waveWidth/(r-n).toSFixed(),s=this.long.waveHeight/(a-i).toSFixed(),u=this.time/(this.output[0].data.length-1),l=0;l<this.output.length;l++){for(var p=this.output[l].name,f=this.output[l].data,d=[],v=0;v<f.length;v++)d.push([o*(v*u-n),this.long.waveHeight-s*(f[v]-i)-1.25]);var g=new c(document.getElementById("graph-"+p));g.clear(),g.line(d,{strokeStyle:y[l],lineWidth:2.5})}},createTable:function(){for(var t=this.elementDOM.append((0,v.$)("<table>",{class:"graph-table-legend"})).append((0,v.$)("<tbody>")),e=0;e<this.output.length;e++){var n=t.append((0,v.$)("<tr>",{class:"graph-table-row",id:"table-legend-"+this.output[e].name}));n.append((0,v.$)("<td>",{class:"graph-table-swatch-column"})).append((0,v.$)("<div>",{class:"table-legend-swatch-outline"})).append((0,v.$)("<div>",{class:"table-legend-swatch",style:"border-color:"+y[e]+";background-color: "+y[e]+";"}));var r=n.append((0,v.$)("<td>",{class:"graph-table-legend graph-table-legend-label"})),i=this.output[e].name.split("_");i[1]?r.text(i[0]+"("+i[1]+")"):r.inner(i[0])}},drawMove:function(t,e){var n=new c(this.elementDOM[0].querySelector(".graph-action-canvas"));n.clear(),n.line([[t,0],[t,this.long.waveHeight]],{strokeStyle:"#bbbbbb",lineWidth:1});var r=this.backgroundStartToEnd(),i=(0,h.default)(r,4),a=i[0],o=i[1],s=i[2],u=i[3],l=this.stepTime,p=this.long.waveWidth,f=this.long.waveHeight,d=5,g=(o-a)/p,m=Math.round(((t-d<2?2:t-d)*g+a)/l),w=Math.round(((t+d>p-2?p-2:t+d)*g+a)/l),b=(u-s)/f,x=u-(e-d<2?2:e-d)*b,T=u-(e+d>f-2?f-2:e+d)*b,M=1/0,_=-1;if("number"==typeof e){for(var k=0;k<this.output.length;k++)if(this.output[k].status)for(var S=this.output[k].data,P=m;P<=w;P++)if(S[P]>T&&S[P]<x){var O=(P*l-a)/g,C=(u-S[P])/b,A=Math.abs(O-t)+Math.abs(C-e);A<M&&(M=A,_=P)}}else"string"==typeof e&&e.search("index:")!==-1&&(_=Number(e.split(":")[1]));var N=(0,v.$)(".graph-action-tip",this.elementDOM),V="voltage"===this.type?"V":"A";if(_!==-1){N.attr("style","position:absolute; display: block");for(var E=(_*l-a)/g,$=0;$<this.output.length;$++){var L=this.output[$].data[_];if(this.output[$].status&&L<u&&L>s){var D=(u-L)/b;n.circle(E,D,5,{fillStyle:y[$]}),N.get($).text(L.toShort(5).txt+V).css({right:p-E+"px",bottom:f-D+"px"})}else N.get($).attr("style","display: none")}return N.get(-1).text((_*l).toShort(5).txt+"s").css({right:p-E+"px",bottom:"0px"}),"index:"+_}return N.attr("style","display: none"),!1},clearActionCanvas:function(){var t=(0,v.$)(".graph-action-canvas",this.elementDOM)[0],e=t.getContext("2d");e.clearRect(0,0,this.long.waveWidth,this.long.waveHeight),(0,v.$)(".graph-action-tip",this.elementDOM).attr("style","display: none")},drawSelect:function(t,e){e.drawer||(e.drawer=new c(e.canvas),e.offset=(0,v.$)(e.canvas).offset((0,v.$)("div#graph-page")));var n=2,r=e.drawer,i=e.drawer.length,a=[t.offsetX-e.offset[0],t.offsetY-e.offset[1]];if(t.target!==t.currentTarget){for(var o=t.target;"div"!==o.tagName.toLowerCase();)o=o.parentNode;for(;o!==t.currentTarget;)a[0]+=o.offsetLeft,a[1]+=o.offsetTop,o=o.parentNode}var s=Math.min(e.start[0],a[0]),u=Math.max(e.start[0],a[0]),l=Math.min(e.start[1],a[1]),p=Math.max(e.start[1],a[1]);s<n&&(s=n),l<n&&(l=n),u>i.width-n&&(u=i.width-n),p>i.height-n&&(p=i.height-n);var h=[s,l],f=[u-s,p-l];r.clear(),r.fillRect({fillStyle:"rgba(187,187,187,0.5)"}),r.clear(h,f),r.strokeRect(h,f,{strokeStyle:"#aaaaaa"}),e.select=[s,l,u,p]},backgroundStartToEnd:function(){return[this.axisList[0][0],this.axisList[0][this.axisList[0].length-1],this.axisList[1][0],this.axisList[1][this.axisList[1].length-1]]},pixel2Value:function(t){var e=this.backgroundStartToEnd(),n=(0,h.default)(e,4),r=n[0],i=n[1],a=n[2],o=n[3],s=(i-r).toSFixed()/this.long.waveWidth,u=(o-a).toSFixed()/this.long.waveHeight,c=[t[0],t[2]].map(function(t){return(t*s+r).toSFixed(4)}),l=[t[3],t[1]].map(function(t){return(o-t*u).toSFixed(4)});return[c,l]}},l.toImage=function(){if(m.attr("class").search("visionAll")===-1)throw"波形界面尚未打开，无法转换";var t=new c((0,v.$)("<canvas>",{style:"display: none",height:m.height()+"px",width:m.width()+"px"})[0]);t.fillRect([0,0],[t.length.width,t.length.height],{fillStyle:g}),(0,v.$)("div#graph-title span").each(function(e){var n=(0,v.$)(e),r=n.offset(m),i=[r[0],r[1]+15.5];t.toText(n.text(),i,{font:"16px Microsoft YaHei"})}),t.attributesAssignment({font:"10px Arial"}),(0,v.$)("div.graph-individual div.graph-leftList div.axis-number, div.graph-individual div.axis-unit").each(function(e){var n=(0,v.$)(e),r=n.offset(m),i=[r[0],r[1]+10.5];t.toText(n.text(),i,{},!1)}),(0,v.$)("div.graph-individual canvas.graph-background, div.graph-individual canvas.graph-individual, div.graph-individual canvas.graph-canvas").each(function(e){var n=(0,v.$)(e).offset(m);t.drawImage(e,n[0],n[1])}),t.attributesDefault(),(0,v.$)("div.graph-individual tbody").each(function(e){var n=(0,v.$)(e),r=n.offset(m).map(function(t){return t+.5}),i=[n.innerWidth(),n.innerHeight()];t.fillRect(r,i,{fillStyle:"rgba(255, 255, 255, 0.6)"}),t.strokeRect(r,i,{strokeStyle:"#cccccc",lineWidth:1}),(0,v.$)("div.table-legend-swatch-outline",e).each(function(e,n){var r=(0,v.$)(e),i=r.offset(m).map(function(t){return t+1.5}),a=[r.innerWidth()+1,r.innerHeight()+1];n&&(i[1]-=1),t.strokeRect(i,a,{strokeStyle:"#cccccc",
lineWidth:1})}),(0,v.$)("div.table-legend-swatch",e).each(function(e,n){var r=(0,v.$)(e),i=r.offset(m).map(function(t){return t+1}),a=[2*e.clientLeft,2*e.clientTop];n&&(i[1]-=1),t.fillRect(i,a,{fillStyle:r.attr("style").split(";")[0].split(":")[1]})}),(0,v.$)("td.graph-table-legend.graph-table-legend-label",e).each(function(e,n){var r=(0,v.$)(e),i=r.offset(m);i[0]+=1,n?i[1]+=12:i[1]+=13,t.toText(r.text(),i,{font:"10px Arial",fillStyle:"#696969"})})}),t.attributesAssignment({font:"10px Arial"});var e=35/180*Math.PI;return t.ctx.rotate(e),(0,v.$)(".graph-bottomList .axis-number").each(function(n){var r=(0,v.$)(n),i=r.offset(m),a=i[0]/Math.cos(e),o=i[0]*Math.tan(e),s=i[1]-o,u=s*Math.sin(e);t.toText(r.text(),[a+u,s*Math.cos(e)],{},!1)}),t.toDataURL()},e.Graph=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.styleRule=void 0;var i=n(131),a=r(i),o=n(132),s=r(o),u=n(67),c=function(){function t(e){(0,a.default)(this,t);for(var n=document.styleSheets,r=-1,i=0;i<n.length;i++)if(n[i].href||(r=i),n[i].cssRules)for(var o=0;o<n[i].cssRules.length;o++)if(n[i].cssRules[o].name===e)return this.original=n[i].cssRules[o],this;if(r===-1){var s=(0,u.$)("head");s.append((0,u.$)("<style>")),n=document.styleSheets,r=n.length-1}var c=n[r];return c.insertRule("@keyframes "+e+"{}",c.cssRules.length),this.original=c.cssRules[c.cssRules.length-1],this}return(0,s.default)(t,[{key:"setRule",value:function(t,e){var n=this.original;n.deleteRule(t);var r="";for(var i in e)e.hasOwnProperty(i)&&(r+=i+":"+e[i]+";");r=t+" {"+r+"}",n.appendRule(r)}}]),t}();e.styleRule=c},function(t,e){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(59),a=r(i);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=t.partType||t;if(this.extend(Object.clone(T[e].readWrite)),(0,p.default)(this,T[e].readOnly),"object"===("undefined"==typeof t?"undefined":(0,c.default)(t))){var n=Object.clone(t);delete n.partType,this.extend(n)}this.id=m.partsAll.newId(this.id),this.rotate=this.rotate?new d.Matrix(this.rotate):new d.Matrix([[1,0],[0,1]]),this.position=this.position?(0,f.Point)(this.position):(0,f.Point)([-5e3,-5e4]),this.connect=this.connect||Array(this.pointInfor.length).fill(""),this.input=this.input||[],this.current={},this.circle=[],this.elementDOM=this.createPart(),this.move();for(var r=0;r<this.pointInfor.length;r++)this.circle[r]=(0,h.$)("#"+this.id+"-"+r,this.elementDOM),this.setConnect(r);this.textVisition(this.text||[10,-10]),delete this.text,(0,s.default)(this),m.partsAll.push(this)}function a(t){if(!(t instanceof Array)){var e=Number(t);return{left:e,right:e,top:e,bottom:e}}return 2===t.length?{top:t[0],bottom:t[0],left:t[1],right:t[1]}:4===t.length?{top:t[0],right:t[1],bottom:t[2],left:t[3]}:void 0}Object.defineProperty(e,"__esModule",{value:!0}),e.PartClass=void 0;var o=n(62),s=r(o),u=n(68),c=r(u),l=n(100),p=r(l),h=n(67),f=n(108),d=n(128),v=n(87),y=n(107),g=n(130),m=n(123),w=void 0,b=(0,h.$)("#area-of-parts"),x=[new d.Matrix([[0,1],[-1,0]]),new d.Matrix([[0,-1],[1,0]]),new d.Matrix([[1,0],[0,-1]]),new d.Matrix([[-1,0],[0,1]])],T={resistance:{readWrite:{id:"R_",input:["10k"]},readOnly:{partType:"resistance",inputTxt:["阻值："],parameterUnit:["Ω"],visionNum:2,txtLocate:14,padding:[0,1],margin:1,pointInfor:[{position:[-40,0],direction:[-1,0]},{position:[40,0],direction:[1,0]}],aspectInfor:[{name:"path",attribute:{d:"M-40,0H-24L-20,-9L-12,9L-4,-9L4,9L12,-9L20,9L24,0H40"}},{name:"rect",attribute:{x:"-30",y:"-13",width:"60",height:"26",class:"focus-part"}}],introduction:"电阻器"}},capacitor:{readWrite:{id:"C_",input:["100u"]},readOnly:{partType:"capacitor",inputTxt:["电容量："],parameterUnit:["F"],visionNum:2,pointInfor:[{position:[-40,0],direction:[-1,0]},{position:[40,0],direction:[1,0]}],padding:[0,1],margin:1,txtLocate:22,aspectInfor:[{name:"path",attribute:{d:"M5,0H40M-40,0H-5M-5,-16V16M5,-16V16"}},{name:"rect",attribute:{x:"-30",y:"-15",width:"60",height:"30",class:"focus-part"}}],introduction:"电容器"}},inductance:{readWrite:{id:"L_",input:["10u"]},readOnly:{partType:"inductance",inputTxt:["电感量："],parameterUnit:["H"],visionNum:2,pointInfor:[{position:[-40,0],direction:[-1,0]},{position:[40,0],direction:[1,0]}],padding:[0,1],margin:1,txtLocate:13,aspectInfor:[{name:"path",attribute:{d:"M-40,0H-24M24,0H40M-24,0Q-18,-12,-12,0M-12,0Q-6,-12,0,0M0,0Q6,-12,12,0M12,0Q18,-12,24,0"}},{name:"rect",attribute:{x:"-30",y:"-10",width:"60",height:"15",class:"focus-part"}}],introduction:"电感器"}},dc_voltage_source:{readWrite:{id:"V_",input:["12"]},readOnly:{partType:"dc_voltage_source",inputTxt:["电压值："],parameterUnit:["V"],visionNum:2,pointInfor:[{position:[0,-40],direction:[0,-1]},{position:[0,40],direction:[0,1]}],padding:1,margin:[1,0],txtLocate:20,aspectInfor:[{name:"path",attribute:{d:"M0,-40V-5M0,5V40M-16,-5H16M-10.5,5H10.5M-10,-12H-5M-7.5,-15V-9"}},{name:"rect",attribute:{x:"-16",y:"-30",width:"32",height:"60",class:"focus-part"}}],introduction:"直流电压源"}},ac_voltage_source:{readWrite:{id:"V_",input:["220","50","0","0"]},readOnly:{partType:"ac_voltage_source",inputTxt:["峰值电压：","频率：","偏置电压：","相位角："],parameterUnit:["V","Hz","V","°"],visionNum:3,pointInfor:[{position:[0,-40],direction:[0,-1]},{position:[0,40],direction:[0,1]}],padding:1,margin:[1,0],txtLocate:24,aspectInfor:[{name:"circle",attribute:{cx:"0",cy:"0",r:"19",class:"white-fill"}},{name:"path",attribute:{d:"M0,-40V-19.5M0,19.5V40M0,-16V-8M-4,-12H4M-4,15H4M-10,0Q-5,-10,0,0M0,0Q5,10,10,0"}},{name:"rect",attribute:{x:"-20",y:"-30",width:"40",height:"60",class:"focus-part"}}],introduction:"交流电压源"}},dc_current_source:{readWrite:{id:"I_",input:["10"]},readOnly:{partType:"dc_current_source",inputTxt:["电流值："],parameterUnit:["A"],visionNum:2,pointInfor:[{position:[0,40],direction:[0,1]},{position:[0,-40],direction:[0,-1]}],padding:[1,0],margin:1,txtLocate:20,aspectInfor:[{name:"circle",attribute:{cx:"0",cy:"0",r:"19",class:"white-fill"}},{name:"path",attribute:{d:"M0,-40V-20M0,20V40M0,-12V12"}},{name:"polygon",attribute:{points:"0,-14 -5,-4 0,-8 5,-4",class:"fill-whole"}},{name:"rect",attribute:{x:"-20",y:"-30",width:"40",height:"60",class:"focus-part"}}],introduction:"直流电流源"}},reference_ground:{readWrite:{id:"GND_"},readOnly:{partType:"reference_ground",inputTxt:[],visionNum:0,pointInfor:[{position:[0,-20],direction:[0,-1]}],padding:0,margin:1,txtLocate:12,aspectInfor:[{name:"path",attribute:{d:"M0,-20V0M-12,0H12M-7,5H7M-2,10H2"}},{name:"rect",attribute:{x:"-15",y:"-10",width:"30",height:"26",class:"focus-part"}}],introduction:"参考地"}},voltage_meter:{readWrite:{id:"VM_"},readOnly:{partType:"voltage_meter",inputTxt:[],visionNum:1,pointInfor:[{position:[0,-40],direction:[0,-1]},{position:[0,40],direction:[0,1]}],padding:1,margin:[1,0],txtLocate:24,aspectInfor:[{name:"circle",attribute:{cx:"0",cy:"0",r:"19",class:"white-fill"}},{name:"path",attribute:{d:"M0,-40V-20M0,20V40M0,-16V-8M-4,-12H4M-4,12H4"}},{name:"path",attribute:{d:"M-7,-6L0,7L7,-6",class:"part-rotate"}},{name:"rect",attribute:{x:"-20",y:"-30",width:"40",height:"60",class:"focus-part"}}],introduction:"电压表"}},current_meter:{readWrite:{id:"IM_"},readOnly:{partType:"current_meter",inputTxt:[],visionNum:1,pointInfor:[{position:[-20,0],direction:[-1,0]},{position:[20,0],direction:[1,0]}],padding:0,margin:1,txtLocate:11,aspectInfor:[{name:"path",attribute:{d:"M-20,0H20"}},{name:"polygon",attribute:{points:"12,0 2,-6 6,0 2,6",class:"fill-whole"}},{name:"rect",attribute:{x:"-10",y:"-8",width:"20",height:"16",class:"focus-part"}}],introduction:"电流表"}},diode:{readWrite:{id:"VD_",input:["1","0.5","5M"]},readOnly:{partType:"diode",inputTxt:["导通电压：","导通电阻：","关断电阻："],parameterUnit:["V","Ω","Ω"],visionNum:1,txtLocate:18,padding:[1,0],margin:1,pointInfor:[{position:[0,-40],direction:[0,-1]},{position:[0,40],direction:[0,1]}],aspectInfor:[{name:"path",attribute:{d:"M0,-40V40M-13,-11H13"}},{name:"polygon",attribute:{points:"0,-11 -13,11 13,11",class:"fill-whole"}},{name:"rect",attribute:{x:"-13",y:"-30",width:"26",height:"60",class:"focus-part"}}],introduction:"二极管"}},transistor_npn:{readWrite:{id:"Q_",input:["40","26","0.6","1"]},readOnly:{partType:"transistor_npn",inputTxt:["电流放大倍数：","B极电阻：","BE饱和压降：","CE饱和压降："],parameterUnit:["","Ω","V","V"],visionNum:1,txtLocate:25,padding:[1,1,1,0],margin:1,pointInfor:[{position:[-20,0],direction:[-1,0]},{position:[20,-40],direction:[0,-1]},{position:[20,40],direction:[0,1]}],aspectInfor:[{name:"path",attribute:{d:"M-20,0H0M0,-25V25M20,-40V-28L0,-12M0,12L20,28V40"}},{name:"polygon",attribute:{points:"0,0 -11,-6 -7,0 -11,6",class:"fill-whole",transform:"translate(18, 26.4) rotate(38.7)"}},{name:"rect",attribute:{x:"-10",y:"-30",width:"30",height:"60",class:"focus-part"}}],introduction:"NPN型三极管"}},operational_amplifier:{readWrite:{id:"OP_",input:["120","80M","60"]},readOnly:{partType:"operational_amplifier",inputTxt:["开环增益：","输入电阻：","输出电阻："],parameterUnit:["dB","Ω","Ω"],visionNum:1,txtLocate:0,padding:1,margin:1,pointInfor:[{position:[-40,-20],direction:[-1,0]},{position:[-40,20],direction:[-1,0]},{position:[40,0],direction:[1,0]}],aspectInfor:[{name:"path",attribute:{d:"M-25,-35V35L25,0Z",class:"white-fill"}},{name:"path",attribute:{d:"M-40,-20H-25M-40,20H-25M25,0H40"}},{name:"path",attribute:{d:"M-22,-20H-16M-22,20H-16M-19,17V23","stroke-width":"1"}},{name:"rect",attribute:{x:"-30",y:"-35",width:"60",height:"70",class:"focus-part"}}],introduction:"运算放大器"}}};i.prototype={constructor:i,createPart:function(){for(var t=(0,h.$)("<g>",v.SVG_NS,{class:"editor-parts",id:this.id,opacity:"0.4"}),e={circle:{},rect:{x:"-9",y:"-9",width:"18",height:"18",class:"rect-part-point"}},n=0;n<this.aspectInfor.length;n++){var r=this.aspectInfor[n].name,i=this.aspectInfor[n].attribute,a=(0,h.$)("<"+r+">",v.SVG_NS);for(var o in i)i.hasOwnProperty(o)&&a.attr(o,i[o]);t.append(a)}for(var s=0;s<this.pointInfor.length;s++){var u=this.pointInfor[s].position,c=(0,h.$)("<g>",v.SVG_NS,{id:this.id+"-"+s,transform:"translate("+u[0]+","+u[1]+")",class:"part-point point-open"});for(var l in e)e.hasOwnProperty(l)&&c.append((0,h.$)("<"+l+">",v.SVG_NS,e[l]));t.append(c)}if(this.visionNum){for(var p=[],f=0;f<this.visionNum-1;f++)this.input[f]=this.input[f].replace("u","μ"),p.push(this.input[f]+this.parameterUnit[f]);var d=this.id.split("_"),y=(0,h.$)("<text>",v.SVG_NS,{x:"0",y:"0",class:"features-text"});y.append((0,h.$)("<tspan>",v.SVG_NS).text(d[0])),y.append((0,h.$)("<tspan>",v.SVG_NS).text(d[1]));for(var g=0;g<p.length;g++)y.append((0,h.$)("<tspan>",v.SVG_NS,{dx:"0",dy:"16"}).text(p[g]));t.append(y)}return b.append(t),t},move:function(t,e){if("text"===e){var n=this.current;n.position=n.position.add(n.mouseBias(t)),n.text.attr({x:n.position[0],y:n.position[1]})}else this.position=t?(0,f.Point)(t):this.position,this.elementDOM.attr("transform","matrix("+this.rotate.join(",")+","+this.position.join(",")+")")},textVisition:function(t){if(!this.visionNum)return!1;t=t instanceof Array?t.map(function(t){return parseInt(t)}):[this.txtLocate,-this.txtLocate];var e=(0,h.$)("text",this.elementDOM),n=(0,h.$)("tspan",e),r=this.pointRotate(),i=(0,h.$)(".part-rotate",this.elementDOM),a=this.rotate.inverse();e.attr("transform","matrix("+a.join(",")+",0,0)"),i.length&&i.attr("transform","matrix("+a.join(",")+",0,0)");for(var o=0;o<r.length;o++){var s=r[o].direction;0===s[0]?(s[1]<0&&t[1]<0||s[1]>0&&t[1]>0)&&(t[1]=0):(s[0]<0&&t[0]<0||s[0]>0&&t[0]>0)&&(t[0]=0)}Math.abs(t[0])>Math.abs(t[1])?t[1]=0:t[0]=0;var u=(0,h.$)(".focus-part",this.elementDOM).attr(["width","height"]).map(function(t){return Number(t)}),c=/scale\(([\d.]+?)\)/.exec(b.attr("transform"))||[1,1],l=Number(c[1]),p=this.elementDOM.attr("transform");if(p){var f=p.match(/\d+/g).map(function(t){return Number(t)});p=new d.Matrix([[f[0],f[1]],[f[2],f[3]]])}else p=new d.Matrix([[1,0],[0,1]]);var v=p.multo([u])[0].map(function(t){return parseInt(Math.abs(t/2))}),y=4;if(t[0])if(t[0]>0){for(var g=v[0]+y,m=(0,h.$)(n[0]),w=0,x=-m.width()/l,T=2;T<n.length;T++){var M=(0,h.$)(n[T]),_=M.height()/l;M.attr({dx:x-(0,h.$)(n[T-1]).width()/l,dy:_}),w-=_,x=0}w=.5*(w+m.height()/l)-y,e.attr({x:g,y:w})}else{for(var k=(0,h.$)(n[0]),S=-(v[0]+y+k.width()/l+(0,h.$)(n[1]).width()/l),P=0,O=2;O<n.length;O++){var C=(0,h.$)(n[O]),A=C.height()/l;C.attr({dx:-(0,h.$)(n[O]).width()/l,dy:A}),P-=A}P=.5*(P+k.height()/l)-y,e.attr({x:S,y:P})}else if(t[1]>0){var N=(0,h.$)(n[0]),V=v[1]+N.height()/l-y,E=-.5*(N.width()/l+(0,h.$)(n[1]).width()/l);e.attr({x:E,y:V});for(var $=2;$<n.length;$++){var L=(0,h.$)(n[$]);L.attr({dx:-.5*L.width()/l+E,dy:L.height()/l})}}else{for(var D=(0,h.$)(n[0]),q=-.5*(D.width()/l+(0,h.$)(n[1]).width()/l),j=0,R=2;R<n.length;R++){var B=(0,h.$)(n[R]),I=B.height()/l;B.attr({dx:-.5*B.width()/l+q,dy:I}),j-=I}j-=v[1]+y,e.attr({x:q,y:j})}},rotateSelf:function(t,e){this.position=this.position.rotate(t,e),this.rotate=this.rotate.mul(t),this.move(),this.textVisition()},shrinkCircle:function(t){(0,h.$)("circle",this.circle[t]).removeAttr("style")},enlargeCircle:function(t){(0,h.$)("circle",this.circle[t]).attr("style","r:5")},markSign:function(){var t=this.position.floorToSmall(),e=this.marginRotate().padding,n=this.pointRotate().map(function(t){return t.position});if(!t.isInteger())throw"设置标记时，器件必须对齐图纸";for(var r=t[0]-e.left;r<=t[0]+e.right;r++)for(var i=t[1]-e.top;i<=t[1]+e.bottom;i++)y.schMap.setValueBySmalle([r,i],{id:this.id,form:"part"});for(var a=0;a<n.length;a++)y.schMap.setValueBySmalle([t[0]+n[a][0]/20,t[1]+n[a][1]/20],{id:this.id+"-"+a,form:"part-point",connect:[]})},deleteSign:function(){var t=this.position.floorToSmall(),e=this.marginRotate().padding,n=this.pointRotate().map(function(t){return t.position});if(!t.isInteger())throw"设置标记时，器件必须对齐图纸";for(var r=t[0]-e.left;r<=t[0]+e.right;r++)for(var i=t[1]-e.top;i<=t[1]+e.bottom;i++)y.schMap.deleteValueBySmalle([r,i]);for(var a=0;a<n.length;a++)y.schMap.deleteValueBySmalle([t[0]+n[a][0]/20,t[1]+n[a][1]/20])},isCover:function(t){function e(t){for(var e={},n=t.marginRotate(),r=0;r<4;r++){var i=["left","right","top","bottom"][r];e[i]=n.margin[i]+n.padding[i]}return e}for(var n={},r=e(this),i=this.marginRotate().margin,a=this.pointRotate().map(function(t){return f.Point.prototype.floorToSmall.call(t.position)}),o=t?(0,f.Point)(t).roundToSmall():this.position.roundToSmall(),s=0;s<a.length;s++){var u=o.add(a[s]);if(y.schMap.getValueBySmalle(u))return!0;n[u.join(",")]=!0}for(var c=o[0]-i.left;c<=o[0]+i.right;c++)for(var l=o[1]-i.top;l<=o[1]+i.bottom;l++){var p=y.schMap.getValueBySmalle([c,l]);if(p)return!0;n[c+","+l]=!0}for(var h=o[0]-r.left;h<=o[0]+r.right;h++)for(var d=o[1]-r.top;d<=o[1]+r.bottom;d++)if(!n[h+","+d]){var v=y.schMap.getValueBySmalle([h,d]);if(v&&"part"===v.form){var g=m.partsAll.findPart(v.id),w=e(g),b=this.position.add(-1,g.position).floorToSmall();if(0!==b[0]){if(b[0]>0&&b[0]<r.left+w.right)return!0;if(-b[0]<r.right+w.left)return!0}if(0!==b[1]){if(b[1]>0&&b[1]<r.top+w.bottom)return!0;if(-b[1]<r.bottom+w.top)return!0}}}return!1},nodeCollection:function(){for(var t=[],e=this.position.floorToSmall(),n=this.marginRotate().padding,r=this.pointRotate().map(function(t){return t.position}),i=e[0]-n.left;i<=e[0]+n.right;i++)for(var a=e[1]-n.top;a<=e[1]+n.bottom;a++)t.push((0,f.Point)([20*i,20*a]));for(var o=0;o<r.length;o++)t.push(e.mul(20).add(r[o]));return t},pointRotate:function(){for(var t=[],e=0;e<this.pointInfor.length;e++){var n=this.pointInfor[e];t.push({position:this.rotate.multo([n.position])[0],direction:this.rotate.multo(n.direction)[0]})}return t},marginRotate:function(){for(var t={},e=["padding","margin"],n=0;n<2;n++){for(var r={left:0,right:0,top:0,bottom:0},i=this[e[n]],a=[[0,-i.top],[-i.left,0],[0,i.bottom],[i.right,0]],o=0;o<4;o++){var s=this.rotate.multo([a[o]])[0];0!==s[0]?s[0]>0?r.right=s[0]:r.left=-s[0]:0!==s[1]&&(s[1]>0?r.bottom=s[1]:r.top=-s[1])}t[e[n]]=r}return t},toSimpleData:function(){var t=this.visionNum?(0,h.$)("text",this.elementDOM).attr(["x","y"]):null;return{partType:this.partType,position:(0,f.Point)(this.position),rotate:new d.Matrix(this.rotate),input:Array.clone(this.input),connect:Array.clone(this.connect),text:t,id:this.id}},isExist:function(){return b.contains(this.elementDOM)||m.partsAll.has(this)},setConnect:function(t,e){2===arguments.length&&(this.connect[t]=e),this.connect[t]?this.circle[t].attr("class","part-point point-close"):(this.connect[t]="",this.circle[t].attr("class","part-point point-open")),this.shrinkCircle(t)},toFocus:function(){return this.elementDOM.addClass("focus"),m.partsNow.push(this),this},toNormal:function(){return this.elementDOM.removeClass("focus"),this.current={},this},viewParameter:function(t,e){var n=(0,h.$)("#parameter-menu"),r=(0,h.$)(".parameter-bottom-line",n),i=(0,h.$)(".st-menu-input-group",n);i.remove();for(var a=0;a<this.inputTxt.length+1;a++){var o=(0,h.$)("<div>",{class:"st-menu-input-group"});o.append((0,h.$)("<span>",{class:"st-menu-input-introduce"})),o.append((0,h.$)("<input>",{required:""})),o.append((0,h.$)("<span>",{class:"st-menu-input-highlight"})),o.append((0,h.$)("<span>",{class:"st-menu-input-bar"})),o.append((0,h.$)("<span>",{class:"st-menu-input-unit"})),n.preappend(o,r)}i=(0,h.$)(".st-menu-input-group",n);for(var s=3,u=0,c=0;c<i.length;c++){var l=c?this.inputTxt[c-1]:"编号：",p=c?this.input[c-1]:this.id,f=c?this.parameterUnit[c-1]:"";this.input&&(this.input[c]=!!this.input[c]&&this.input[c].replace("μ","u"));var d=(0,h.$)(i[c]),v=d.childrens(0),y=d.childrens(4),m=d.childrens(1);d.attr("id","parameter-"+c),v.text(l),y.text(f),m.attr("value",p),s=v.width()>s?v.width():s,u=y.width()>u?y.width():u}this.input.length--,i.childrens(4).attr("style","left:"+(s+88)+"px"),i.childrens("input, span.st-menu-input-highlight, span.st-menu-input-bar").attr("style","left:"+s+"px");var w=110+s+u<175?175:110+s+u,b=-w/2,x=b,T=-n.height()-20,M=T/2+20,_=this.position[0]*t+e[0],k=this.position[1]*t+e[1],S=(0,h.$)("#parameter-menu-triangle-down");S.css("left","50%"),k+T<0?(S.addClass("triangle-up"),T=20):S.attr("class",""),_+b<0&&(x=10-_,S.css("left",_-10+"px")),_+w/2>window.outerWidth&&(x=(0,h.$)(window).width()-10-w-_,S.css("left",-x+"px"));var P=new g.styleRule("parameter-open"),O=new g.styleRule("parameter-close");P.setRule("0%",{opacity:0,transform:"scale(0,0)",left:_+b+"px",top:k+M+"px"}),P.setRule("100%",{opacity:1,transform:"scale(1,1)",left:_+x+"px",top:k+T+"px"}),O.setRule("0%",{opacity:1,transform:"scale(1,1)",left:_+x+"px",top:k+T+"px"}),O.setRule("100%",{opacity:0,transform:"scale(0,0)",left:_+b+"px",top:k+M+"px"}),n.css({width:w+"px",left:_+x+"px",top:k+T+"px"}),n.addClass("parameter-open"),n.removeClass("parameter-close"),(0,h.$)("body").addClass("open-gray")},inputVision:function(){var t=(0,h.$)("#parameter-menu"),e=/[A-Za-z]+_[0-9A-Za-z]+/i,n=/\d+(.\d+)?[GMkmunp]?/;t.attr("class","parameter-open");var r=!0,i=(0,h.$)("#parameter-0 input",t).prop("value");i.match(e)||(t.addClass("parameter-error-0"),r=!1);for(var a=0;a<this.inputTxt.length;a++){var o=(0,h.$)("#parameter-"+(a+1)+" input",t).prop("value"),s=o.match(n);s&&o===s[0]||(t.addClass("parameter-error-"+(a+1)),r=!1)}if(!r)return!1;this.exchangeID(i);for(var u=(0,h.$)("tspan",this.elementDOM),c=0;c<this.inputTxt.length;c++)this.input[c]=(0,h.$)("#parameter-"+(c+1)+" input",t).prop("value"),this.input[c]=this.input[c].replace("u","μ"),c<this.visionNum-1&&(u[c+2].textContent=this.input[c]+this.parameterUnit[c]);var l=(0,h.$)("text",this.elementDOM);return this.textVisition([parseInt(l.attr("x")),parseInt(l.attr("y"))]),!0},putDown:function(t){t&&(this.position=(0,f.Point)(y.schMap.nodeRound(this.position.round(),this.position,this.isCover.bind(this)))),this.position=this.position.round(),this.move(),this.markSign()},deleteSelf:function(){if(!this.isExist())return!1;for(var t=0;t<this.connect.length;t++)if(this.connect[t]){var e=m.partsAll.findPart(this.connect[t]);e&&e.deleteSelf()}this.deleteSign(),this.elementDOM.remove(),m.partsAll.deletePart(this)},exchangeID:function(t){if(t===this.id)return!1;var e=this.id;m.partsAll.deletePart(this),m.partsNow.pop(this);var n=(0,h.$)("tspan",this.elementDOM),r=(0,h.$)(".part-point",this.elementDOM);this.id=t,this.elementDOM.attr("id",this.id),n.get(0).text(this.id.slice(0,this.id.search("_"))),n.get(1).text(this.id.slice(this.id.search("_")+1));for(var i=0;i<this.connect.length;i++){var a=r.get(i),o=a.attr("id").split("-");if(o[0]=t,a.attr("id",o.join("-")),this.connect[i])for(var s=m.partsAll.findPart(this.connect[i]),u=0;u<s.connect.length;u++)if(s.connect[u]=e+"-"+i){s.connect[u]=t+"-"+i;break}}m.partsAll.push(this),m.partsNow.push(this)}},m.partsNow.extend({checkLine:function(){var t=this;if(!t.length)return!1;for(var e=0;e<t.length;e++)!function e(n){if(!n)return!1;if("move"===n.current.status)return!0;if("line"!==n.partType&&t.has(n)){n.current={},n.current.status="move";for(var r=0;r<n.connect.length;r++)e(m.partsAll.findPart(n.connect[r]))}else if("line"===n.partType){if(n.current.status){if("half"===n.current.status)return n.current.status="move",!0}else n.current={},n.current.status="half";n.connect.every(function(e){return e.split(" ").map(function(t){return m.partsAll.findPart(t)}).some(function(e){return!e||t.has(e)||e.current.status})})&&(n.current.status="move",n.connect.join(" ").split(" ").forEach(function(t){return e(m.partsAll.findPart(t))}))}}(t[e]);m.partsAll.forEach(function(t){var e=t.partType,n=t.current.status;"move"===n&&(m.partsNow.has(t)||t.toFocus(),"line"===e?(t.current.bias=(0,f.Point)([0,0]),t.current.wayBackup=Array.clone(t.way)):t.current.bias=(0,f.Point)(t.position))}),m.partsAll.forEach(function(t){"half"===t.current.status&&(m.partsNow.has(t)||t.toFocus(),t.startPath(!1,"movePart"))})},moveStart:function(){this.forEach(function(t){"move"!==t.current.status&&t.toGoing(),t.deleteSign()})},moveParts:function(t){var e=this,n=e.current,r=n.mouse(t),i=r.add(-1,n.pageL);this.forEach(function(t){"move"===t.current.status?t.move(t.current.bias.add(i)):t.setPath(t.current.startPoint.add(i),"movePart")})},putDownParts:function(t){var e=this,n=e.current,r=n.mouse(event),i=r.add(-1,n.pageL);if(e.forEach(function(t){"move"===t.current.status&&("line"===t.partType?(t.way.clone(t.current.wayBackup),t.way.standardize(i)):t.move(t.current.bias.add(i)))}),e.every(function(t){return"move"!==t.current.status||!t.isCover()})){e.forEach(function(e){"move"===e.current.status&&(e.putDown(t,"movePart"),e.elementDOM.removeAttr("opacity"))}),e.forEach(function(t){"move"!==t.current.status&&t.putDown(!1,"movePart")}),"paste"===t&&e.forEach(function(t){"line"===t.partType&&t.isExist()&&(t.nodeToConnect(0),t.nodeToConnect(1),t.render(),t.markSign())});var a=e.filter(function(t){return"line"!==t.partType&&t.isExist()});return e.forEach(function(t){return t.toNormal()}),e.deleteAll(),a.forEach(function(t){return t.toFocus(),e.push(t)}),e.checkLine(),!0}return"paste"!==t&&(e.forEach(function(t){"line"!==t.partType&&(t.move(t.current.bias),t.markSign())}),e.forEach(function(t){"line"===t.partType&&(t.way.clone(t.current.wayBackup),t.render(),t.markSign())})),!1},isRotate:function(t){for(var e=this.filter(function(t){return t.current&&"move"===t.current.status}),n=[],r=0;r<e.length;r++){var i=e[r].way?e[r].way.nodeCollection():e[r].nodeCollection();n=n.concat(i)}for(var a=n.map(function(t){return t[0]}),o=n.map(function(t){return t[1]}),s=(0,f.Point)([(Math.minOfArray(a)+Math.maxOfArray(a))/2,(Math.minOfArray(o)+Math.maxOfArray(o))/2]).round(),u=Array(4).fill(!0),c=t===w?0:t,l=t===w?3:t,p=c;p<=l;p++)for(var h=x[p],d=0;d<n.length;d++){var v=n[d].rotate(h,s),g=y.schMap.getValueByOrigin(v);if(g&&g.id.split(" ").every(function(t){return!m.partsNow.has(t)})){u[p]=!1;break}}return t===w?u:u[t]},rotate:function(t){this.moveStart();var e=this.filter(function(t){return t.current&&"move"===t.current.status}),n=(0,f.Point)(this.center.call(e)).round(),r=x[t];e.forEach(function(t){t.rotateSelf(r,n),t.markSign()}),this.forEach(function(t){"move"!==t.current.status&&(t.current.initTrend=t.current.initTrend.rotate(r),t.putDown(!1,"movePart"))})}}),Object.freezeMethod(m.partsNow);for(var M in T){var _=T[M].readOnly,k=_.pointInfor;_.padding=a(_.padding),_.margin=a(_.margin);for(var S=0;S<k.length;S++)k[S].direction=new d.Matrix([k[S].direction]);T.hasOwnProperty(M)&&((0,p.default)(_,i.prototype),Object.freezeAll(_))}(0,h.$)("#sidebar-menu #menu-add-parts button.parts-list").each(function(t){var e=(0,h.$)(t),n={reference_ground:"scale(1.3, 1.3)",transistor_npn:"translate(-5,0)"},r=e.attr("id"),i=T[r].readOnly.aspectInfor,a=T[r].readOnly.introduction,o=n[r]?"translate(40,40) "+n[r]:"translate(40,40)",s=e.append((0,h.$)("<svg>",v.SVG_NS,{x:"0px",y:"0px",viewBox:"0 0 80 80"})).append((0,h.$)("<g>",v.SVG_NS));s.attr("transform",o),e.prop("introduction",a);for(var u=0;u<i.length;u++)if("rect"!==i[u].name){var c=i[u],l=s.append((0,h.$)("<"+c.name+">",v.SVG_NS));for(var p in c.attribute)if(c.attribute.hasOwnProperty(p)){if("class"===c.attribute[p])continue;l.attr(p,c.attribute[p])}}}),(0,h.$)("#menu-add-parts-close").attr("style","top:"+((0,h.$)(".st-menu-title").prop("clientHeight")-50)+"px;"),e.PartClass=i}]);